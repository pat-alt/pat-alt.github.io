<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Patrick Altmeyer</title>
<link>https://www.paltmeyer.com/blog/blog/index.html</link>
<atom:link href="https://www.paltmeyer.com/blog/blog/index.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-99.9.9</generator>
<lastBuildDate>Sun, 15 Jan 2023 23:00:00 GMT</lastBuildDate>
<item>
  <title>Quarto on Steroids: Advanced Customization through Quarto Extensions</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/quarto-extensions/index.html</link>
  <description><![CDATA[ 



<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/quarto-extensions/www/intro.gif" class="figure-img">
<figcaption class="figure-caption">
A TU Delft Theme for Quarto.
</figcaption>
</figure>
</div>
<p>I‚Äôve said it before: <a href="https://quarto.org/">Quarto</a> is amazing! Since the beginning of my PhD I haven‚Äôt used any other tool for prototyping, writing and publishing any of my work.<sup>1</sup> That work has included: this website, presentations, academic articles, notebooks and more. By highlighting useful features of Quarto in articles like this one, I hope to encourage more people to try it out.</p>
<p>While I‚Äôm convinced that Quarto can be useful in almost any context including industry, I realize that certain obstacles may have so far prevented some of you from using it. One such obstacle concerns custom formats: the standard Quarto formats for HTML, PDF, Revealjs, etc. are slick but minimalistic. For many formats, there are various themes to choose from, but they too lack personal touch (or corporate identity in the industry setting).</p>
<p>At first sight, traditional publishing tools like MS Office seem to have an edge here: customization is made easy through GUIs and standardization through templates is possible to a certain degree. I understand the appeal but still would encourage you to look beyond MS Word, Powerpoint and Beamer presentations. To this end, I‚Äôve put together this short tutorial that explains how I have built and contributed a <a href="https://github.com/pat-alt/quarto-tudelft">TU Delft theme</a> for Revealjs. If nothing else, this theme can be used by my colleagues at Delft University of Technology to create beautiful, Delft-styled presentations with ease.</p>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">üìñ Background</h2>
<p>Advanced and reproducible customization in Quarto is done through <a href="https://quarto.org/docs/extensions/">Quarto Extensions</a>:</p>
<blockquote class="blockquote">
<p>‚ÄúQuarto Extensions are a powerful way to modify or extend the behavior of Quarto, and can be created and distributed by anyone.‚Äù</p>
<p>Quarto team</p>
</blockquote>
<p>Users can already utilize several open-sourced extensions that add <a href="https://quarto.org/docs/extensions/listing-filters.html">filters</a>, <a href="https://quarto.org/docs/extensions/listing-journals.html">journal article formats</a> and other <a href="https://quarto.org/docs/extensions/listing-formats.html">custom formats</a>. As we will see, it is very straightforward to contribute extensions, so the list of available extensions is growing quickly.</p>
</section>
<section id="contributing-quarto-extensions" class="level2">
<h2 class="anchored" data-anchor-id="contributing-quarto-extensions">ü´¥ Contributing Quarto Extensions</h2>
<p>Normally, I would start by explaining how to use Quarto Extensions, but in this particular case the user and developer experience is so close that I‚Äôll jump straight into development.</p>
<section id="setup" class="level3">
<h3 class="anchored" data-anchor-id="setup">Setup</h3>
<p>To get started with building the TU Delft Custom Format I followed the official <a href="https://quarto.org/docs/extensions/formats.html#quick-start">Quarto docs</a>. I first used the appropriate Quarto command, which initiates an interactive process in the command line:</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode zsh code-with-copy"><code class="sourceCode zsh"><span id="cb1-1"><span class="ex" style="color: null;">$</span> quarto create extension format:revealjs</span>
<span id="cb1-2"> <span class="ex" style="color: null;">?</span> Extension Name ‚Ä∫ lexdoc</span></code></pre></div>
<p>Once done, the basic folder structure for my extension was set up and ready to be pushed to a remote Github repository for distribution: <a href="https://github.com/pat-alt/quarto-tudelft">https://github.com/pat-alt/quarto-tudelft</a>. Even though I had not yet added any custom formatting rules, anyone would now be able to use this empty extension for their work.</p>
</section>
<section id="adding-rules" class="level3">
<h3 class="anchored" data-anchor-id="adding-rules">Adding Rules</h3>
<p>To actually add some custom formatting rules to the extension I started working on the files contained in <code>_extensions/tudelft/</code>. Using my institution‚Äôs PowerPoint template as a reference, I previewed the <code>template.qmd</code> file and simply made appropriate adjustments to the <a href="https://github.com/pat-alt/quarto-tudelft/blob/main/_extensions/tudelft/custom.scss">_extensions/tudelft/custom.scss</a> and <a href="https://github.com/pat-alt/quarto-tudelft/blob/main/_extensions/tudelft/_extension.yml">_extensions/tudelft/_extension.yml</a> files until I was satisfied. To help me in that process, I took inspiration from various existing Revealjs extensions all listed in the <a href="https://github.com/mcanouil/awesome-quarto#presentations">awesome-quarto</a> repository.</p>
<p>I am no expert in CSS (far from it!), so this was very much trial-and-error based, but I got there eventually. One feature I am particularly happy about is the custom transition slides: by default all slides at level 1, so slides that initiate a new section,</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><span class="fu" style="color: #4758AB;"># Transition Slide</span></span></code></pre></div>
<p>will be formatted in a standardized way. The relevant CSS rule can be found <a href="https://github.com/pat-alt/quarto-tudelft/blob/b324cee4a6860a5ed5385dc607330d49de052875/_extensions/tudelft/custom.scss#L96">here</a></p>
</section>
<section id="adding-assets" class="level3">
<h3 class="anchored" data-anchor-id="adding-assets">Adding Assets</h3>
<p>The Reavealjs template also includes a few images, which I have lifted from my institution‚Äôs PowerPoint template. To make sure that these images are also available locally when users install the template, any resources need to be stored inside the theme directory <code>_extensions/tudelft/</code>. I have had some issues pointing to the right location of these images in the <a href="https://github.com/pat-alt/quarto-tudelft/blob/main/_extensions/tudelft/custom.scss">_extensions/tudelft/custom.scss</a> and <a href="https://github.com/pat-alt/quarto-tudelft/blob/main/_extensions/tudelft/_extension.yml">_extensions/tudelft/_extension.yml</a> file. At the time of writing this, the image URLs are pointing to their remote location on Github (see <a href="https://github.com/pat-alt/quarto-tudelft/blob/b324cee4a6860a5ed5385dc607330d49de052875/_extensions/tudelft/custom.scss#L12">here</a>). This works, but probably isn‚Äôt ideal, so any suggestions are welcome.</p>
</section>
</section>
<section id="example-presentation---using-quarto-extensions" class="level2">
<h2 class="anchored" data-anchor-id="example-presentation---using-quarto-extensions">üìã Example Presentation - Using Quarto Extensions</h2>
<p>In February, 2023, I will present a research paper on Algorithmic Recourse at the first IEEE Conference on Secure and Trustworthy Machine Learning: <a href="https://satml.org/">SaTML 2023</a>. This was a good incentive for me to build a TU Delft Theme once for this occasion and then be able to reuse it again in the future.</p>
<blockquote class="blockquote">
<p>With the template built and distributed, how do you actually use it?</p>
</blockquote>
<p>This part is truly a walk in the park. As outlined in the <a href="https://github.com/pat-alt/quarto-tudelft">README</a> users can either work directly with the template,</p>
<div class="sourceCode" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode zsh code-with-copy"><code class="sourceCode zsh"><span id="cb3-1"><span class="ex" style="color: null;">quarto</span> use template pat-alt/quarto-tudelft</span></code></pre></div>
<p>or add the template to an existing Quarto project:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode zsh code-with-copy"><code class="sourceCode zsh"><span id="cb4-1"><span class="ex" style="color: null;">quarto</span> add pat-alt/quarto-tudelft</span></code></pre></div>
<p>The first option will get you started with a working document straight away. For my paper presentation, I worked with the second option. At the time of writing, I am building and hosting all of my presentations in my website repository (the repo that also builds this very article you‚Äôre reading): <a href="https://github.com/pat-alt/pat-alt.github.io">https://github.com/pat-alt/pat-alt.github.io</a>.</p>
<p>With the extension added to the project, I can now use it anywhere within that project by simply specifying,</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><span class="fu" style="color: #4758AB;">format</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> tudelft-revealjs</span></span></code></pre></div>
<p>in the YAML header of my Quarto document where <code>tudelft-revealjs</code> is just the name of the custom format.</p>
<p>It gets better ‚Ä¶ The extension can be extended further by providing yet another <a href="https://github.com/pat-alt/pat-alt.github.io/blob/b6207a616f6ef9c7ec09cf8ad3383db788b9148b/content/talks/posts/2023-ieee-satml/custom.scss#L1">custom style sheet</a>, as I have done for my paper presentation:</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><span class="fu" style="color: #4758AB;">format</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span></span>
<span id="cb6-2"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">tudelft-revealjs</span><span class="kw" style="color: #003B4F;">:</span></span>
<span id="cb6-3"><span class="at" style="color: #657422;">    </span><span class="fu" style="color: #4758AB;">theme</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> custom.scss</span></span></code></pre></div>
<p>Check out the final presentation <a href="../../../content/talks/posts/2023-ieee-satml/presentation.html" target="_blank">here</a> or see the embedded version below:</p>
<iframe src="https://www.paltmeyer.com/content/talks/posts/2023-ieee-satml/presentation.html#/title-slide" width="100%" height="350">
</iframe>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Not entirely true: I‚Äôve also used <code>Pluto.jl</code> üéà and had to resort to <code>.Rmd</code> in one particular case.‚Ü©Ô∏é</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2023,
  author = {Patrick Altmeyer},
  title = {Quarto on {Steroids:} {Advanced} {Customization} Through
    {Quarto} {Extensions}},
  date = {23-01-16},
  url = {https://www.paltmeyer.com/blog//blog/posts/quarto-extensions},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2023" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 23AD. <span>‚ÄúQuarto on Steroids: Advanced
Customization Through Quarto Extensions.‚Äù</span> January 16, 23AD. <a href="https://www.paltmeyer.com/blog//blog/posts/quarto-extensions">https://www.paltmeyer.com/blog//blog/posts/quarto-extensions</a>.
</div></div></section></div> ]]></description>
  <category>Quarto</category>
  <category>reproducibility</category>
  <category>open-source</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/quarto-extensions/index.html</guid>
  <pubDate>Sun, 15 Jan 2023 23:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/quarto-extensions/www/intro.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Prediction Intervals for any Regression Model</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/conformal-regression/index.html</link>
  <description><![CDATA[ 



<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/conformal-regression/www/intro.gif" class="figure-img">
<figcaption class="figure-caption">
Conformal Prediction intervals for different<br>coverage rates. As coverage grows, so does<br>the width of the prediction interval.
</figcaption>
</figure>
</div>
<p>This is the third (and for now final) part of a series of posts that introduce Conformal Prediction in Julia using <a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a>. The first <a href="../../../blog/posts/conformal-prediction/index.html">post</a> introduced Conformal Prediction for supervised classification tasks: we learned that conformal classifiers produce set-valued predictions that are guaranteed to include the true label of a new sample with a certain probability. In the second <a href="../conformal-image-classifier/">post</a> we applied these ideas to a more hands-on example: we saw how easy it is to use <a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a> to conformalize a Deep Learning image classifier.</p>
<p>In this post, we will look at regression models instead, that is supervised learning tasks involving a continuous outcome variable. Regression tasks are as ubiquitous as classification tasks. For example, we might be interested in using a machine learning model to predict house prices or the inflation rate of the Euro or the parameter size of the next large language model. In fact, many readers may be more familiar with regression models than classification, in which case it may also be easier for you to understand Conformal Prediction (CP) in this context.</p>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">üìñ Background</h2>
<p>Before we start, let‚Äôs briefly recap what CP is all about. Don‚Äôt worry, we‚Äôre not about to deep-dive into methodology. But just to give you a high-level description upfront:</p>
<blockquote class="blockquote">
<p>Conformal prediction (a.k.a. conformal inference) is a user-friendly paradigm for creating statistically rigorous uncertainty sets/intervals for the predictions of such models. Critically, the sets are valid in a distribution-free sense: they possess explicit, non-asymptotic guarantees even without distributional assumptions or model assumptions.</p>
<p>‚Äî <span class="citation" data-cites="angelopoulos2021gentle">Angelopoulos and Bates (2021)</span> (<a href="https://arxiv.org/pdf/2107.07511.pdf">arXiv</a>)</p>
</blockquote>
<p>Intuitively, CP works under the premise of turning heuristic notions of uncertainty into rigorous uncertainty estimates through repeated sampling or the use of dedicated calibration data.</p>
<p>In what follows we will explore what CP can do by going through a standard machine learning workflow using <a href="https://alan-turing-institute.github.io/MLJ.jl/dev/"><code>MLJ.jl</code></a> and <a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a>. There will be less focus on how exactly CP works, but references will point you to additional resources.</p>
<div class="callout callout-style-default callout-tip callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Interactive Version
</div>
</div>
<div class="callout-body-container callout-body">
<p>This post is also available as a fully interactive <a href="https://github.com/fonsp/Pluto.jl"><code>Pluto.jl</code></a> üéà notebook hosted on <a href="https://mybinder.org/">binder</a>: <a href="https://binder.plutojl.org/v0.19.12/open?url=https%253A%252F%252Fraw.githubusercontent.com%252Fpat-alt%252FConformalPrediction.jl%252Fmain%252Fdocs%252Fpluto%252Fintro.jl" target="_blank"><img src="https://www.paltmeyer.com/blog/blog/posts/conformal-regression/https:/mybinder.org/badge_logo.svg" class="img-fluid" alt="Binder"></a></p>
<p>In my own experience, this may take some time to load, certainly long enough to get yourself a hot beverage ‚òï or first read on here. But I promise you that the wait is worth it!</p>
</div>
</div>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">üìà Data</h2>
<p>Most machine learning workflows start with data. For illustrative purposes we will work with synthetic data. The helper function below can be used to generate some regression data.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="kw" style="color: #003B4F;">function</span> <span class="fu" style="color: #4758AB;">get_data</span>(;N<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">1000</span>, xmax<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3.0</span>, noise<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0.5</span>, fun<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">Function</span>=<span class="fu" style="color: #4758AB;">fun</span>(X) <span class="op" style="color: #5E5E5E;">=</span> X <span class="op" style="color: #5E5E5E;">*</span> <span class="fu" style="color: #4758AB;">sin</span>(X))</span>
<span id="cb1-2">    <span class="co" style="color: #5E5E5E;"># Inputs:</span></span>
<span id="cb1-3">    d <span class="op" style="color: #5E5E5E;">=</span> Distributions.<span class="fu" style="color: #4758AB;">Uniform</span>(<span class="op" style="color: #5E5E5E;">-</span>xmax, xmax)</span>
<span id="cb1-4">    X <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">rand</span>(d, N)</span>
<span id="cb1-5">    X <span class="op" style="color: #5E5E5E;">=</span> MLJBase.<span class="fu" style="color: #4758AB;">table</span>(<span class="fu" style="color: #4758AB;">reshape</span>(X, <span class="op" style="color: #5E5E5E;">:</span>, <span class="fl" style="color: #AD0000;">1</span>))</span>
<span id="cb1-6"></span>
<span id="cb1-7">    <span class="co" style="color: #5E5E5E;"># Outputs:</span></span>
<span id="cb1-8">    Œµ <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">randn</span>(N) <span class="op" style="color: #5E5E5E;">.*</span> noise</span>
<span id="cb1-9">    y <span class="op" style="color: #5E5E5E;">=</span> @.(<span class="fu" style="color: #4758AB;">fun</span>(X.x1)) <span class="op" style="color: #5E5E5E;">+</span> Œµ</span>
<span id="cb1-10">    y <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">vec</span>(y)</span>
<span id="cb1-11">    <span class="cf" style="color: #003B4F;">return</span> X, y</span>
<span id="cb1-12"><span class="kw" style="color: #003B4F;">end</span></span></code></pre></div>
</div>
<p>Figure&nbsp;1 illustrates our observations (dots) along with the ground-truth mapping from inputs to outputs (line). We have defined that mapping <img src="https://latex.codecogs.com/png.latex?f:%20%5Cmathcal%7BX%7D%20%5Cmapsto%20%5Cmathcal%7BY%7D"> as follows:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><span class="fu" style="color: #4758AB;">f</span>(X) <span class="op" style="color: #5E5E5E;">=</span> X <span class="op" style="color: #5E5E5E;">*</span> <span class="fu" style="color: #4758AB;">cos</span>(X)</span></code></pre></div>
</div>
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="45">
<div id="fig-data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/conformal-regression/index_files/figure-html/fig-data-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Some synthetic regression data. Observations are shown as dots. The ground-truth mapping from inputs to outputs is shown as a dashed line.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="model-training-using-mlj" class="level2">
<h2 class="anchored" data-anchor-id="model-training-using-mlj">üèãÔ∏è Model Training using <a href="https://alan-turing-institute.github.io/MLJ.jl/dev/"><code>MLJ</code></a></h2>
<p><a href="(https://github.com/pat-alt/ConformalPrediction.jl)"><code>ConformalPrediction.jl</code></a> is interfaced to <a href="https://alan-turing-institute.github.io/MLJ.jl/dev/"><code>MLJ.jl</code></a> <span class="citation" data-cites="blaom2020mlj">(Blaom et al. 2020)</span>: a comprehensive Machine Learning Framework for Julia. <code>MLJ.jl</code> provides a large and growing suite of popular machine learning models that can be used for supervised and unsupervised tasks. Conformal Prediction is a model-agnostic approach to uncertainty quantification, so it can be applied to any common supervised machine learning model.</p>
<p>The interface to <code>MLJ.jl</code> therefore seems natural: any (supervised) <code>MLJ.jl</code> model can now be conformalized using <code>ConformalPrediction.jl</code>. By leveraging existing <code>MLJ.jl</code> functionality for common tasks like training, prediction and model evaluation, this package is light-weight and scalable. Now let‚Äôs see how all of that works ‚Ä¶</p>
<p>To start with, let‚Äôs split our data into a training and test set:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1">train, test <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">partition</span>(<span class="fu" style="color: #4758AB;">eachindex</span>(y), <span class="fl" style="color: #AD0000;">0.4</span>, <span class="fl" style="color: #AD0000;">0.4</span>, shuffle<span class="op" style="color: #5E5E5E;">=</span><span class="cn" style="color: #8f5902;">true</span>)</span></code></pre></div>
</div>
<p>Now let‚Äôs define a model for our regression task:</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1">Model <span class="op" style="color: #5E5E5E;">=</span> <span class="pp" style="color: #AD0000;">@load</span> KNNRegressor pkg <span class="op" style="color: #5E5E5E;">=</span> NearestNeighborModels</span>
<span id="cb4-2">model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Model</span>()</span></code></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Have it your way!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Think this dataset is too simple? Wondering why on earth I‚Äôm not using XGBoost for this task? In the interactive <a href="https://binder.plutojl.org/v0.19.12/open?url=https%253A%252F%252Fraw.githubusercontent.com%252Fpat-alt%252FConformalPrediction.jl%252Fmain%252Fdocs%252Fpluto%252Fintro.jl" target="_blank">version</a> of this post you have full control over the data and the model. Try it out!</p>
</div>
</div>
<p>Using standard <code>MLJ.jl</code> workflows let us now first train the unconformalized model. We first wrap our model in data:</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1">mach_raw <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(model, X, y)</span></code></pre></div>
</div>
<p>Then we fit the machine to the training data:</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1">MLJBase.<span class="fu" style="color: #4758AB;">fit!</span>(mach_raw, rows<span class="op" style="color: #5E5E5E;">=</span>train, verbosity<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0</span>)</span></code></pre></div>
</div>
<p>Figure&nbsp;2 below shows the resulting point predictions for the test data set:</p>
<div class="cell" data-execution_count="9">
<div class="cell-output cell-output-display" data-execution_count="50">
<div id="fig-point" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/conformal-regression/index_files/figure-html/fig-point-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Point predictions for our machine learning model.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>How is our model doing? It‚Äôs never quite right, of course, since predictions are estimates and therefore uncertain. Let‚Äôs see how we can use Conformal Prediction to express that uncertainty.</p>
</section>
<section id="conformalizing-the-model" class="level2">
<h2 class="anchored" data-anchor-id="conformalizing-the-model">üî• Conformalizing the Model</h2>
<p>We can turn our <code>model</code> into a conformalized model in just one line of code:</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1">conf_model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">conformal_model</span>(model)</span></code></pre></div>
</div>
<p>By default <code>conformal_model</code> creates an Inductive Conformal Regressor (more on this below) when called on a <code>&lt;:Deterministic</code> model. This behaviour can be changed by using the optional <code>method</code> key argument.</p>
<p>To train our conformal model we can once again rely on standard <code>MLJ.jl</code> workflows. We first wrap our model in data:</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1">mach <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(conf_model, X, y)</span></code></pre></div>
</div>
<p>Then we fit the machine to the data:</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1">MLJBase.<span class="fu" style="color: #4758AB;">fit!</span>(mach, rows<span class="op" style="color: #5E5E5E;">=</span>train, verbosity<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0</span>)</span></code></pre></div>
</div>
<p>Now let us look at the predictions for our test data again. The chart below shows the results for our conformalized model. Predictions from conformal regressors are range-valued: for each new sample the model returns an interval <img src="https://latex.codecogs.com/png.latex?(y_%7B%5Ctext%7Blb%7D%7D,y_%7B%5Ctext%7Bub%7D%7D)%5Cin%5Cmathcal%7BY%7D"> that covers the test sample with a user-specified probability <img src="https://latex.codecogs.com/png.latex?(1-%5Calpha)">, where <img src="https://latex.codecogs.com/png.latex?%5Calpha"> is the expected error rate. This is known as the <strong>marginal coverage guarantee</strong> and it is proven to hold under the assumption that training and test data are exchangeable.</p>
<div class="cell" data-execution_count="13">
<div class="cell-output cell-output-display" data-execution_count="54">
<div id="fig-interval" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/conformal-regression/index_files/figure-html/fig-interval-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Prediction intervals for our conformalized machine learning model.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Intuitively, a higher coverage rate leads to larger prediction intervals: since a larger interval covers a larger subspace of <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BY%7D">, it is more likely to cover the true value.</p>
<p>I don‚Äôt expect you to believe me that the marginal coverage property really holds. In fact, I couldn‚Äôt believe it myself when I first learned about it. If you like mathematical proofs, you can find one in this <a href="https://arxiv.org/pdf/2107.07511.pdf">tutorial</a>, for example. If you like convincing yourself through empirical observations, read on below ‚Ä¶</p>
</section>
<section id="evaluation" class="level2">
<h2 class="anchored" data-anchor-id="evaluation">üßê Evaluation</h2>
<p>To verify the marginal coverage property empirically we can look at the empirical coverage rate of our conformal predictor (see Section 3 of the <a href="https://arxiv.org/pdf/2107.07511.pdf">tutorial</a> for details). To this end our package provides a custom performance measure <code>emp_coverage</code> that is compatible with <code>MLJ.jl</code> model evaluation workflows. In particular, we will call <code>evaluate!</code> on our conformal model using <code>emp_coverage</code> as our performance metric. The resulting empirical coverage rate should then be close to the desired level of coverage.</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1">model_evaluation <span class="op" style="color: #5E5E5E;">=</span></span>
<span id="cb10-2">    <span class="fu" style="color: #4758AB;">evaluate!</span>(_mach, operation<span class="op" style="color: #5E5E5E;">=</span>MLJBase.predict, measure<span class="op" style="color: #5E5E5E;">=</span>emp_coverage, verbosity<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0</span>)</span>
<span id="cb10-3"><span class="fu" style="color: #4758AB;">println</span>(<span class="st" style="color: #20794D;">"Empirical coverage: </span><span class="sc" style="color: #5E5E5E;">$</span>(<span class="fu" style="color: #4758AB;">round</span>(model_evaluation.measurement[<span class="fl" style="color: #AD0000;">1</span>], digits<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3</span>))<span class="st" style="color: #20794D;">"</span>)</span>
<span id="cb10-4"><span class="fu" style="color: #4758AB;">println</span>(<span class="st" style="color: #20794D;">"Coverage per fold: </span><span class="sc" style="color: #5E5E5E;">$</span>(<span class="fu" style="color: #4758AB;">round</span>.(model_evaluation.per_fold[<span class="fl" style="color: #AD0000;">1</span>], digits<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3</span>))<span class="st" style="color: #20794D;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Empirical coverage: 0.902
Coverage per fold: [0.94, 0.904, 0.874, 0.874, 0.898, 0.922]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="cell-output cell-output-display" data-execution_count="58">
<blockquote class="blockquote">
<p>‚úÖ ‚úÖ ‚úÖ Great! We got an empirical coverage rate that is slightly higher than desired üòÅ ‚Ä¶ but why isn‚Äôt it exactly the same?</p>
</blockquote>
<p>In most cases it will be slightly higher than desired, since <img src="https://latex.codecogs.com/png.latex?(1-%5Calpha)"> is a lower bound. But note that it can also be slightly lower than desired. That is because the coverage property is ‚Äúmarginal‚Äù in the sense that the probability is averaged over the randomness in the data. For most purposes a large enough calibration set size (<img src="https://latex.codecogs.com/png.latex?n%3E1000">) mitigates that randomness enough. Depending on your choices above, the calibration set may be quite small (set to 500), which can lead to <strong>coverage slack</strong> (see Section 3 in the <a href="https://arxiv.org/pdf/2107.07511.pdf">tutorial</a>).</p>
</div>
</div>
<section id="so-whats-happening-under-the-hood" class="level3">
<h3 class="anchored" data-anchor-id="so-whats-happening-under-the-hood"><em>So what‚Äôs happening under the hood?</em></h3>
<p>Inductive Conformal Prediction (also referred to as Split Conformal Prediction) broadly speaking works as follows:</p>
<ol type="1">
<li>Partition the training into a proper training set and a separate calibration set</li>
<li>Train the machine learning model on the proper training set.</li>
<li>Using some heuristic notion of uncertainty (e.g., absolute error in the regression case), compute nonconformity scores using the calibration data and the fitted model.</li>
<li>For the given coverage ratio compute the corresponding quantile of the empirical distribution of nonconformity scores.</li>
<li>For the given quantile and test sample <img src="https://latex.codecogs.com/png.latex?X_%7B%5Ctext%7Btest%7D%7D">, form the corresponding conformal prediction set like so: <img src="https://latex.codecogs.com/png.latex?C(X_%7B%5Ctext%7Btest%7D%7D)=%5C%7By:s(X_%7B%5Ctext%7Btest%7D%7D,y)%20%5Cle%20%5Chat%7Bq%7D%5C%7D"></li>
</ol>
</section>
</section>
<section id="recap" class="level2">
<h2 class="anchored" data-anchor-id="recap">üîÉ Recap</h2>
<p>This has been a super quick tour of <a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a>. We have seen how the package naturally integrates with <a href="https://alan-turing-institute.github.io/MLJ.jl/dev/"><code>MLJ.jl</code></a>, allowing users to generate rigorous predictive uncertainty estimates for any supervised machine learning model.</p>
<section id="are-we-done" class="level3">
<h3 class="anchored" data-anchor-id="are-we-done"><em>Are we done?</em></h3>
<p>Quite cool, right? Using a single API call we are able to generate rigorous prediction intervals for all kinds of different regression models. Have we just solved predictive uncertainty quantification once and for all? Do we even need to bother with anything else? Conformal Prediction is a very useful tool, but like so many other things, it is not the final answer to all our problems. In fact, let‚Äôs see if we can take CP to its limits.</p>
<p>The helper function to generate data from above takes an optional argument <code>xmax</code>. By increasing that value, we effectively expand the domain of our input. Let‚Äôs do that and see how our conformal model does on this new out-of-domain data.</p>
<div class="cell" data-execution_count="18">
<div class="cell-output cell-output-display" data-execution_count="59">
<div id="fig-ood" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/conformal-regression/index_files/figure-html/fig-ood-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;4: Prediction intervals for our conformalized machine learning model applied to out-of-domain data.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<p>Whooooops ü§ï ‚Ä¶ looks like we‚Äôre in trouble: in Figure&nbsp;4 the prediction intervals do not cover out-of-domain test samples well. What happened here?</p>
</blockquote>
<p>By expanding the domain of out inputs, we have violated the exchangeability assumption. When that assumption is violated, the marginal coverage property does not hold. But do not despair! There are ways to deal with this.</p>
</section>
</section>
<section id="read-on" class="level2">
<h2 class="anchored" data-anchor-id="read-on">üìö Read on</h2>
<p>If you are curious to find out more, be sure to read on in the <a href="https://www.paltmeyer.com/ConformalPrediction.jl/stable/">docs</a>. There are also a number of useful resources to learn more about Conformal Prediction, a few of which I have listed below:</p>
<ul>
<li><em>A Gentle Introduction to Conformal Prediction and Distribution-Free Uncertainty Quantification</em> by Angelopoulos and Bates (<a href="https://arxiv.org/pdf/2107.07511.pdf">2022</a>).</li>
<li><em>Awesome Conformal Prediction</em> repository by Manokhin (<a href="https://github.com/valeman/awesome-conformal-prediction">2022</a>)</li>
<li><strong>MAPIE</strong>: a comprehensive Python <a href="https://mapie.readthedocs.io/en/latest/index.html">library</a> for conformal prediction.</li>
<li>My previous two blog posts.</li>
</ul>
<p>Enjoy!</p>
</section>
<section id="references" class="level2">




</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-angelopoulos2021gentle" class="csl-entry">
Angelopoulos, Anastasios N., and Stephen Bates. 2021. <span>‚ÄúA Gentle Introduction to Conformal Prediction and Distribution-Free Uncertainty Quantification.‚Äù</span> <a href="https://arxiv.org/abs/2107.07511">https://arxiv.org/abs/2107.07511</a>.
</div>
<div id="ref-blaom2020mlj" class="csl-entry">
Blaom, Anthony D., Franz Kiraly, Thibaut Lienart, Yiannis Simillides, Diego Arenas, and Sebastian J. Vollmer. 2020. <span>‚Äú<span>MLJ</span>: <span>A Julia</span> Package for Composable Machine Learning.‚Äù</span> <em>Journal of Open Source Software</em> 5 (55): 2704. <a href="https://doi.org/10.21105/joss.02704">https://doi.org/10.21105/joss.02704</a>.
</div>
</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2022,
  author = {Patrick Altmeyer},
  title = {Prediction {Intervals} for Any {Regression} {Model}},
  date = {22-12-12},
  url = {https://www.paltmeyer.com/blog//blog/posts/conformal-regression},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2022" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 22AD. <span>‚ÄúPrediction Intervals for Any Regression
Model.‚Äù</span> December 12, 22AD. <a href="https://www.paltmeyer.com/blog//blog/posts/conformal-regression">https://www.paltmeyer.com/blog//blog/posts/conformal-regression</a>.
</div></div></section></div> ]]></description>
  <category>probabilistic programming</category>
  <category>uncertainty</category>
  <category>conformal prediction</category>
  <category>regression</category>
  <category>Julia</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/conformal-regression/index.html</guid>
  <pubDate>Sun, 11 Dec 2022 23:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/conformal-regression/www/intro.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>How to Conformalize a Deep Image Classifier</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/conformal-image-classifier/index.html</link>
  <description><![CDATA[ 



<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/conformal-image-classifier/www/intro.gif" class="figure-img">
<figcaption class="figure-caption">
Conformalized prediction sets for a<br>simple Deep Image Classifier.
</figcaption>
</figure>
</div>
<p>Deep Learning is popular and ‚Äî for some tasks like image classification ‚Äî remarkably powerful. But it is also well-known that Deep Neural Networks (DNN) can be unstable <span class="citation" data-cites="goodfellow2014explaining">(Goodfellow, Shlens, and Szegedy 2014)</span> and poorly calibrated. Conformal Prediction can be used to mitigate these pitfalls.</p>
<p>In the <a href="../../../blog/posts/conformal-prediction/index.html">first part</a> of this series of posts on Conformal Prediction, we looked at the basic underlying methodology and how CP can be implemented in Julia using <a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a>. This second part of the series is a more goal-oriented how-to guide: it demonstrates how you can conformalize a deep learning image classifier built in <code>Flux.jl</code> in just a few lines of code.</p>
<p>Since this is meant to be more of a hands-on article, we will avoid diving too deeply into methodological concepts. If you need more colour on this, be sure to check out the <a href="../../../blog/posts/conformal-prediction/index.html">first article</a> on this topic and also <span class="citation" data-cites="angelopoulos2021gentle">A. N. Angelopoulos and Bates (2021)</span>. For a more formal treatment of Conformal Prediction see also <span class="citation" data-cites="angelopoulos2022uncertainty">A. Angelopoulos et al. (2022)</span>.</p>
<section id="the-task-at-hand" class="level2">
<h2 class="anchored" data-anchor-id="the-task-at-hand">üéØ The Task at Hand</h2>
<p>The task at hand is to predict the labels of handwritten images of digits using the famous MNIST dataset <span class="citation" data-cites="lecun1998mnist">(LeCun 1998)</span>. Importing this popular machine learning dataset in Julia is made remarkably easy through <code>MLDatasets.jl</code>:</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">MLDatasets</span></span>
<span id="cb1-2">N <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1000</span></span>
<span id="cb1-3">Xraw, yraw <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">MNIST</span>(split<span class="op" style="color: #5E5E5E;">=:</span>train)[<span class="op" style="color: #5E5E5E;">:</span>]</span>
<span id="cb1-4">Xraw <span class="op" style="color: #5E5E5E;">=</span> Xraw[<span class="op" style="color: #5E5E5E;">:</span>,<span class="op" style="color: #5E5E5E;">:</span>,<span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span>N]</span>
<span id="cb1-5">yraw <span class="op" style="color: #5E5E5E;">=</span> yraw[<span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span>N]</span></code></pre></div>
</div>
<p>Figure&nbsp;1 below shows a few random samples from the training data:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">MLJ</span></span>
<span id="cb2-2"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Images</span></span>
<span id="cb2-3">X <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">map</span>(x <span class="op" style="color: #5E5E5E;">-&gt;</span> <span class="fu" style="color: #4758AB;">convert2image</span>(MNIST, x), <span class="fu" style="color: #4758AB;">eachslice</span>(Xraw, dims<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3</span>))</span>
<span id="cb2-4">y <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">coerce</span>(yraw, Multiclass)</span>
<span id="cb2-5"></span>
<span id="cb2-6">n_samples <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">10</span></span>
<span id="cb2-7"><span class="fu" style="color: #4758AB;">mosaic</span>(<span class="fu" style="color: #4758AB;">rand</span>(X, n_samples)<span class="op" style="color: #5E5E5E;">...</span>, ncol<span class="op" style="color: #5E5E5E;">=</span>n_samples)</span></code></pre></div>
<div id="fig-samples" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/conformal-image-classifier/data:image/png;base64,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" class="figure-img">
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Random samples from the MNIST dataset.</figcaption><p></p>
</figure>
</div>
</div>
</section>
<section id="building-the-network" class="level2">
<h2 class="anchored" data-anchor-id="building-the-network">üöß Building the Network</h2>
<p>To model the mapping from image inputs to labels will rely on a simple Multi-Layer Perceptron (MLP). A great Julia library for Deep Learning is <code>Flux.jl</code>. But wait ‚Ä¶ doesn‚Äôt <code>ConformalPrediction.jl</code> work with models trained in <code>MLJ.jl</code>? That‚Äôs right, but fortunately there exists a <code>Flux.jl</code> interface to <code>MLJ.jl</code>, namely <code>MLJFlux.jl</code>. The interface is still in its early stages, but already very powerful and easily accessible for anyone (like myself) who is used to building Neural Networks in <code>Flux.jl</code>.</p>
<p>In <code>Flux.jl</code>, you could build an MLP for this task as follows,</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Flux</span></span>
<span id="cb3-2"></span>
<span id="cb3-3">mlp <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Chain</span>(</span>
<span id="cb3-4">    Flux.flatten,</span>
<span id="cb3-5">    <span class="fu" style="color: #4758AB;">Dense</span>(<span class="fu" style="color: #4758AB;">prod</span>((<span class="fl" style="color: #AD0000;">28</span>,<span class="fl" style="color: #AD0000;">28</span>)), <span class="fl" style="color: #AD0000;">32</span>, relu),</span>
<span id="cb3-6">    <span class="fu" style="color: #4758AB;">Dense</span>(<span class="fl" style="color: #AD0000;">32</span>, <span class="fl" style="color: #AD0000;">10</span>)</span>
<span id="cb3-7">)</span></code></pre></div>
</div>
<p>where <code>(28,28)</code> is just the input dimension (28x28 pixel images). Since we have ten digits, our output dimension is ten.<sup>1</sup></p>
<p>We can do the exact same thing in <code>MLJFlux.jl</code> as follows,</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">MLJFlux</span></span>
<span id="cb4-2"></span>
<span id="cb4-3">builder <span class="op" style="color: #5E5E5E;">=</span> MLJFlux.<span class="pp" style="color: #AD0000;">@builder</span> <span class="fu" style="color: #4758AB;">Chain</span>(</span>
<span id="cb4-4">    Flux.flatten,</span>
<span id="cb4-5">    <span class="fu" style="color: #4758AB;">Dense</span>(<span class="fu" style="color: #4758AB;">prod</span>(n_in), <span class="fl" style="color: #AD0000;">32</span>, relu),</span>
<span id="cb4-6">    <span class="fu" style="color: #4758AB;">Dense</span>(<span class="fl" style="color: #AD0000;">32</span>, n_out)</span>
<span id="cb4-7">)</span></code></pre></div>
</div>
<p>where here we rely on the <code>@builder</code> macro to make the transition from <code>Flux.jl</code> to <code>MLJ.jl</code> as seamless as possible. Finally, <code>MLJFlux.jl</code> already comes with a number of helper functions to define plain-vanilla networks. In this case, we will use the <code>ImageClassifier</code> with our custom builder and cross-entropy loss:</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1">ImageClassifier <span class="op" style="color: #5E5E5E;">=</span> <span class="pp" style="color: #AD0000;">@load</span> ImageClassifier</span>
<span id="cb5-2">clf <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">ImageClassifier</span>(</span>
<span id="cb5-3">    builder<span class="op" style="color: #5E5E5E;">=</span>builder,</span>
<span id="cb5-4">    epochs<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">10</span>,</span>
<span id="cb5-5">    loss<span class="op" style="color: #5E5E5E;">=</span>Flux.crossentropy</span>
<span id="cb5-6">)</span></code></pre></div>
</div>
<p>The generated instance <code>clf</code> is a model (in the <code>MLJ.jl</code> sense) so from this point on we can rely on standard <code>MLJ.jl</code> workflows. For example, we can wrap our model in data to create a machine and then evaluate it on a holdout set as follows:</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1">mach <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(clf, X, y)</span>
<span id="cb6-2"></span>
<span id="cb6-3"><span class="fu" style="color: #4758AB;">evaluate!</span>(</span>
<span id="cb6-4">    mach,</span>
<span id="cb6-5">    resampling<span class="op" style="color: #5E5E5E;">=</span><span class="fu" style="color: #4758AB;">Holdout</span>(rng<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">123</span>, fraction_train<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0.8</span>),</span>
<span id="cb6-6">    operation<span class="op" style="color: #5E5E5E;">=</span>predict_mode,</span>
<span id="cb6-7">    measure<span class="op" style="color: #5E5E5E;">=</span>[accuracy]</span>
<span id="cb6-8">)</span></code></pre></div>
</div>
<p>The accuracy of our very simple model is not amazing, but good enough for the purpose of this tutorial. For each image, our MLP returns a softmax output for each possible digit: 0,1,2,3,‚Ä¶,9. Since each individual softmax output is valued between zero and one, <img src="https://latex.codecogs.com/png.latex?y_k%5Cin(0,1)">, this is commonly interpreted as a probability: <img src="https://latex.codecogs.com/png.latex?y_k%20%5Ccoloneqq%20p(y=k%7CX)">. Edge cases ‚Äì that is values close to either zero or one ‚Äì indicate high predictive certainty. But this is only a heuristic notion of predictive uncertainty <span class="citation" data-cites="angelopoulos2021gentle">(A. N. Angelopoulos and Bates 2021)</span>. Next, we will turn this heuristic notion of uncertainty into a rigorous one using Conformal Prediction.</p>
</section>
<section id="conformalizing-the-network" class="level2">
<h2 class="anchored" data-anchor-id="conformalizing-the-network">üî• Conformalizing the Network</h2>
<p>Since <code>clf</code> is a model, it is also compatible with our package: <code>ConformalPrediction.jl</code>. To conformalize our MLP, we therefore only need to call <code>conformal_model(clf)</code>. Since the generated instance <code>conf_model</code> is also just a model, we can still rely on standard <code>MLJ.jl</code> workflows. Below we first wrap it in data and then fit it. Aaaand ‚Ä¶ we‚Äôre done! Let‚Äôs look at the results in the next section.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">ConformalPrediction</span></span>
<span id="cb7-2">conf_model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">conformal_model</span>(clf; method<span class="op" style="color: #5E5E5E;">=:</span>simple_inductive, coverage<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">.95</span>)</span>
<span id="cb7-3">mach <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(conf_model, X, y)</span>
<span id="cb7-4"><span class="fu" style="color: #4758AB;">fit!</span>(mach)</span></code></pre></div>
</div>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">üìä Results</h2>
<p>Figure&nbsp;2 below presents the results. Figure&nbsp;2 (a) displays highly certain predictions, now defined in the rigorous sense of Conformal Prediction: in each case, the conformal set (just beneath the image) includes only one label.</p>
<p>Figure&nbsp;2 (b) and Figure&nbsp;2 (c) display increasingly uncertain predictions of set size two and three, respectively. They demonstrate that CP is well equipped to deal with samples characterized by high aleatoric uncertainty: digits four (4), seven (7) and nine (9) share certain similarities. So do digits five (5) and six (6) as well as three (3) and eight (8). These may be hard to distinguish from each other even after seeing many examples (and even for a human). It is therefore unsurprising to see that these digits often end up together in conformal sets.</p>
<div id="fig-plots" class="cell quarto-layout-panel" data-execution_count="10">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-plots-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/conformal-image-classifier/index_files/figure-html/fig-plots-output-1.svg" class="img-fluid figure-img" data-ref-parent="fig-plots"></p>
<p></p><figcaption class="figure-caption">(a) Randomly selected prediction sets of size <img src="https://latex.codecogs.com/png.latex?%7CC%7C=1">.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-plots-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/conformal-image-classifier/index_files/figure-html/fig-plots-output-2.svg" class="img-fluid figure-img" data-ref-parent="fig-plots"></p>
<p></p><figcaption class="figure-caption">(b) Randomly selected prediction sets of size <img src="https://latex.codecogs.com/png.latex?%7CC%7C=2">.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-display quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 100.0%;justify-content: center;">
<div id="fig-plots-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/conformal-image-classifier/index_files/figure-html/fig-plots-output-3.svg" class="img-fluid figure-img" data-ref-parent="fig-plots"></p>
<p></p><figcaption class="figure-caption">(c) Randomly selected prediction sets of size <img src="https://latex.codecogs.com/png.latex?%7CC%7C=3">.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Conformalized predictions from an image classifier.</figcaption><p></p>
</figure>
</div>
</section>
<section id="evaluation" class="level2">
<h2 class="anchored" data-anchor-id="evaluation">üßê Evaluation</h2>
<p>To evaluate the performance of conformal models, specific performance measures can be used to assess if the model is correctly specified and well-calibrated <span class="citation" data-cites="angelopoulos2021gentle">(A. N. Angelopoulos and Bates 2021)</span>. We will look at this in some more detail in another post in the future. For now, just be aware that these measures are already available in <code>ConformalPrediction.jl</code> and we will briefly showcase them here.</p>
<p>As for many other things, <code>ConformalPrediction.jl</code> taps into the existing functionality of <code>MLJ.jl</code> for model evaluation. In particular, we will see below how we can use the generic <code>evaluate!</code> method on our machine. To assess the correctness of our conformal predictor, we can compute the empirical coverage rate using the custom performance measure <code>emp_coverage</code>. With respect to model calibration we will look at the model‚Äôs conditional coverage. For adaptive, well-calibrated conformal models, conditional coverage is high. One general go-to measure for assessing conditional coverage is size-stratified coverage. The custom measure for this purpose is just called <code>size_stratified_coverage</code>, aliased by <code>ssc</code>.</p>
<p>The code below implements the model evaluation using cross-validation. The Simple Inductive Classifier that we used above is not adaptive and hence the attained conditional coverage is low compared to the overall empirical coverage, which is close to <img src="https://latex.codecogs.com/png.latex?0.95">, so in line with the desired coverage rate specified above.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1">_eval <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">evaluate!</span>(</span>
<span id="cb8-2">    mach,</span>
<span id="cb8-3">    resampling<span class="op" style="color: #5E5E5E;">=</span><span class="fu" style="color: #4758AB;">CV</span>(),</span>
<span id="cb8-4">    operation<span class="op" style="color: #5E5E5E;">=</span>predict,</span>
<span id="cb8-5">    measure<span class="op" style="color: #5E5E5E;">=</span>[emp_coverage, ssc]</span>
<span id="cb8-6">)</span>
<span id="cb8-7"><span class="fu" style="color: #4758AB;">display</span>(_eval)</span>
<span id="cb8-8"><span class="fu" style="color: #4758AB;">println</span>(<span class="st" style="color: #20794D;">"Empirical coverage: </span><span class="sc" style="color: #5E5E5E;">$</span>(<span class="fu" style="color: #4758AB;">round</span>(_eval.measurement[<span class="fl" style="color: #AD0000;">1</span>], digits<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3</span>))<span class="st" style="color: #20794D;">"</span>)</span>
<span id="cb8-9"><span class="fu" style="color: #4758AB;">println</span>(<span class="st" style="color: #20794D;">"SSC: </span><span class="sc" style="color: #5E5E5E;">$</span>(<span class="fu" style="color: #4758AB;">round</span>(_eval.measurement[<span class="fl" style="color: #AD0000;">2</span>], digits<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3</span>))<span class="st" style="color: #20794D;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="ansi-escaped-output">
<pre>PerformanceEvaluation object with these fields:
  measure, operation, measurement, per_fold,
  per_observation, fitted_params_per_fold,
  report_per_fold, train_test_rows
Extract:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚îÇ measure                                                   ‚îÇ operation ‚îÇ meas ‚ãØ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚îÇ emp_coverage (generic function with 1 method)             ‚îÇ predict   ‚îÇ 0.95 ‚ãØ
‚îÇ size_stratified_coverage (generic function with 1 method) ‚îÇ predict   ‚îÇ 0.77 ‚ãØ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
<span class="ansi-cyan-fg">                                                               3 columns omitted</span>
</pre>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Empirical coverage: 0.951
SSC: 0.771</code></pre>
</div>
</div>
<p>We can attain higher adaptivity (SSC) when using adaptive prediction sets:</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1">conf_model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">conformal_model</span>(clf; method<span class="op" style="color: #5E5E5E;">=:</span>adaptive_inductive, coverage<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">.95</span>)</span>
<span id="cb10-2">mach <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(conf_model, X, y)</span>
<span id="cb10-3"><span class="fu" style="color: #4758AB;">fit!</span>(mach)</span>
<span id="cb10-4">_eval <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">evaluate!</span>(</span>
<span id="cb10-5">    mach,</span>
<span id="cb10-6">    resampling<span class="op" style="color: #5E5E5E;">=</span><span class="fu" style="color: #4758AB;">CV</span>(),</span>
<span id="cb10-7">    operation<span class="op" style="color: #5E5E5E;">=</span>predict,</span>
<span id="cb10-8">    measure<span class="op" style="color: #5E5E5E;">=</span>[emp_coverage, ssc]</span>
<span id="cb10-9">)</span>
<span id="cb10-10">results[<span class="op" style="color: #5E5E5E;">:</span>adaptive_inductive] <span class="op" style="color: #5E5E5E;">=</span> mach</span>
<span id="cb10-11"><span class="fu" style="color: #4758AB;">display</span>(_eval)</span>
<span id="cb10-12"><span class="fu" style="color: #4758AB;">println</span>(<span class="st" style="color: #20794D;">"Empirical coverage: </span><span class="sc" style="color: #5E5E5E;">$</span>(<span class="fu" style="color: #4758AB;">round</span>(_eval.measurement[<span class="fl" style="color: #AD0000;">1</span>], digits<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3</span>))<span class="st" style="color: #20794D;">"</span>)</span>
<span id="cb10-13"><span class="fu" style="color: #4758AB;">println</span>(<span class="st" style="color: #20794D;">"SSC: </span><span class="sc" style="color: #5E5E5E;">$</span>(<span class="fu" style="color: #4758AB;">round</span>(_eval.measurement[<span class="fl" style="color: #AD0000;">2</span>], digits<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3</span>))<span class="st" style="color: #20794D;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="ansi-escaped-output">
<pre>PerformanceEvaluation object with these fields:
  measure, operation, measurement, per_fold,
  per_observation, fitted_params_per_fold,
  report_per_fold, train_test_rows
Extract:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚îÇ measure                                                   ‚îÇ operation ‚îÇ meas ‚ãØ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚îÇ emp_coverage (generic function with 1 method)             ‚îÇ predict   ‚îÇ 0.99 ‚ãØ
‚îÇ size_stratified_coverage (generic function with 1 method) ‚îÇ predict   ‚îÇ 0.94 ‚ãØ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
<span class="ansi-cyan-fg">                                                               3 columns omitted</span>
</pre>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Empirical coverage: 0.991
SSC: 0.948</code></pre>
</div>
</div>
<p>We can also have a look at the resulting set size for both approaches using a custom <code>Plots.jl</code> recipe (fig-setsize). In line with the above, the spread is wider for the adaptive approach, which reflects that ‚Äúthe procedure is effectively distinguishing between easy and hard inputs‚Äù <span class="citation" data-cites="angelopoulos2021gentle">(A. N. Angelopoulos and Bates 2021)</span>.</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1">plt_list <span class="op" style="color: #5E5E5E;">=</span> []</span>
<span id="cb12-2"><span class="cf" style="color: #003B4F;">for</span> (_mod, mach) <span class="kw" style="color: #003B4F;">in</span> results</span>
<span id="cb12-3">    <span class="fu" style="color: #4758AB;">push!</span>(plt_list, <span class="fu" style="color: #4758AB;">bar</span>(mach.model, mach.fitresult, X; title<span class="op" style="color: #5E5E5E;">=</span><span class="fu" style="color: #4758AB;">String</span>(_mod)))</span>
<span id="cb12-4"><span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb12-5"><span class="fu" style="color: #4758AB;">plot</span>(plt_list<span class="op" style="color: #5E5E5E;">...</span>, size<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">800</span>,<span class="fl" style="color: #AD0000;">300</span>))</span>
<span id="cb12-6"><span class="fu" style="color: #4758AB;">plot</span>(plt_list<span class="op" style="color: #5E5E5E;">...</span>, size<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">800</span>,<span class="fl" style="color: #AD0000;">300</span>),bg_colour<span class="op" style="color: #5E5E5E;">=:</span>transparent)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<div id="fig-setsize" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/conformal-image-classifier/index_files/figure-html/fig-setsize-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Distribution of set sizes for both approaches.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="recap" class="level2">
<h2 class="anchored" data-anchor-id="recap">üîÅ Recap</h2>
<p>In this short guide we have seen how easy it is to conformalize a deep learning image classifier in Julia using <code>ConformalPrediction.jl</code>. Almost any deep neural network trained in <code>Flux.jl</code> is compatible with <code>MLJ.jl</code> and can therefore be conformalized in just a few lines of code. This makes it remarkably easy to move uncertainty heuristics to rigorous predictive uncertainty estimates. We have also seen a sneak peek at performance evaluation of conformal predictors. Stay tuned for more!</p>
</section>
<section id="references" class="level2">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">üéì References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-angelopoulos2021gentle" class="csl-entry">
Angelopoulos, Anastasios N., and Stephen Bates. 2021. <span>‚ÄúA Gentle Introduction to Conformal Prediction and Distribution-Free Uncertainty Quantification.‚Äù</span> <a href="https://arxiv.org/abs/2107.07511">https://arxiv.org/abs/2107.07511</a>.
</div>
<div id="ref-angelopoulos2022uncertainty" class="csl-entry">
Angelopoulos, Anastasios, Stephen Bates, Jitendra Malik, and Michael I. Jordan. 2022. <span>‚ÄúUncertainty <span>Sets</span> for <span>Image Classifiers</span> Using <span>Conformal Prediction</span>.‚Äù</span> <span>arXiv</span>. <a href="http://arxiv.org/abs/2009.14193">http://arxiv.org/abs/2009.14193</a>.
</div>
<div id="ref-goodfellow2014explaining" class="csl-entry">
Goodfellow, Ian J, Jonathon Shlens, and Christian Szegedy. 2014. <span>‚ÄúExplaining and Harnessing Adversarial Examples.‚Äù</span> <a href="https://arxiv.org/abs/1412.6572">https://arxiv.org/abs/1412.6572</a>.
</div>
<div id="ref-lecun1998mnist" class="csl-entry">
LeCun, Yann. 1998. <span>‚ÄúThe <span>MNIST</span> Database of Handwritten Digits.‚Äù</span>
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>For a full tutorial on how to build an MNIST image classifier relying solely on <code>Flux.jl</code>, check out this <a href="https://fluxml.ai/Flux.jl/stable/tutorials/2021-01-26-mlp/">tutorial</a>.‚Ü©Ô∏é</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2022,
  author = {Patrick Altmeyer},
  title = {How to {Conformalize} a {Deep} {Image} {Classifier}},
  date = {22-12-05},
  url = {https://www.paltmeyer.com/blog//blog/posts/conformal-image-classifier},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2022" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 22AD. <span>‚ÄúHow to Conformalize a Deep Image
Classifier.‚Äù</span> December 5, 22AD. <a href="https://www.paltmeyer.com/blog//blog/posts/conformal-image-classifier">https://www.paltmeyer.com/blog//blog/posts/conformal-image-classifier</a>.
</div></div></section></div> ]]></description>
  <category>conformal prediction</category>
  <category>uncertainty</category>
  <category>Julia</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/conformal-image-classifier/index.html</guid>
  <pubDate>Sun, 04 Dec 2022 23:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/conformal-image-classifier/www/intro.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>A year of using Quarto with Julia</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/tips-and-tricks-for-using-quarto-with-julia/index.html</link>
  <description><![CDATA[ 



<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/www/images/julia_quarto.gif" class="figure-img">
<figcaption class="figure-caption">
A year of using Quarto with Julia.
</figcaption>
</figure>
</div>
<p>Earlier this year in July, I gave a short Experience Talk at <a href="https://pretalx.com/juliacon-2022/speaker/8DGYCX/">JuliaCon</a>. In a related blog <a href="../../../blog/posts/julia-and-quarto-a-match-made-in-heaven/index.html">post</a> I explained how the introduction of Quarto made my transition from R to Julia painless: I would be able to start learning Julia without having to give up on all the benefits associated with R Markdown.</p>
<p>In November, 2022, I am presenting on this topic again at the <a href="https://www.linkedin.com/feed/update/urn:li:activity:6995656928957718528?updateEntityUrn=urn%3Ali%3Afs_feedUpdate%3A%28V2%2Curn%3Ali%3Aactivity%3A6995656928957718528%29">2nd JuliaLang Eindhoven meetup</a>. In addition to the <a href="../../../content/talks/posts/2022-julia-eindhoven/index.html">slides</a>, I thought I‚Äôd share a small companion blog post that highlights some useful tips and tricks for anyone interested in using Quarto with Julia.</p>
<section id="general-things" class="level2">
<h2 class="anchored" data-anchor-id="general-things">General things</h2>
<p>We will start in this section with a few general recommendations.</p>
<section id="setup" class="level3">
<h3 class="anchored" data-anchor-id="setup">Setup</h3>
<p>I continue to recommend using VSCode for any work with Quarto and Julia. The Quarto <a href="https://quarto.org/docs/computations/julia.html#vs-code">docs</a> explain how to get started by installing the necessary Quarto and IJulia extensions. Since most Julia users will regularly want to update their Julia version, I would additionally recommend to add <code>IJulia.jl</code> to your <code>~/.julia/config/startup.jl</code> file:<sup>1</sup></p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># Setup OhMyREPL, Revise and Term</span></span>
<span id="cb1-2"><span class="im" style="color: #00769E;">import</span> <span class="bu" style="color: null;">Pkg</span></span>
<span id="cb1-3"><span class="kw" style="color: #003B4F;">let</span></span>
<span id="cb1-4">    pkgs <span class="op" style="color: #5E5E5E;">=</span> [<span class="st" style="color: #20794D;">"Revise"</span>, <span class="st" style="color: #20794D;">"OhMyREPL"</span>, <span class="st" style="color: #20794D;">"Term"</span>, <span class="st" style="color: #20794D;">"IJulia"</span>]</span>
<span id="cb1-5">    <span class="cf" style="color: #003B4F;">for</span> pkg <span class="kw" style="color: #003B4F;">in</span> pkgs</span>
<span id="cb1-6">        <span class="cf" style="color: #003B4F;">if</span> <span class="bu" style="color: null;">Base</span>.<span class="fu" style="color: #4758AB;">find_package</span>(pkg) <span class="op" style="color: #5E5E5E;">===</span> <span class="cn" style="color: #8f5902;">nothing</span></span>
<span id="cb1-7">            <span class="bu" style="color: null;">Pkg</span>.<span class="fu" style="color: #4758AB;">add</span>(pkg)</span>
<span id="cb1-8">        <span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb1-9">    <span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb1-10"><span class="kw" style="color: #003B4F;">end</span></span></code></pre></div>
<p>Additionally, you only need to remember that ‚Ä¶</p>
<blockquote class="blockquote">
<p>‚Ä¶ if you install a new Julia binary [‚Ä¶], you must update the IJulia installation [‚Ä¶] by running <code>Pkg.build("IJulia")</code></p>
<p>‚Äî Source: <a href="https://julialang.github.io/IJulia.jl/stable/manual/installation/#Updating-Julia-and-IJulia">IJulia docs</a></p>
</blockquote>
<p>I guess this step can also be automated in <code>~/.julia/config/startup.jl</code>, but haven‚Äôt tried that yet.</p>
</section>
<section id="using-.ipynb-vs-.qmd" class="level3">
<h3 class="anchored" data-anchor-id="using-.ipynb-vs-.qmd">Using <code>.ipynb</code> vs <code>.qmd</code></h3>
<p>I also continue to recommend working with Quarto notebooks as opposed to Jupyter notebooks (files ending in <code>.qmd</code> and <code>.ipynb</code>, respectively). This is partially just based on preference (from R Markdown I‚Äôm used to working with <code>.Rmd</code> files), but there is also a good reason to consider using <code>.qmd</code>, even if you‚Äôre used to working with Jupyter: the code chunks in your Quarto notebook automatically link to the Julia REPL in VSCode. In other words, you can run code chunks in your notebook and then access any variable that you may have created in the REPL. I find this quite useful, cause it allows me to quickly test code. Perhaps there‚Äôs a good way to do this with Jupyter notebooks as well, but when I last used them I would always have to insert new code cells to test stuff.</p>
<p>Either way switching between Jupyter and Quarto notebooks is straight-forward: <code>quarto convert notebook.qmd</code> will convert any Quarto notebook into a Jupyter notebook and vice versa. One potential benefit of Jupyter notebooks is their connection to Google Colab: it is possible to store Jupyter notebooks on Github and make them available on Colab, allowing users to quickly interact with your code without the need to clone anything. If this is important to you, you can still work with <code>.qmd</code> documents and simply specify <code>keep-ipynb: true</code> in the YAML header.</p>
</section>
<section id="dynamic-content" class="level3">
<h3 class="anchored" data-anchor-id="dynamic-content">Dynamic Content</h3>
<blockquote class="blockquote">
<p>The world and the data that describes it is not static üìà. Why should scientific outputs be?</p>
</blockquote>
<p>One of the things I have always really loved about R Markdown was the ability to use inline code: the Knitr engine allows you to call and render any object <code>x</code> that you have created in preceding R chunks like this: <code>r x</code>. This is very powerful, because it enables us to bridge the gap between computations and output. In other words, it allows us to easily produce reproducible and dynamic content.</p>
<p>Until recently I had not been aware that this is also possible for Julia. Consider the following example. The code below depends on remote data that is continuously updated:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">MarketData</span></span>
<span id="cb2-2">snp <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">yahoo</span>(<span class="st" style="color: #20794D;">"^GSPC"</span>)</span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Dates</span></span>
<span id="cb2-5">last_trade_day <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">timestamp</span>(snp[<span class="kw" style="color: #003B4F;">end</span>])[<span class="fl" style="color: #AD0000;">1</span>]</span>
<span id="cb2-6">p_close <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">values</span>(snp[<span class="kw" style="color: #003B4F;">end</span>,<span class="op" style="color: #5E5E5E;">:</span>Close])[<span class="fl" style="color: #AD0000;">1</span>]</span>
<span id="cb2-7">last_trade_day_formatted <span class="op" style="color: #5E5E5E;">=</span> <span class="bu" style="color: null;">Dates</span>.<span class="fu" style="color: #4758AB;">format</span>(last_trade_day, <span class="st" style="color: #20794D;">"U d, yyyy"</span>)</span></code></pre></div>
</div>
<p>It loads the most recent publicly available data on equity prices from Yahoo finance. In an ideal world, we‚Äôd like any updates to these inputs to be reflected in our output. That way you can just re-render the Quarto notebook to get an updated report. To render Julia code inline, we use <code>Markdown.jl</code> like so:</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Markdown</span></span>
<span id="cb3-2">Markdown.<span class="fu" style="color: #4758AB;">parse</span>(<span class="st" style="color: #20794D;">"""</span></span>
<span id="cb3-3"><span class="st" style="color: #20794D;">When the S&amp;P 500 last traded, on </span><span class="sc" style="color: #5E5E5E;">$</span>(last_trade_day_formatted)<span class="st" style="color: #20794D;">, it closed at </span><span class="sc" style="color: #5E5E5E;">$</span>(p_close)<span class="st" style="color: #20794D;">. </span></span>
<span id="cb3-4"><span class="st" style="color: #20794D;">"""</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<p>When the S&amp;P 500 last traded, on November 18, 2022, it closed at 3965.340088.</p>
</div>
</div>
<p>In practice, one would of course set <code>#| echo: false</code> in this case. Whatever content you publish, this approach will keep it up-to-date. This practice of simply re-rendering the source notebook also ensures that any other output remains up-to-date (e.g. Figure&nbsp;1)</p>
<div class="cell" data-execution_count="3">
<div class="cell-output cell-output-display" data-execution_count="4">
<div id="fig-snp" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/tips-and-tricks-for-using-quarto-with-julia/index_files/figure-html/fig-snp-output-1.svg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Price history of the S&amp;P 500.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="code-execution" class="level3">
<h3 class="anchored" data-anchor-id="code-execution">Code Execution</h3>
<p>Related to the previous point, I typically define the following execution options in my <code>_quarto.yml</code> or <code>_metadata.yml</code>. The <code>freeze: auto</code> option ensures that documents are only rerendered if the source changes. In cases where code should always be re-executed you whould want to set <code>freeze: false</code>, instead. I set <code>output: false</code> because typically I have a lot of code chunks that don‚Äôt generate any output that is of immediate interest to readers.</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><span class="fu" style="color: #4758AB;">execute</span><span class="kw" style="color: #003B4F;">:</span></span>
<span id="cb4-2"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">freeze</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> auto</span></span>
<span id="cb4-3"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">eval</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span><span class="ch" style="color: #20794D;">true</span></span>
<span id="cb4-4"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">echo</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span><span class="ch" style="color: #20794D;">true</span></span>
<span id="cb4-5"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">output</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span><span class="ch" style="color: #20794D;">false</span></span></code></pre></div>
</section>
<section id="reproducibility" class="level3">
<h3 class="anchored" data-anchor-id="reproducibility">Reproducibility</h3>
<p>To ensure that your content can be repoduced easily, it may additionally be helpful to explicitly specify the Julia version you used (<code>jupyter: julia-1.8</code>) and set up a global or local Julia environments. Inserting the following at the beginning of your Quarto notebook</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Pkg; Pkg</span>.<span class="fu" style="color: #4758AB;">activate</span>(<span class="st" style="color: #20794D;">"&lt;path&gt;"</span>)</span></code></pre></div>
<p>ensures that the desired environemnt that lives in <code>&lt;path&gt;</code> is actually activated and used.</p>
</section>
</section>
<section id="package-documentation" class="level2">
<h2 class="anchored" data-anchor-id="package-documentation">Package Documentation</h2>
<p>I have also continued to use Quarto in combination with <code>Documenter.jl</code> to document my Julia packages. This essentially boils down to writing up documentation using interactive <code>.qmd</code> notebooks and then rendering those to <code>.md</code> files as inputs for <code>Documenter.jl</code>. There are a few good reasons for this approach, especially if you‚Äôre used to working with Quarto anyway:</p>
<ol type="1">
<li>Re-rendering any docs with <code>eval: true</code> provides an additional layer of quality assurance: if any of the code chunks throws an error, you know that your documentation is outdated (perhaps due to an API change). It also offers a straight-forward way to test package functions that produce non-testable (e.g.&nbsp;stochastic) output. In such cases, the use of <code>jldoctest</code> is not always straight-forward (see <a href="https://github.com/JuliaDocs/Documenter.jl/issues/452">here</a>).</li>
<li>You get some stuff for free, e.g.&nbsp;citation management. Unfortunately, as far as I‚Äôm aware there is still no support for cross-referencing.</li>
<li>You can use Quarto execution options like <code>execute-dir: project</code> and <code>resources: www/</code> to globally specify the working directory and a directory for external resources like images.</li>
</ol>
<p>There are also a few peculiarities to be aware of. To avoid any issues with <code>Documenter.jl</code>, I‚Äôve found it useful to ensure that the rendered <code>.md</code> files do not contain any raw HTML and to preserve text wrapping:</p>
<div class="sourceCode" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><span class="fu" style="color: #4758AB;">format</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span></span>
<span id="cb6-2"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">commonmark</span><span class="kw" style="color: #003B4F;">:</span></span>
<span id="cb6-3"><span class="at" style="color: #657422;">    </span><span class="fu" style="color: #4758AB;">variant</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> -raw_html</span></span>
<span id="cb6-4"><span class="at" style="color: #657422;">    </span><span class="fu" style="color: #4758AB;">wrap</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> preserve</span></span></code></pre></div>
<p>When working with <code>.qmd</code> files you also need to use a slightly different syntax for <a href="https://documenter.juliadocs.org/stable/showcase/#Admonitions">admonitions</a>. The following syntax inside the <code>.qmd</code></p>
<div class="sourceCode" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb7-1">| !!! note \"An optional title\"</span>
<span id="cb7-2">|     Here is something that you should pay attention to.   </span></code></pre></div>
<p>will generate the desired output inside the rendered <code>.md</code>:<sup>2</sup></p>
<div class="sourceCode" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode md code-with-copy"><code class="sourceCode markdown"><span id="cb8-1">!!! note "An optional title"</span>
<span id="cb8-2">    Here is something that you should pay attention to.   </span></code></pre></div>
<p>Any of my package repos ‚Äî <a href="https://github.com/pat-alt/CounterfactualExplanations.jl"><code>CounterfactualExplanations.jl</code></a>, <a href="https://github.com/pat-alt/LaplaceRedux.jl"><code>LaplaceRedux.jl</code></a>, <a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a> ‚Äî should provide additional colour on this topic.</p>
</section>
<section id="quarto-for-academic-journal-articles" class="level2">
<h2 class="anchored" data-anchor-id="quarto-for-academic-journal-articles">Quarto for Academic Journal Articles</h2>
<p>Quarto supports <img src="https://latex.codecogs.com/png.latex?%5CLaTeX"> templates/classes, which has helped me with paper submissions in the past (e.g.&nbsp;my pending JuliaCon Proceedings submissions). I‚Äôve found that <a href="https://pkgs.rstudio.com/rticles/articles/rticles.html"><code>rticles</code></a> still has an edge here, but the <a href="https://quarto.org/docs/extensions/listing-journals.html">list</a> of out-of-the-box templates for journal articles is growing. Should I find some time in the future, I will try to add a template for JuliaCon Proceedings. The beauty of this is that it should enable publishers to not only use traditional forms of publication (PDF), but also include more dynamic formats with ease (think <a href="https://distill.pub/">distill</a>, but more than that.)</p>
</section>
<section id="wrapping-up" class="level2">
<h2 class="anchored" data-anchor-id="wrapping-up">Wrapping up</h2>
<p>This short post has provided a bit of an update on using Quarto with Julia. From my own experience so far, things have been getting easier and better (thanks to the amazing work of Quarto dev team). I‚Äôm exicted to see things improve even further and still think that Quarto is a revolutionary new tool for scientific publishing. Let‚Äôs hope publishers eventually recognise this value üëÄ.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Unrelated to Quarto, but this <a href="https://discourse.julialang.org/t/what-is-in-your-startup-jl/18228/21">thread</a> on discourse is full of other useful ideas for your <code>startup.jl</code>.‚Ü©Ô∏é</p></li>
<li id="fn2"><p>See related <a href="https://github.com/quarto-dev/quarto-cli/discussions/2947">discussion</a>.‚Ü©Ô∏é</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2022,
  author = {Patrick Altmeyer},
  title = {A Year of Using {Quarto} with {Julia}},
  date = {22-11-21},
  url = {https://www.paltmeyer.com/blog//blog/posts/tips-and-tricks-for-using-quarto-with-julia},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2022" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 22AD. <span>‚ÄúA Year of Using Quarto with
Julia.‚Äù</span> November 21, 22AD. <a href="https://www.paltmeyer.com/blog//blog/posts/tips-and-tricks-for-using-quarto-with-julia">https://www.paltmeyer.com/blog//blog/posts/tips-and-tricks-for-using-quarto-with-julia</a>.
</div></div></section></div> ]]></description>
  <category>Quarto</category>
  <category>Julia</category>
  <category>open-source</category>
  <category>reproducibility</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/tips-and-tricks-for-using-quarto-with-julia/index.html</guid>
  <pubDate>Sun, 20 Nov 2022 23:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/www/images/julia_quarto.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Conformal Prediction in Julia üü£üî¥üü¢</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/conformal-prediction/index.html</link>
  <description><![CDATA[ 



<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/conformal-prediction/www/intro.gif" class="figure-img">
<figcaption class="figure-caption">
Prediction sets for two different samples <br> and changing coverage rates. <br> As coverage grows, so does the size of the <br> prediction sets.
</figcaption>
</figure>
</div>
<p>A first crucial step towards building trustworthy AI systems is to be transparent about predictive uncertainty. Model parameters are random variables and their values are estimated from noisy data. That inherent stochasticity feeds through to model predictions and should to be addressed, at the very least in order to avoid overconfidence in models.</p>
<p>Beyond that obvious concern, it turns out that quantifying model uncertainty actually opens up a myriad of possibilities to improve up- and down-stream modeling tasks like active learning and robustness. In Bayesian Active Learning, for example, uncertainty estimates are used to guide the search for new input samples, which can make ground-truthing tasks more efficient <span class="citation" data-cites="houlsby2011bayesian">(Houlsby et al. 2011)</span>. With respect to model performance in downstream tasks, uncertainty quantification can be used to improve model calibration and robustness <span class="citation" data-cites="lakshminarayanan2016simple">(Lakshminarayanan, Pritzel, and Blundell 2016)</span>.</p>
<p>In previous posts we have looked at how uncertainty can be quantified in the Bayesian context (see <a href="https://www.paltmeyer.com/blog/posts/bayesian-logit/">here</a> and <a href="https://www.paltmeyer.com/blog/posts/effortsless-bayesian-dl/">here</a>). Since in Bayesian modeling we are generally concerned with estimating posterior distributions, we get uncertainty estimates almost as a byproduct. This is great for all intends and purposes, but it hinges on assumptions about prior distributions. Personally, I have no quarrel with the idea of making prior distributional assumptions. On the contrary, I think the Bayesian framework formalizes the idea of integrating prior information in models and therefore provides a powerful toolkit for conducting science. Still, in some cases this requirement may be seen as too restrictive or we may simply lack prior information.</p>
<p>Enter: Conformal Prediction (CP) ‚Äî a scalable frequentist approach to uncertainty quantification and coverage control. In this post we will go through the basic concepts underlying CP. A number of hands-on usage examples in Julia should hopefully help to convey some intuition and ideally attract people interested in contributing to a new and exciting open-source development.</p>
<div class="callout callout-style-default callout-tip callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
üèÉ‚Äç‚ôÄÔ∏è TL;DR
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Conformal Prediction is an interesting frequentist approach to uncertainty quantification that can even be combined with Bayes (Section&nbsp;1).</li>
<li>It is scalable and model-agnostic and therefore well applicable to machine learning (Section&nbsp;1).</li>
<li><a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a> implements CP in pure Julia and can be used with any supervised model available from <a href="https://alan-turing-institute.github.io/MLJ.jl/v0.18/"><code>MLJ.jl</code></a> (Section&nbsp;2).</li>
<li>Implementing CP directly on top of an existing, powerful machine learning toolkit demonstrates the potential usefulness of this framework to the ML community (Section&nbsp;2).</li>
<li>Standard conformal classifiers produce set-valued predictions: for ambiguous samples these sets are typically large (for high coverage) or empty (for low coverage) (Section&nbsp;2.1).</li>
</ol>
</div>
</div>
<section id="sec-background" class="level2">
<h2 class="anchored" data-anchor-id="sec-background">üìñ Background</h2>
<p>Conformal Prediction promises to be an easy-to-understand, distribution-free and model-agnostic way to generate statistically rigorous uncertainty estimates. That‚Äôs quite a mouthful, so let‚Äôs break it down: firstly, as I will hopefully manage to illustrate in this post, the underlying concepts truly are fairly straight-forward to understand; secondly, CP indeed relies on only minimal distributional assumptions; thirdly, common procedures to generate conformal predictions really do apply almost universally to all supervised models, therefore making the framework very intriguing to the ML community; and, finally, CP does in fact come with a frequentist coverage guarantee that ensures that conformal prediction sets contain the true value with a user-chosen probability. For a formal proof of this <em>marginal coverage</em> property and a detailed introduction to the topic, I recommend <span class="citation" data-cites="angelopoulos2021gentle">Angelopoulos and Bates (2021)</span>.</p>
<div class="callout callout-style-default callout-note callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In what follows we will loosely treat the tutorial by <span class="citation" data-cites="angelopoulos2021gentle">Angelopoulos and Bates (2021)</span> and the general framework it sets as a reference. You are not expected to have read the paper, but I also won‚Äôt reiterate any details here.</p>
</div>
</div>
<p>CP can be used to generate prediction intervals for regression models and prediction sets for classification models (more on this later). There is also some recent work on conformal predictive distributions and probabilistic predictions. Interestingly, it can even be used to complement Bayesian methods. <span class="citation" data-cites="angelopoulos2021gentle">Angelopoulos and Bates (2021)</span>, for example, point out that prior information should be incorporated into prediction sets and demonstrate how Bayesian predictive distributions can be conformalized in order to comply with the frequentist notion of coverage. Relatedly, <span class="citation" data-cites="hoff2021bayesoptimal">Hoff (2021)</span> proposes a Bayes-optimal prediction procedure. And finally, <span class="citation" data-cites="stanton2022bayesian">Stanton, Maddox, and Wilson (2022)</span> very recently proposed a way to introduce conformal prediction in Bayesian Optimization. I find this type of work that combines different schools of thought very promising, but I‚Äôm drifting off a little ‚Ä¶ So, without further ado, let us look at some code.</p>
</section>
<section id="sec-julia" class="level2">
<h2 class="anchored" data-anchor-id="sec-julia">üì¶ Conformal Prediction in Julia</h2>
<p>In this section of this first short post on CP we will look at how conformal prediction can be implemented in Julia. In particular, we will look at an approach that is compatible with any of the many supervised machine learning models available in <a href="https://alan-turing-institute.github.io/MLJ.jl/dev/">MLJ</a>: a beautiful, comprehensive machine learning framework funded by the <a href="https://www.turing.ac.uk/">Alan Turing Institute</a> and the <a href="https://www.mbie.govt.nz/science-and-technology/science-and-innovation/funding-information-and-opportunities/investment-funds/strategic-science-investment-fund/ssif-funded-programmes/university-of-auckland/">New Zealand Strategic Science Investment Fund</a> <span class="citation" data-cites="blaom2020mlj">Blaom et al. (2020)</span>. We will go through some basic usage examples employing a new Julia package that I have been working on: <a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a>.</p>
<div class="callout callout-style-default callout-note callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
<a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a>
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>ConformalPrediction.jl</code> is a package for uncertainty quantification through conformal prediction for machine learning models trained in <a href="https://alan-turing-institute.github.io/MLJ.jl/dev/">MLJ</a>. At the time of writing it is still in its early stages of development, but already implements a range of different approaches to CP. Contributions are very much welcome:</p>
<ul>
<li><a href="https://www.paltmeyer.com/ConformalPrediction.jl/stable/">Documentation</a></li>
<li><a href="https://www.paltmeyer.com/ConformalPrediction.jl/stable/#Contribute">Contributor‚Äôs Guide</a></li>
</ul>
</div>
</div>
<section id="sec-scp" class="level3">
<h3 class="anchored" data-anchor-id="sec-scp">Split Conformal Classification</h3>
<p>We consider a simple binary classification problem. Let <img src="https://latex.codecogs.com/png.latex?(X_i,%20Y_i),%20%5C%20i=1,...,n"> denote our feature-label pairs and let <img src="https://latex.codecogs.com/png.latex?%5Cmu:%20%5Cmathcal%7BX%7D%20%5Cmapsto%20%5Cmathcal%7BY%7D"> denote the mapping from features to labels. For illustration purposes we will use the moons dataset üåô. Using <a href="https://alan-turing-institute.github.io/MLJ.jl/v0.18/"><code>MLJ.jl</code></a> we first generate the data and split into into a training and test set:</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">MLJ</span></span>
<span id="cb1-2"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Random</span></span>
<span id="cb1-3"><span class="bu" style="color: null;">Random</span>.<span class="fu" style="color: #4758AB;">seed!</span>(<span class="fl" style="color: #AD0000;">123</span>)</span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;"># Data:</span></span>
<span id="cb1-6">X, y <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">make_moons</span>(<span class="fl" style="color: #AD0000;">500</span>; noise<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0.15</span>)</span>
<span id="cb1-7">train, test <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">partition</span>(<span class="fu" style="color: #4758AB;">eachindex</span>(y), <span class="fl" style="color: #AD0000;">0.8</span>, shuffle<span class="op" style="color: #5E5E5E;">=</span><span class="cn" style="color: #8f5902;">true</span>)</span></code></pre></div>
</div>
<p>Here we will use a specific case of CP called <em>split conformal prediction</em> which can then be summarized as follows:<sup>1</sup></p>
<ol type="1">
<li>Partition the training into a proper training set and a separate calibration set: <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D_n=%5Cmathcal%7BD%7D%5E%7B%5Ctext%7Btrain%7D%7D%20%5Ccup%20%5Cmathcal%7BD%7D%5E%7B%5Ctext%7Bcali%7D%7D">.</li>
<li>Train the machine learning model on the proper training set: <img src="https://latex.codecogs.com/png.latex?%5Chat%5Cmu_%7Bi%20%5Cin%20%5Cmathcal%7BD%7D%5E%7B%5Ctext%7Btrain%7D%7D%7D(X_i,Y_i)">.</li>
<li>Compute nonconformity scores, <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BS%7D">, using the calibration data <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D%5E%7B%5Ctext%7Bcali%7D%7D"> and the fitted model <img src="https://latex.codecogs.com/png.latex?%5Chat%5Cmu_%7Bi%20%5Cin%20%5Cmathcal%7BD%7D%5E%7B%5Ctext%7Btrain%7D%7D%7D">.</li>
<li>For a user-specified desired coverage ratio <img src="https://latex.codecogs.com/png.latex?(1-%5Calpha)"> compute the corresponding quantile, <img src="https://latex.codecogs.com/png.latex?%5Chat%7Bq%7D">, of the empirical distribution of nonconformity scores, <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BS%7D">.</li>
<li>For the given quantile and test sample <img src="https://latex.codecogs.com/png.latex?X_%7B%5Ctext%7Btest%7D%7D">, form the corresponding conformal prediction set:</li>
</ol>
<p><span id="eq-set"><img src="https://latex.codecogs.com/png.latex?%0AC(X_%7B%5Ctext%7Btest%7D%7D)=%5C%7By:s(X_%7B%5Ctext%7Btest%7D%7D,y)%20%5Cle%20%5Chat%7Bq%7D%5C%7D%0A%5Ctag%7B1%7D"></span></p>
<p>This is the default procedure used for classification and regression in <a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a>.</p>
<p>You may want to take a look at the source code for the classification case <a href="https://github.com/pat-alt/ConformalPrediction.jl/blob/67712e870dc3a438bf0846d376fa48480612f042/src/ConformalModels/inductive_classification.jl#L1">here</a>. As a <a href="https://github.com/pat-alt/ConformalPrediction.jl/blob/67712e870dc3a438bf0846d376fa48480612f042/src/ConformalModels/inductive_classification.jl#L3">first</a> important step, we begin by defining a concrete type <code>SimpleInductiveClassifier</code> that wraps a supervised model from <a href="https://alan-turing-institute.github.io/MLJ.jl/v0.18/"><code>MLJ.jl</code></a> and reserves additional fields for a few hyperparameters. As a <a href="https://github.com/pat-alt/ConformalPrediction.jl/blob/67712e870dc3a438bf0846d376fa48480612f042/src/ConformalModels/inductive_classification.jl#L26">second</a> step, we define the training procedure, which includes the data-splitting and calibration step. Finally, as a <a href="https://github.com/pat-alt/ConformalPrediction.jl/blob/67712e870dc3a438bf0846d376fa48480612f042/src/ConformalModels/inductive_classification.jl#L56">third</a> step we implement the procedure in Equation&nbsp;1 to compute the conformal prediction set.</p>
<div class="callout callout-style-default callout-warning callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Development Status
</div>
</div>
<div class="callout-body-container callout-body">
<p>The permalinks above take you to the version of the package that was up-to-date at the time of writing. Since the package is in its early stages of development, the code base and API can be expected to change.</p>
</div>
</div>
<p>Now let‚Äôs take this to our üåô data. To illustrate the package functionality we will demonstrate the envisioned workflow. We first define our atomic machine learning model following standard <a href="https://alan-turing-institute.github.io/MLJ.jl/v0.18/"><code>MLJ.jl</code></a> conventions. Using <a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a> we then wrap our atomic model in a conformal model using the standard API call <code>conformal_model(model::Supervised; kwargs...)</code>. To train and predict from our conformal model we can then rely on the conventional <a href="https://alan-turing-institute.github.io/MLJ.jl/v0.18/"><code>MLJ.jl</code></a> procedure again. In particular, we wrap our conformal model in data (turning it into a machine) and then fit it on the training set. Finally, we use our machine to predict the label for a new test sample <code>Xtest</code>:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><span class="co" style="color: #5E5E5E;"># Model:</span></span>
<span id="cb2-2">KNNClassifier <span class="op" style="color: #5E5E5E;">=</span> <span class="pp" style="color: #AD0000;">@load</span> KNNClassifier pkg<span class="op" style="color: #5E5E5E;">=</span>NearestNeighborModels</span>
<span id="cb2-3">model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">KNNClassifier</span>(;K<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">50</span>) </span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;"># Training:</span></span>
<span id="cb2-6"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">ConformalPrediction</span></span>
<span id="cb2-7">conf_model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">conformal_model</span>(model; coverage<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">.9</span>)</span>
<span id="cb2-8">mach <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(conf_model, X, y)</span>
<span id="cb2-9"><span class="fu" style="color: #4758AB;">fit!</span>(mach, rows<span class="op" style="color: #5E5E5E;">=</span>train)</span>
<span id="cb2-10"></span>
<span id="cb2-11"><span class="co" style="color: #5E5E5E;"># Conformal Prediction:</span></span>
<span id="cb2-12">Xtest <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">selectrows</span>(X, <span class="fu" style="color: #4758AB;">first</span>(test))</span>
<span id="cb2-13">ytest <span class="op" style="color: #5E5E5E;">=</span> y[<span class="fu" style="color: #4758AB;">first</span>(test)]</span>
<span id="cb2-14"><span class="fu" style="color: #4758AB;">predict</span>(mach, Xtest)[<span class="fl" style="color: #AD0000;">1</span>]</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>import NearestNeighborModels ‚úî</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div class="ansi-escaped-output">
<pre>           <span class="ansi-bright-white-fg ansi-bold">UnivariateFinite{Multiclass{2}}</span>      
     <span class="ansi-bright-black-fg">‚îå                                        ‚îê</span> 
   0 <span class="ansi-bright-black-fg">‚î§</span><span class="ansi-green-fg">‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†</span> 0.94 <span class="ansi-bright-black-fg"> </span> 
     <span class="ansi-bright-black-fg">‚îî                                        ‚îò</span> </pre>
</div>
</div>
</div>
<p>The final predictions are set-valued. While the softmax output remains unchanged for the <code>SimpleInductiveClassifier</code>, the size of the prediction set depends on the chosen coverage rate, <img src="https://latex.codecogs.com/png.latex?(1-%5Calpha)">.</p>
<div class="cell" data-execution_count="4">
<div class="cell-output cell-output-display" data-execution_count="5">
<p>When specifying a coverage rate very close to one, the prediction set will typically include many (in some cases all) of the possible labels. Below, for example, both classes are included in the prediction set when setting the coverage rate equal to <img src="https://latex.codecogs.com/png.latex?(1-%5Calpha)">=1.0. This is intuitive, since high coverage quite literally requires that the true label is covered by the prediction set with high probability.</p>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1">conf_model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">conformal_model</span>(model; coverage<span class="op" style="color: #5E5E5E;">=</span>coverage)</span>
<span id="cb5-2">mach <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(conf_model, X, y)</span>
<span id="cb5-3"><span class="fu" style="color: #4758AB;">fit!</span>(mach, rows<span class="op" style="color: #5E5E5E;">=</span>train)</span>
<span id="cb5-4"></span>
<span id="cb5-5"><span class="co" style="color: #5E5E5E;"># Conformal Prediction:</span></span>
<span id="cb5-6">Xtest <span class="op" style="color: #5E5E5E;">=</span> (x1<span class="op" style="color: #5E5E5E;">=</span>[<span class="fl" style="color: #AD0000;">1</span>],x2<span class="op" style="color: #5E5E5E;">=</span>[<span class="fl" style="color: #AD0000;">0</span>])</span>
<span id="cb5-7"><span class="fu" style="color: #4758AB;">predict</span>(mach, Xtest)[<span class="fl" style="color: #AD0000;">1</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div class="ansi-escaped-output">
<pre>           <span class="ansi-bright-white-fg ansi-bold">UnivariateFinite{Multiclass{2}}</span>      
     <span class="ansi-bright-black-fg">‚îå                                        ‚îê</span> 
   0 <span class="ansi-bright-black-fg">‚î§</span><span class="ansi-green-fg">‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†</span> 0.5 <span class="ansi-bright-black-fg"> </span> 
   1 <span class="ansi-bright-black-fg">‚î§</span><span class="ansi-green-fg">‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†‚ñ†</span> 0.5 <span class="ansi-bright-black-fg"> </span> 
     <span class="ansi-bright-black-fg">‚îî                                        ‚îò</span> </pre>
</div>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="cell-output cell-output-display" data-execution_count="7">
<p>Conversely, for low coverage rates, prediction sets can also be empty. For a choice of <img src="https://latex.codecogs.com/png.latex?(1-%5Calpha)">=0.1, for example, the prediction set for our test sample is empty. This is a bit difficult to think about intuitively and I have not yet come across a satisfactory, intuitive interpretation.<sup>2</sup> When the prediction set is empty, the <code>predict</code> call currently returns <code>missing</code>:</p>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1">conf_model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">conformal_model</span>(model; coverage<span class="op" style="color: #5E5E5E;">=</span>coverage)</span>
<span id="cb6-2">mach <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(conf_model, X, y)</span>
<span id="cb6-3"><span class="fu" style="color: #4758AB;">fit!</span>(mach, rows<span class="op" style="color: #5E5E5E;">=</span>train)</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;"># Conformal Prediction:</span></span>
<span id="cb6-6"><span class="fu" style="color: #4758AB;">predict</span>(mach, Xtest)[<span class="fl" style="color: #AD0000;">1</span>]</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>missing</code></pre>
</div>
</div>
<p>Figure&nbsp;1 should provide some more intuition as to what exactly is happening here. It illustrates the effect of the chosen coverage rate on the predicted softmax output and the set size in the two-dimensional feature space. Contours are overlayed with the moon data points (including test data). The two samples highlighted in red, <img src="https://latex.codecogs.com/png.latex?X_1"> and <img src="https://latex.codecogs.com/png.latex?X_2">, have been manually added for illustration purposes. Let‚Äôs look at these one by one.</p>
<p>Firstly, note that <img src="https://latex.codecogs.com/png.latex?X_1"> (red cross) falls into a region of the domain that is characterized by high predictive uncertainty. It sits right at the bottom-right corner of our class-zero moon üåú (orange), a region that is almost entirely enveloped by our class-one moon üåõ (green). For low coverage rates the prediction set for <img src="https://latex.codecogs.com/png.latex?X_1"> is empty: on the left-hand side this is indicated by the missing contour for the softmax probability; on the right-hand side we can observe that the corresponding set size is indeed zero. For high coverage rates the prediction set includes both <img src="https://latex.codecogs.com/png.latex?y=0"> and <img src="https://latex.codecogs.com/png.latex?y=1">, indicative of the fact that the conformal classifier is uncertain about the true label.</p>
<p>With respect to <img src="https://latex.codecogs.com/png.latex?X_2">, we observe that while also sitting on the fringe of our class-zero moon, this sample populates a region that is not fully enveloped by data points from the opposite class. In this region, the underlying atomic classifier can be expected to be more certain about its predictions, but still not highly confident. How is this reflected by our corresponding conformal prediction sets?</p>
<div class="cell" data-execution_count="9">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1">Xtest_2 <span class="op" style="color: #5E5E5E;">=</span> (x1<span class="op" style="color: #5E5E5E;">=</span>[<span class="op" style="color: #5E5E5E;">-</span><span class="fl" style="color: #AD0000;">0.5</span>],x2<span class="op" style="color: #5E5E5E;">=</span>[<span class="fl" style="color: #AD0000;">0.25</span>])</span>
<span id="cb8-2">cov_ <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">.9</span></span>
<span id="cb8-3">conf_model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">conformal_model</span>(model; coverage<span class="op" style="color: #5E5E5E;">=</span>cov_)</span>
<span id="cb8-4">mach <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(conf_model, X, y)</span>
<span id="cb8-5"><span class="fu" style="color: #4758AB;">fit!</span>(mach, rows<span class="op" style="color: #5E5E5E;">=</span>train)</span>
<span id="cb8-6">pÃÇ_2 <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">pdf</span>(<span class="fu" style="color: #4758AB;">predict</span>(mach, Xtest_2)[<span class="fl" style="color: #AD0000;">1</span>], <span class="fl" style="color: #AD0000;">0</span>)</span></code></pre></div>
</details>
</div>
<div class="cell" data-execution_count="10">
<div class="cell-output cell-output-display" data-execution_count="11">
<p>Well, for low coverage rates (roughly <img src="https://latex.codecogs.com/png.latex?%3C0.9">) the conformal prediction set does not include <img src="https://latex.codecogs.com/png.latex?y=0">: the set size is zero (right panel). Only for higher coverage rates do we have <img src="https://latex.codecogs.com/png.latex?C(X_2)=%5C%7B0%5C%7D">: the coverage rate is high enough to include <img src="https://latex.codecogs.com/png.latex?y=0">, but the corresponding softmax probability is still fairly low. For example, for <img src="https://latex.codecogs.com/png.latex?(1-%5Calpha)=0.9"> we have <img src="https://latex.codecogs.com/png.latex?%5Chat%7Bp%7D(y=0%7CX_2)=0.72."></p>
</div>
</div>
<p>These two examples illustrate an interesting point: for regions characterised by high predictive uncertainty, conformal prediction sets are typically empty (for low coverage) or large (for high coverage). While set-valued predictions may be something to get used to, this notion is overall intuitive.</p>
<div class="cell" data-execution_count="11">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><span class="co" style="color: #5E5E5E;"># Setup</span></span>
<span id="cb9-2">coverages <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">range</span>(<span class="fl" style="color: #AD0000;">0.75</span>,<span class="fl" style="color: #AD0000;">1.0</span>,length<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">5</span>)</span>
<span id="cb9-3">n <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">100</span></span>
<span id="cb9-4">x1_range <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">range</span>(<span class="fu" style="color: #4758AB;">extrema</span>(X.x1)<span class="op" style="color: #5E5E5E;">...</span>,length<span class="op" style="color: #5E5E5E;">=</span>n)</span>
<span id="cb9-5">x2_range <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">range</span>(<span class="fu" style="color: #4758AB;">extrema</span>(X.x2)<span class="op" style="color: #5E5E5E;">...</span>,length<span class="op" style="color: #5E5E5E;">=</span>n)</span>
<span id="cb9-6"></span>
<span id="cb9-7">anim <span class="op" style="color: #5E5E5E;">=</span> <span class="pp" style="color: #AD0000;">@animate</span> <span class="cf" style="color: #003B4F;">for</span> coverage <span class="kw" style="color: #003B4F;">in</span> coverages</span>
<span id="cb9-8">    conf_model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">conformal_model</span>(model; coverage<span class="op" style="color: #5E5E5E;">=</span>coverage)</span>
<span id="cb9-9">    mach <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">machine</span>(conf_model, X, y)</span>
<span id="cb9-10">    <span class="fu" style="color: #4758AB;">fit!</span>(mach, rows<span class="op" style="color: #5E5E5E;">=</span>train)</span>
<span id="cb9-11">    p1 <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">contourf_cp</span>(mach, x1_range, x2_range; <span class="kw" style="color: #003B4F;">type</span><span class="op" style="color: #5E5E5E;">=:</span>proba, title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"Softmax"</span>, axis<span class="op" style="color: #5E5E5E;">=</span><span class="cn" style="color: #8f5902;">nothing</span>)</span>
<span id="cb9-12">    <span class="fu" style="color: #4758AB;">scatter!</span>(p1, X.x1, X.x2, group<span class="op" style="color: #5E5E5E;">=</span>y, ms<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">2</span>, msw<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0</span>, alpha<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0.75</span>)</span>
<span id="cb9-13">    <span class="fu" style="color: #4758AB;">scatter!</span>(p1, Xtest.x1, Xtest.x2, ms<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">6</span>, c<span class="op" style="color: #5E5E5E;">=:</span>red, label<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"X‚ÇÅ"</span>, shape<span class="op" style="color: #5E5E5E;">=:</span>cross, msw<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">6</span>)</span>
<span id="cb9-14">    <span class="fu" style="color: #4758AB;">scatter!</span>(p1, Xtest_2.x1, Xtest_2.x2, ms<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">6</span>, c<span class="op" style="color: #5E5E5E;">=:</span>red, label<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"X‚ÇÇ"</span>, shape<span class="op" style="color: #5E5E5E;">=:</span>diamond, msw<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">6</span>)</span>
<span id="cb9-15">    p2 <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">contourf_cp</span>(mach, x1_range, x2_range; <span class="kw" style="color: #003B4F;">type</span><span class="op" style="color: #5E5E5E;">=:</span>set_size, title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"Set size"</span>, axis<span class="op" style="color: #5E5E5E;">=</span><span class="cn" style="color: #8f5902;">nothing</span>)</span>
<span id="cb9-16">    <span class="fu" style="color: #4758AB;">scatter!</span>(p2, X.x1, X.x2, group<span class="op" style="color: #5E5E5E;">=</span>y, ms<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">2</span>, msw<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0</span>, alpha<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0.75</span>)</span>
<span id="cb9-17">    <span class="fu" style="color: #4758AB;">scatter!</span>(p2, Xtest.x1, Xtest.x2, ms<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">6</span>, c<span class="op" style="color: #5E5E5E;">=:</span>red, label<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"X‚ÇÅ"</span>, shape<span class="op" style="color: #5E5E5E;">=:</span>cross, msw<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">6</span>)</span>
<span id="cb9-18">    <span class="fu" style="color: #4758AB;">scatter!</span>(p2, Xtest_2.x1, Xtest_2.x2, ms<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">6</span>, c<span class="op" style="color: #5E5E5E;">=:</span>red, label<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"X‚ÇÇ"</span>, shape<span class="op" style="color: #5E5E5E;">=:</span>diamond, msw<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">6</span>)</span>
<span id="cb9-19">    <span class="fu" style="color: #4758AB;">plot</span>(p1, p2, plot_title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"(1-Œ±)=</span><span class="sc" style="color: #5E5E5E;">$</span>(<span class="fu" style="color: #4758AB;">round</span>(coverage,digits<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">2</span>))<span class="st" style="color: #20794D;">"</span>, size<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">800</span>,<span class="fl" style="color: #AD0000;">300</span>))</span>
<span id="cb9-20"><span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb9-21"></span>
<span id="cb9-22"><span class="fu" style="color: #4758AB;">gif</span>(anim, fps<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0.5</span>)</span></code></pre></div>
</details>
<div id="fig-anim" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/conformal-prediction/data:image/gif;base64,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" class="figure-img">
<p></p><figcaption class="figure-caption">Figure&nbsp;1: The effect of the coverage rate on the conformal prediction set. Softmax probabilities are shown on the left. The size of the prediction set is shown on the right.</figcaption><p></p>
</figure>
</div>
</div>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">üèÅ Conclusion</h2>
<p>This has really been a whistle-stop tour of Conformal Prediction: an active area of research that probably deserves much more attention. Hopefully, though, this post has helped to provide some color and, if anything, made you more curious about the topic. Let‚Äôs recap the TL;DR from above:</p>
<ol type="1">
<li>Conformal Prediction is an interesting frequentist approach to uncertainty quantification that can even be combined with Bayes (Section&nbsp;1).</li>
<li>It is scalable and model-agnostic and therefore well applicable to machine learning (Section&nbsp;1).</li>
<li><a href="https://github.com/pat-alt/ConformalPrediction.jl"><code>ConformalPrediction.jl</code></a> implements CP in pure Julia and can be used with any supervised model available from <a href="https://alan-turing-institute.github.io/MLJ.jl/v0.18/"><code>MLJ.jl</code></a> (Section&nbsp;2).</li>
<li>Implementing CP directly on top of an existing, powerful machine learning toolkit demonstrates the potential usefulness of this framework to the ML community (Section&nbsp;2).</li>
<li>Standard conformal classifiers produce set-valued predictions: for ambiguous samples these sets are typically large (for high coverage) or empty (for low coverage) (Section&nbsp;2.1).</li>
</ol>
<p>Below I will leave you with some further resources.</p>
</section>
<section id="further-resources" class="level2">
<h2 class="anchored" data-anchor-id="further-resources">üìö Further Resources</h2>
<p>Chances are that you have already come across the Awesome Conformal Prediction <a href="https://github.com/valeman/awesome-conformal-prediction">repo</a>: <span class="citation" data-cites="manokhin2022awesome">Manokhin (n.d.)</span> provides a comprehensive, up-to-date overview of resources related to the conformal prediction. Among the listed articles you will also find <span class="citation" data-cites="angelopoulos2021gentle">Angelopoulos and Bates (2021)</span>, which inspired much of this post. The repo also points to open-source implementations in other popular programming languages including Python and R.</p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-angelopoulos2021gentle" class="csl-entry">
Angelopoulos, Anastasios N., and Stephen Bates. 2021. <span>‚ÄúA Gentle Introduction to Conformal Prediction and Distribution-Free Uncertainty Quantification.‚Äù</span> <a href="https://arxiv.org/abs/2107.07511">https://arxiv.org/abs/2107.07511</a>.
</div>
<div id="ref-blaom2020mlj" class="csl-entry">
Blaom, Anthony D., Franz Kiraly, Thibaut Lienart, Yiannis Simillides, Diego Arenas, and Sebastian J. Vollmer. 2020. <span>‚Äú<span>MLJ</span>: <span>A Julia</span> Package for Composable Machine Learning.‚Äù</span> <em>Journal of Open Source Software</em> 5 (55): 2704. <a href="https://doi.org/10.21105/joss.02704">https://doi.org/10.21105/joss.02704</a>.
</div>
<div id="ref-hoff2021bayesoptimal" class="csl-entry">
Hoff, Peter. 2021. <span>‚ÄúBayes-Optimal Prediction with Frequentist Coverage Control.‚Äù</span> <a href="https://arxiv.org/abs/2105.14045">https://arxiv.org/abs/2105.14045</a>.
</div>
<div id="ref-houlsby2011bayesian" class="csl-entry">
Houlsby, Neil, Ferenc Husz√°r, Zoubin Ghahramani, and M√°t√© Lengyel. 2011. <span>‚ÄúBayesian Active Learning for Classification and Preference Learning.‚Äù</span> <a href="https://arxiv.org/abs/1112.5745">https://arxiv.org/abs/1112.5745</a>.
</div>
<div id="ref-lakshminarayanan2016simple" class="csl-entry">
Lakshminarayanan, Balaji, Alexander Pritzel, and Charles Blundell. 2016. <span>‚ÄúSimple and Scalable Predictive Uncertainty Estimation Using Deep Ensembles.‚Äù</span> <a href="https://arxiv.org/abs/1612.01474">https://arxiv.org/abs/1612.01474</a>.
</div>
<div id="ref-manokhin2022awesome" class="csl-entry">
Manokhin, Valery. n.d. <span>‚ÄúAwesome Conformal Prediction.‚Äù</span>
</div>
<div id="ref-stanton2022bayesian" class="csl-entry">
Stanton, Samuel, Wesley Maddox, and Andrew Gordon Wilson. 2022. <span>‚ÄúBayesian <span>Optimization</span> with <span>Conformal Coverage Guarantees</span>.‚Äù</span> <a href="https://arxiv.org/abs/2210.12496">https://arxiv.org/abs/2210.12496</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>In other places split conformal prediction is sometimes referred to as <em>inductive</em> conformal prediction.‚Ü©Ô∏é</p></li>
<li id="fn2"><p>Any thoughts/comments welcome!‚Ü©Ô∏é</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2022,
  author = {Patrick Altmeyer},
  title = {Conformal {Prediction} in {Julia} üü£üî¥üü¢},
  date = {22-10-25},
  url = {https://www.paltmeyer.com/blog//blog/posts/conformal-prediction},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2022" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 22AD. <span>‚ÄúConformal Prediction in Julia
üü£üî¥üü¢.‚Äù</span> October 25, 22AD. <a href="https://www.paltmeyer.com/blog//blog/posts/conformal-prediction">https://www.paltmeyer.com/blog//blog/posts/conformal-prediction</a>.
</div></div></section></div> ]]></description>
  <category>conformal prediction</category>
  <category>uncertainty</category>
  <category>Julia</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/conformal-prediction/index.html</guid>
  <pubDate>Mon, 24 Oct 2022 22:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/conformal-prediction/www/intro.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>A new tool for explainable AI</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/a-new-tool-for-explainable-ai/index.html</link>
  <description><![CDATA[ 



<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/a-new-tool-for-explainable-ai/www/intro.gif" class="figure-img">
<figcaption class="figure-caption">
Turning a 9 (nine) into a 4 (four).
</figcaption>
</figure>
</div>
<!-- Intro -->
<p>Counterfactual explanations, which I introduced in one of my previous posts<sup>1</sup>, offer a simple and intuitive way to explain black-box models without opening them. Still, as of today there exists only one open-source library that provides a unifying approach to generate and benchmark counterfactual explanations for models built and trained in Python <span class="citation" data-cites="pawelczyk2021carla">(Pawelczyk et al. 2021)</span>. This is great, but of limited use to users of other programming languages ü•≤.</p>
<p>Enter <a href="https://www.paltmeyer.com/CounterfactualExplanations.jl/stable/"><code>CounterfactualExplanations.jl</code></a>: a Julia package that can be used to explain machine learning algorithms developed and trained in Julia, Python and R. Counterfactual explanations fall into the broader category of explainable artificial intelligence (XAI).</p>
<p>Explainable AI typically involves models that are not inherently interpretable but require additional tools to be explainable to humans. Examples of the latter include ensembles, support vector machines and deep neural networks. This is not to be confused with interpretable AI, which involves models that are inherently interpretable and transparent such as general additive models (GAM), decision trees and rule-based models.</p>
<p>Some would argue that we best avoid explaining black-box models altogether <span class="citation" data-cites="rudin2019stop">(Rudin 2019)</span> and instead focus solely on interpretable AI. While I agree that initial efforts should always be geared towards interpretable models, stopping there would entail missed opportunities and anyway is probably not very realistic in times of <a href="https://openai.com/blog/dall-e/">DALL<img src="https://latex.codecogs.com/png.latex?%5Ccdot">E</a> and Co.</p>
<blockquote class="blockquote">
<p>Even though [‚Ä¶] interpretability is of great importance and should be pursued, explanations can, in principle, be offered without opening the ‚Äúblack box.‚Äù</p>
<p>‚Äî <span class="citation" data-cites="wachter2017counterfactual">Wachter, Mittelstadt, and Russell (2017)</span></p>
</blockquote>
<!-- Nut paragraph -->
<p>This post introduces the main functionality of the new Julia package. Following a motivating example using a model trained in Julia, we will see how easy the package can be adapted to work with models trained in Python and R. Since the motivation for this post is also to hopefully attract contributors, the final section outlines some of the exciting developments we have planned.</p>
<section id="counterfactuals-for-image-data" class="level2">
<h2 class="anchored" data-anchor-id="counterfactuals-for-image-data">Counterfactuals for image data üñº</h2>
<p>To introduce counterfactual explanations I used a simple binary classification problem in my previous <a href="https://towardsdatascience.com/individual-recourse-for-black-box-models-5e9ed1e4b4cc">post</a>. It involved a linear classifier and a linearly separable, synthetic data set with just two features. This time we are going to step it up a notch: we will generate counterfactual explanations MNIST data. The MNIST dataset contains 60,000 training samples of handwritten digits in the form of 28x28 pixel grey-scale images <span class="citation" data-cites="lecun1998mnist">(LeCun 1998)</span>. Each image is associated with a label indicating the digit (0-9) that the image represents.</p>
<p>The <a href="https://www.paltmeyer.com/CounterfactualExplanations.jl/stable/"><code>CounterfactualExplanations.jl</code></a> package ships with two black-box models that were trained to predict labels for this data: firstly, a simple multi-layer perceptron (MLP) and, secondly, a corresponding deep ensemble. Originally proposed by <span class="citation" data-cites="lakshminarayanan2016simple">Lakshminarayanan, Pritzel, and Blundell (2016)</span>, deep ensembles are really just ensembles of deep neural networks. They are still among the most popular approaches to Bayesian deep learning.<sup>2</sup></p>
<section id="black-box-models" class="level3">
<h3 class="anchored" data-anchor-id="black-box-models">Black-box models</h3>
<p>The code below loads relevant packages along with the MNIST data and pre-trained models.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># Load package, models and data:</span></span>
<span id="cb1-2"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">CounterfactualExplanations</span>, <span class="bu" style="color: null;">Flux</span></span>
<span id="cb1-3"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">CounterfactualExplanations.Data</span>: mnist_data, mnist_model, mnist_ensemble</span>
<span id="cb1-4">data, X, ys <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">mnist_data</span>()</span>
<span id="cb1-5">model <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">mnist_model</span>()</span>
<span id="cb1-6">ensemble <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">mnist_ensemble</span>()</span>
<span id="cb1-7">counterfactual_data <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">CounterfactualData</span>(X,ys;domain<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">0</span>,<span class="fl" style="color: #AD0000;">1</span>))</span></code></pre></div>
</div>
<p>While the package can currently handle a few simple classification models natively, it is designed to be easily extensible through users and contributors. Extending the package to deal with custom models typically involves only two simple steps:</p>
<ol type="1">
<li><strong>Subtyping</strong>: the custom model needs to be declared as a subtype of the package-internal type <code>AbstractFittedModel</code>.</li>
<li><strong>Multiple dispatch</strong>: the package-internal functions <code>logits</code> and <code>probs</code> need to be extended through custom methods for the new model type.</li>
</ol>
<p>The following code implements these two steps first for the MLP and then for the deep ensemble.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">CounterfactualExplanations.Models</span></span>
<span id="cb2-2"><span class="im" style="color: #00769E;">import</span> <span class="bu" style="color: null;">CounterfactualExplanations.Models</span>: logits, probs</span>
<span id="cb2-3"><span class="co" style="color: #5E5E5E;"># MLP:</span></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;"># Step 1)</span></span>
<span id="cb2-5"><span class="kw" style="color: #003B4F;">struct</span> NeuralNetwork <span class="op" style="color: #5E5E5E;">&lt;:</span><span class="dt" style="color: #AD0000;"> Models.AbstractFittedModel</span></span>
<span id="cb2-6">    model<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">Any</span></span>
<span id="cb2-7"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;"># Step 2)</span></span>
<span id="cb2-9"><span class="fu" style="color: #4758AB;">logits</span>(M<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">NeuralNetwork</span>, X<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">AbstractArray</span>) <span class="op" style="color: #5E5E5E;">=</span> M.<span class="fu" style="color: #4758AB;">model</span>(X)</span>
<span id="cb2-10"><span class="fu" style="color: #4758AB;">probs</span>(M<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">NeuralNetwork</span>, X<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">AbstractArray</span>)<span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">softmax</span>(<span class="fu" style="color: #4758AB;">logits</span>(M, X))</span>
<span id="cb2-11">M <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">NeuralNetwork</span>(model)</span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;"># Deep ensemble:</span></span>
<span id="cb2-14"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Flux</span>: stack</span>
<span id="cb2-15"><span class="co" style="color: #5E5E5E;"># Step 1)</span></span>
<span id="cb2-16"><span class="kw" style="color: #003B4F;">struct</span> FittedEnsemble <span class="op" style="color: #5E5E5E;">&lt;:</span><span class="dt" style="color: #AD0000;"> Models.AbstractFittedModel</span></span>
<span id="cb2-17">    ensemble<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">AbstractArray</span></span>
<span id="cb2-18"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;"># Step 2)</span></span>
<span id="cb2-20"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Statistics</span></span>
<span id="cb2-21"><span class="fu" style="color: #4758AB;">logits</span>(M<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">FittedEnsemble</span>, X<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">AbstractArray</span>) <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">mean</span>(<span class="fu" style="color: #4758AB;">stack</span>([<span class="fu" style="color: #4758AB;">m</span>(X) for m <span class="kw" style="color: #003B4F;">in</span> M.ensemble],<span class="fl" style="color: #AD0000;">3</span>),dims<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3</span>)</span>
<span id="cb2-22"><span class="fu" style="color: #4758AB;">probs</span>(M<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">FittedEnsemble</span>, X<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">AbstractArray</span>) <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">mean</span>(<span class="fu" style="color: #4758AB;">stack</span>([<span class="fu" style="color: #4758AB;">softmax</span>(<span class="fu" style="color: #4758AB;">m</span>(X)) for m <span class="kw" style="color: #003B4F;">in</span> M.ensemble],<span class="fl" style="color: #AD0000;">3</span>),dims<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">3</span>)</span>
<span id="cb2-23">M_ensemble <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">FittedEnsemble</span>(ensemble)</span></code></pre></div>
</div>
</section>
<section id="counterfactual-generators" class="level3">
<h3 class="anchored" data-anchor-id="counterfactual-generators">Counterfactual generators</h3>
<p>Next, we need to specify the counterfactual generators we want to use. The package currently ships with two default generators that both need gradient access: firstly, the generic generator introduced by <span class="citation" data-cites="wachter2017counterfactual">Wachter, Mittelstadt, and Russell (2017)</span> and, secondly, a greedy generator introduced by <span class="citation" data-cites="schut2021generating">Schut et al. (2021)</span>.</p>
<p>The greedy generator is designed to be used with models that incorporate uncertainty in their predictions such as the deep ensemble introduced above. It works for probabilistic (Bayesian) models, because they only produce high-confidence predictions in regions of the feature domain that are populated by training samples. As long as the model is expressive enough and well-specified, counterfactuals in these regions will always be realistic and unambiguous since by construction they should look very similar to training samples. Other popular approaches to counterfactual explanations like REVISE <span class="citation" data-cites="joshi2019realistic">(Joshi et al. 2019)</span> and CLUE <span class="citation" data-cites="antoran2020getting">(Antor√°n et al. 2020)</span> also play with this simple idea.</p>
<p>The following code instantiates the two generators for the problem at hand.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1">generic <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">GenericGenerator</span>(;loss<span class="op" style="color: #5E5E5E;">=:</span>logitcrossentropy)</span>
<span id="cb3-2">greedy <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">GreedyGenerator</span>(;loss<span class="op" style="color: #5E5E5E;">=:</span>logitcrossentropy)</span></code></pre></div>
</div>
</section>
<section id="explanations" class="level3">
<h3 class="anchored" data-anchor-id="explanations">Explanations</h3>
<p>Once the model and counterfactual generator are specified, running counterfactual search is very easy using the package. For a given factual (<code>x</code>), target class (<code>target</code>) and data set (<code>counterfactual_data</code>), simply running</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><span class="fu" style="color: #4758AB;">generate_counterfactual</span>(x, target, counterfactual_data, M, generic)</span></code></pre></div>
</div>
<p>will generate the results, in this case using the generic generator (<code>generic</code>) for the MLP (<code>M</code>). Since we have specified two different black-box models and two different counterfactual generators, we have four combinations of a model and a generator in total. For each of these combinations I have used the <code>generate_counterfactual</code> function to produce the results in Figure&nbsp;1.</p>
<p>In every case the desired label switch is in fact achieved, but arguably from a human perspective only the counterfactuals for the deep ensemble look like a four. The generic generator produces mild perturbations in regions that seem irrelevant from a human perspective, but nonetheless yields a counterfactual that can pass as a four. The greedy approach clearly targets pixels at the top of the handwritten nine and yields the best result overall. For the non-Bayesian MLP, both the generic and the greedy approach generate counterfactuals that look much like adversarial examples: they perturb pixels in seemingly random regions on the image.</p>
<div id="fig-mnist-9to4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/a-new-tool-for-explainable-ai/www/mnist_9_to_4.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Counterfactual explanations for MNIST: turning a nine (9) into a four (4).</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="language-interoperability" class="level2">
<h2 class="anchored" data-anchor-id="language-interoperability">Language interoperability üë•</h2>
<p>The Julia language offers unique support for programming language interoperability. For example, calling R or Python is made remarkably easy through <code>RCall.jl</code> and <code>PyCall.jl</code>, respectively. This functionality can be leveraged to use <code>CounterfactualExplanations.jl</code> to generate explanations for models that were developed in other programming languages. At this time there is no native support for foreign programming languages, but the following example involving a <code>torch</code> neural network trained in <code>R</code> demonstrates how versatile the package is.<sup>3</sup></p>
<section id="explaining-a-torch-model" class="level3">
<h3 class="anchored" data-anchor-id="explaining-a-torch-model">Explaining a <code>torch</code> model</h3>
<p>We will consider a simple MLP trained for a binary classification task. As before we first need to adapt this custom model for use with our package. The code below the two necessary steps - sub-typing and method extension. Logits are returned by the <code>torch</code> model and copied from the R environment into the Julia scope. Probabilities are then computed inside the Julia scope by passing the logits through the sigmoid function.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Flux</span></span>
<span id="cb5-2"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">CounterfactualExplanations</span>, <span class="bu" style="color: null;">CounterfactualExplanations.Models</span></span>
<span id="cb5-3"><span class="im" style="color: #00769E;">import</span> <span class="bu" style="color: null;">CounterfactualExplanations.Models</span>: logits, probs <span class="co" style="color: #5E5E5E;"># import functions in order to extend</span></span>
<span id="cb5-4"></span>
<span id="cb5-5"><span class="co" style="color: #5E5E5E;"># Step 1)</span></span>
<span id="cb5-6"><span class="kw" style="color: #003B4F;">struct</span> TorchNetwork <span class="op" style="color: #5E5E5E;">&lt;:</span><span class="dt" style="color: #AD0000;"> Models.AbstractFittedModel</span></span>
<span id="cb5-7">    nn<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">Any</span></span>
<span id="cb5-8"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb5-9"></span>
<span id="cb5-10"><span class="co" style="color: #5E5E5E;"># Step 2)</span></span>
<span id="cb5-11"><span class="kw" style="color: #003B4F;">function</span> <span class="fu" style="color: #4758AB;">logits</span>(M<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">TorchNetwork</span>, X<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">AbstractArray</span>)</span>
<span id="cb5-12">  nn <span class="op" style="color: #5E5E5E;">=</span> M.nn</span>
<span id="cb5-13">  y <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">rcopy</span>(R<span class="st" style="color: #20794D;">"as_array(</span><span class="sc" style="color: #5E5E5E;">$</span>nn<span class="st" style="color: #20794D;">(torch_tensor(t(</span><span class="sc" style="color: #5E5E5E;">$</span>X<span class="st" style="color: #20794D;">))))"</span>)</span>
<span id="cb5-14">  y <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">isa</span>(y, <span class="dt" style="color: #AD0000;">AbstractArray</span>) ? y <span class="op" style="color: #5E5E5E;">:</span> [y]</span>
<span id="cb5-15">  <span class="cf" style="color: #003B4F;">return</span> y<span class="op" style="color: #5E5E5E;">'</span></span>
<span id="cb5-16"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb5-17"><span class="kw" style="color: #003B4F;">function</span> <span class="fu" style="color: #4758AB;">probs</span>(M<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">TorchNetwork</span>, X<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">AbstractArray</span>)</span>
<span id="cb5-18">  <span class="cf" style="color: #003B4F;">return</span> <span class="fu" style="color: #4758AB;">œÉ</span>.(<span class="fu" style="color: #4758AB;">logits</span>(M, X))</span>
<span id="cb5-19"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb5-20">M <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">TorchNetwork</span>(R<span class="st" style="color: #20794D;">"model"</span>)</span></code></pre></div>
</div>
<p>Compared to models trained in Julia, we need to do a little more work at this point. Since our counterfactual generators need gradient access, we essentially need to allow our package to communicate with the R <code>torch</code> library. While this may sound daunting, it turns out to be quite manageable: all we have to do is respecify the function that computes the gradient with respect to the counterfactual loss function so that it can deal with the <code>TorchNetwork</code> type we defined above. That is all the adjustment needed to use <code>CounterfactualExplanations.jl</code> for our custom R model. Figure&nbsp;2 shows a counterfactual path for a randomly chosen sample with respect to the MLP trained in R.</p>
<div class="callout callout-style-default callout-caution callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Experimental functionality
</div>
</div>
<div class="callout-body-container callout-body">
<p>You may have stumbled across the term <em>respecify</em> above: does it really seem like a good idea to just replace an existing function from our package? Surely not! There are certainly better ways to go about this, which we will consider when adding native support for Python and R models in future package releases. Which brings us to our final section ‚Ä¶</p>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><span class="im" style="color: #00769E;">import</span> <span class="bu" style="color: null;">CounterfactualExplanations.Generators</span>: ‚àÇ‚Ñì</span>
<span id="cb6-2"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">LinearAlgebra</span></span>
<span id="cb6-3"></span>
<span id="cb6-4"><span class="co" style="color: #5E5E5E;"># Countefactual loss:</span></span>
<span id="cb6-5"><span class="kw" style="color: #003B4F;">function</span> <span class="fu" style="color: #4758AB;">‚àÇ‚Ñì</span>(</span>
<span id="cb6-6">    generator<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">AbstractGradientBasedGenerator</span>, </span>
<span id="cb6-7">    counterfactual_state<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">CounterfactualState</span>) </span>
<span id="cb6-8">  M <span class="op" style="color: #5E5E5E;">=</span> counterfactual_state.M</span>
<span id="cb6-9">  nn <span class="op" style="color: #5E5E5E;">=</span> M.nn</span>
<span id="cb6-10">  x‚Ä≤ <span class="op" style="color: #5E5E5E;">=</span> counterfactual_state.x‚Ä≤</span>
<span id="cb6-11">  t <span class="op" style="color: #5E5E5E;">=</span> counterfactual_state.target_encoded</span>
<span id="cb6-12">  R<span class="st" style="color: #20794D;">"""</span></span>
<span id="cb6-13"><span class="st" style="color: #20794D;">  x &lt;- torch_tensor(</span><span class="sc" style="color: #5E5E5E;">$</span>x<span class="st" style="color: #20794D;">‚Ä≤, requires_grad=TRUE)</span></span>
<span id="cb6-14"><span class="st" style="color: #20794D;">  output &lt;- </span><span class="sc" style="color: #5E5E5E;">$</span>nn<span class="st" style="color: #20794D;">(x)</span></span>
<span id="cb6-15"><span class="st" style="color: #20794D;">  loss_fun &lt;- nnf_binary_cross_entropy_with_logits</span></span>
<span id="cb6-16"><span class="st" style="color: #20794D;">  obj_loss &lt;- loss_fun(output,</span><span class="sc" style="color: #5E5E5E;">$</span>t<span class="st" style="color: #20794D;">)</span></span>
<span id="cb6-17"><span class="st" style="color: #20794D;">  obj_loss</span><span class="sc" style="color: #5E5E5E;">$</span>backward<span class="st" style="color: #20794D;">()</span></span>
<span id="cb6-18"><span class="st" style="color: #20794D;">  """</span></span>
<span id="cb6-19">  grad <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">rcopy</span>(R<span class="st" style="color: #20794D;">"as_array(x</span><span class="sc" style="color: #5E5E5E;">$</span>grad<span class="st" style="color: #20794D;">)"</span>)</span>
<span id="cb6-20">  <span class="cf" style="color: #003B4F;">return</span> grad</span>
<span id="cb6-21"><span class="kw" style="color: #003B4F;">end</span></span></code></pre></div>
</div>
<div id="fig-torch" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/a-new-tool-for-explainable-ai/www/interop_r.gif" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Counterfactual path using the generic counterfactual generator for a model trained in R.</figcaption><p></p>
</figure>
</div>
<!-- kicker -->
</section>
</section>
<section id="we-need-you" class="level2">
<h2 class="anchored" data-anchor-id="we-need-you">We need you! ü´µ</h2>
<p>The ambition for <code>CounterfactualExplanations.jl</code> is to provide a go-to place for counterfactual explanations to the Julia community and beyond. This is a grand ambition, especially for a package that has so far been built by a single developer who has little prior experience with Julia. We would therefore very much like to invite community contributions. If you have an interest in trustworthy AI, the open-source community and Julia, please do get involved! This package is still in its early stages of development, so any kind of contribution is welcome: advice on the core package architecture, pull requests, issues, discussions and even just comments below would be much appreciated.</p>
<p>To give you a flavor of what type of future developments we envision, here is a non-exhaustive list:</p>
<ol type="1">
<li>Native support for additional counterfactual generators and predictive models including those built and trained in Python or R.</li>
<li>Additional datasets for testing, evaluation and benchmarking.</li>
<li>Improved preprocessing including native support for categorical features.</li>
<li>Support for regression models.</li>
</ol>
<p>Finally, if you like this project but don‚Äôt have much time, then simply sharing this article or starring the <a href="https://github.com/pat-alt/CounterfactualExplanations.jl">repo</a> on GitHub would also go a long way.</p>
</section>
<section id="further-reading" class="level2">
<h2 class="anchored" data-anchor-id="further-reading">Further reading üìö</h2>
<p>If you‚Äôre interested in learning more about this development, feel free to check out the following resources:</p>
<ul>
<li>Package docs: <a href="https://pat-alt.github.io/CounterfactualExplanations.jl/stable">[stable]</a>, <a href="https://pat-alt.github.io/CounterfactualExplanations.jl/dev">[dev]</a>.</li>
<li><a href="https://www.paltmeyer.com/CounterfactualExplanations.jl/stable/contributing/">Contributor‚Äôs guide</a>.</li>
<li><a href="https://github.com/pat-alt/CounterfactualExplanations.jl">GitHub repo</a>.</li>
</ul>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-antoran2020getting" class="csl-entry">
Antor√°n, Javier, Umang Bhatt, Tameem Adel, Adrian Weller, and Jos√© Miguel Hern√°ndez-Lobato. 2020. <span>‚ÄúGetting a Clue: <span>A</span> Method for Explaining Uncertainty Estimates.‚Äù</span> <a href="https://arxiv.org/abs/2006.06848">https://arxiv.org/abs/2006.06848</a>.
</div>
<div id="ref-joshi2019realistic" class="csl-entry">
Joshi, Shalmali, Oluwasanmi Koyejo, Warut Vijitbenjaronk, Been Kim, and Joydeep Ghosh. 2019. <span>‚ÄúTowards Realistic Individual Recourse and Actionable Explanations in Black-Box Decision Making Systems.‚Äù</span> <a href="https://arxiv.org/abs/1907.09615">https://arxiv.org/abs/1907.09615</a>.
</div>
<div id="ref-lakshminarayanan2016simple" class="csl-entry">
Lakshminarayanan, Balaji, Alexander Pritzel, and Charles Blundell. 2016. <span>‚ÄúSimple and Scalable Predictive Uncertainty Estimation Using Deep Ensembles.‚Äù</span> <a href="https://arxiv.org/abs/1612.01474">https://arxiv.org/abs/1612.01474</a>.
</div>
<div id="ref-lecun1998mnist" class="csl-entry">
LeCun, Yann. 1998. <span>‚ÄúThe <span>MNIST</span> Database of Handwritten Digits.‚Äù</span>
</div>
<div id="ref-pawelczyk2021carla" class="csl-entry">
Pawelczyk, Martin, Sascha Bielawski, Johannes van den Heuvel, Tobias Richter, and Gjergji Kasneci. 2021. <span>‚ÄúCarla: A Python Library to Benchmark Algorithmic Recourse and Counterfactual Explanation Algorithms.‚Äù</span> <a href="https://arxiv.org/abs/2108.00783">https://arxiv.org/abs/2108.00783</a>.
</div>
<div id="ref-rudin2019stop" class="csl-entry">
Rudin, Cynthia. 2019. <span>‚ÄúStop Explaining Black Box Machine Learning Models for High Stakes Decisions and Use Interpretable Models Instead.‚Äù</span> <em>Nature Machine Intelligence</em> 1 (5): 206‚Äì15.
</div>
<div id="ref-schut2021generating" class="csl-entry">
Schut, Lisa, Oscar Key, Rory Mc Grath, Luca Costabello, Bogdan Sacaleanu, Yarin Gal, et al. 2021. <span>‚ÄúGenerating <span>Interpretable Counterfactual Explanations By Implicit Minimisation</span> of <span>Epistemic</span> and <span>Aleatoric Uncertainties</span>.‚Äù</span> In <em>International <span>Conference</span> on <span>Artificial Intelligence</span> and <span>Statistics</span></em>, 1756‚Äì64. <span>PMLR</span>.
</div>
<div id="ref-wachter2017counterfactual" class="csl-entry">
Wachter, Sandra, Brent Mittelstadt, and Chris Russell. 2017. <span>‚ÄúCounterfactual Explanations Without Opening the Black Box: <span>Automated</span> Decisions and the <span>GDPR</span>.‚Äù</span> <em>Harv. JL &amp; Tech.</em> 31: 841.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>See: [<a href="https://towardsdatascience.com/individual-recourse-for-black-box-models-5e9ed1e4b4cc">TDS</a>], [<a href="https://www.paltmeyer.com/blog/posts/individual-recourse-for-black-box-models/">blog</a>]‚Ü©Ô∏é</p></li>
<li id="fn2"><p>For more information on Bayesian deep learning see my previous post: [<a href="https://towardsdatascience.com/go-deep-but-also-go-bayesian-ab25efa6f7b">TDS</a>], [<a href="https://www.paltmeyer.com/blog/posts/effortsless-bayesian-dl/">blog</a>].‚Ü©Ô∏é</p></li>
<li id="fn3"><p>The corresponding example involving <code>PyTorch</code> is analogous and therefore not included here. You may find it <a href="https://www.paltmeyer.com/CounterfactualExplanations.jl/dev/tutorials/interop/">here</a>.‚Ü©Ô∏é</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2022,
  author = {Patrick Altmeyer},
  title = {A New Tool for Explainable {AI}},
  date = {22-04-20},
  url = {https://www.paltmeyer.com/blog//blog/posts/a-new-tool-for-explainable-ai},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2022" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 22AD. <span>‚ÄúA New Tool for Explainable AI.‚Äù</span>
April 20, 22AD. <a href="https://www.paltmeyer.com/blog//blog/posts/a-new-tool-for-explainable-ai">https://www.paltmeyer.com/blog//blog/posts/a-new-tool-for-explainable-ai</a>.
</div></div></section></div> ]]></description>
  <category>counterfactuals</category>
  <category>explainable AI</category>
  <category>Julia</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/a-new-tool-for-explainable-ai/index.html</guid>
  <pubDate>Tue, 19 Apr 2022 22:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/a-new-tool-for-explainable-ai/www/intro.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Julia and Quarto: a match made in heaven? üå§</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/julia-and-quarto-a-match-made-in-heaven/index.html</link>
  <description><![CDATA[ 



<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/julia-and-quarto-a-match-made-in-heaven/www/intro.gif" class="figure-img">
<figcaption class="figure-caption">
Julia and Quarto: a perfect match.
</figcaption>
</figure>
</div>
<p>Does your work involve research, coding, writing and publishing? If so, then chances are that you often find yourself bouncing back and forth between different open-source text editors, IDEs, programming languages and platforms depending on your current needs. Using a diverse set of tools is reasonable, because there typically is no single perfect approach that solves all our problems. For example, interactive notebooks like Jupyter are useful for working with code and communicating it to others, but they are probably not anyone‚Äôs first choice for producing a scientific article. Similarly, Beamer presentations can be useful for presenting science in a standardized fashion, but they are the very opposite of interactive and look incredibly boring.</p>
<p>As much as the great variety of free tools deserves being celebrated, all this bouncing back and forth can be really tiring. What if there was a single tool, an engine that can turn your work into all kinds of different outputs? I mean literally any output you can think of: Markdown, HTML, PDF, LateX, ePub, entire websites, presentations (yes, also Beamer if you have to), MS Word, OpenOffice, ‚Ä¶ the list goes on. All of that starting from the same place: a plain Markdown document blended with essentially any programming language of your choice and a YAML header defining your output. This tool now exists and it goes by the name <a href="https://quarto.org/">Quarto</a>.</p>
<p>In this short blog post I hope to convince you that Quarto is the only publishing engine you will ever need. What I am definitely not going to tell you is which IDE, text editor or programming language you should be using to actually produce your work. Quarto does not care about that. Quarto is here to make your life a bit easier (and by ‚Äòa bit‚Äô I mean a whole lot). Quarto is nothing less but a revolution for scientific publishing.</p>
<p>To put this all in some context (well, my context), I will now tell you a bit about what has led me to making such bold claims about yet another open-source tool.</p>
<blockquote class="blockquote">
<p>Hold up?! Wasn‚Äôt this supposed to be about Julia and Quarto?</p>
</blockquote>
<p>Yes! But it‚Äôs worth noting that a lot of the benefits that Quarto brings have been available to R users for many years, thanks to the amazing work of many great open-source contributors like <a href="https://twitter.com/xieyihui">@xieyihui</a>. Julia was the main reason for me to branch out of this comfortable R bubble as I describe below. That said, if you are a Julia user who really couldn‚Äôt care less about my previous experiences with R Markdown, this is a good time to skip straight ahead to Section&nbsp;2. By the way, if you haven‚Äôt clicked on that link, here‚Äôs a small showcase demonstrating how it was generated. It shows easy it is to have everything well organised and connected with Quarto.</p>
<div class="callout callout-style-default callout-tip callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Cross-referencing
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is a standard recipe for generating cross-references in Quarto. The example below involves a section cross-reference.</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1">If you are a Julia user that really couldn't care less about my previous experiences with R Markdown, this is a good time to skip straight ahead to @sec-match.</span>
<span id="cb1-2"></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">## Quarto and Julia - a perfect match {#sec-match}</span></span></code></pre></div>
<p>There is actually a comprehensive 8-step guide explaining how to achieve something similar in MS Word, but personally I wouldn‚Äôt go there. Anyway, take your pick:</p>
<ol type="a">
<li>üî¥ <a href="https://support.microsoft.com/en-us/office/create-a-cross-reference-300b208c-e45a-487a-880b-a02767d9774b">Go there</a>.</li>
<li>üü¢ Move on to Section&nbsp;1 #safespace.</li>
</ol>
</div>
</div>
<section id="sec-bubble" class="level2">
<h2 class="anchored" data-anchor-id="sec-bubble">A comfortable bubble üéà</h2>
<p>For many years I have used R Markdown for essentially anything work-related. As an undergraduate economics student facing the unfortunate reality that people still teach Stata, I was drawn to R. This was partially because R has a great open-source community and also partially because Stata. Once I realised that I would be able to use R Markdown to write up all of my future homework assignments and even my thesis, I never looked back. MS Word was now officially dead to me. Overleaf was nothing more than a last resort if everyone else in my team insisted on using it for a group project. Being able to write my undergraduate dissertation in R Markdown was a first truly triumphant moment. Soon after that I would also try myself at Shiny, produce outputs in HTML and build entire websites through <code>blogdown</code>. And all of that from within R Studio involving R and Markdown and really not much else. During my first professional job at the Bank of England I was reluctant to use anything other than R Markdown to produce all of my output. Luckily for me, the Bank was very much heading in that same direction at the time and my reluctance was not perceived as stubbornness, but actually welcome (at least I hoped so).</p>
<section id="cracks-in-the-bubble" class="level4">
<h4 class="anchored" data-anchor-id="cracks-in-the-bubble">Cracks in the bubble üß®</h4>
<p>Soon though, part of me felt a little boxed in. For any work that required me to look outside of the R bubble, I knew I might also have to give up a very, very comfortable work environment and my productivity would surely take a hit. During my master‚Äôs in Data Science, for example, the mantra was very much ‚ÄúPython + Jupyter or die‚Äù. Through <a href="https://rstudio.github.io/reticulate/"><code>reticulate</code></a> and R Studio‚Äôs growing support for Python I managed to get by without having to leave my bubble too often. But <code>reticulate</code> always felt a little clunky (sorry!) and some professors were reluctant to accept anything other than Jupyter notebooks. Even if others had not perceived it that way in the past, I certainly started to feel that I might just be a little too attached the beautiful bubble that R Studio had created around me.</p>
</section>
<section id="enter-julia" class="level4">
<h4 class="anchored" data-anchor-id="enter-julia">Enter: Julia üí£</h4>
<p>Then there was Julia: elegant, fast, pure, scientific and - oh my REPL! - those beautiful colors and unicode symbols. The stuff of dreams, really! Geeky dreams, but dreams nonetheless. I had once before given Julia a shot when working with high-frequency trade data for a course in market microstructure. This was the first time R really revealed its limitations to me and my bubble nearly burst, but thanks to <code>data.table</code> and <code>Rcpp</code> I managed to escape with only minor bruises. Still, Julia kept popping up, teasing me whenever I would work on some Frakenstein-style C++ code snippets that would hopefully resolve my R bottlenecks. I actually enjoyed mixing <strong>some</strong> C++ into my R code like I did <a href="https://github.com/pat-alt/reinforcement_learning">here</a>, but the process was just a little painful and slow. But wouldn‚Äôt learning <strong>all of</strong> Julia take even more time and patience? And what about my dependence on R Markdown?</p>
</section>
<section id="julia-bursts-my-bubble" class="level4">
<h4 class="anchored" data-anchor-id="julia-bursts-my-bubble">Julia bursts my bubble üí•</h4>
<p>As I started my PhD in September 2021, I eventually gave in. New beginnings - time to suck it up! If it meant that I‚Äôd have to use Jupyter notebooks with Julia, so be it! And so I was off to a somewhat bumpy start that would have me bouncing back and forth between trying to make Julia work in R Studio (meh), setting up Jupyter Lab (meeeh), just using the Julia REPL because ‚Äúthe REPL is all you need‚Äù (nope) and even struggling with Vim and Emacs. Then there was also <code>Pluto.jl</code>, of course, which admittedly looks amazing! But it also looks very much tailored to Julia and (I believe) the number of different output formats you can produce is still very limited. Eventually, I settled for VSCode in combination with Jupyter notebooks. As much as I dreaded the latter, Jupyter is popular, arguably versatile and supports both R and Julia. This setup worked well enough for me, but it still definitely fell short of the breeze that R Studio had always provided. One thing that really bugged me, for example, was the fact that the IJulia kernel was not accessible from the Julia REPL. Each notebook would have its own environment, which could only be accessed through the notebook. In R Studio the interaction between R Markdown and the console is seamless, as both have access to the same environment variables.</p>
</section>
<section id="enter-quarto" class="level4">
<h4 class="anchored" data-anchor-id="enter-quarto">Enter: Quarto ‚ù§Ô∏è‚Äçü©π</h4>
<p>Around the same time that I started using Julia, I read about Quarto for the first time. It looked ‚Ä¶ great! Like a timely little miracle really! But also ‚Ä¶ unfinished? Definitely experimental at the time. I loved the idea though and in a footnote somewhere on their website it said that the project was supported by R Studio which I took as a very good sign. So I decided to at least give it a quick try and built a small (tiny) <a href="https://www.paltmeyer.com/tai/">website</a> summarising some of the literature I had read for my PhD:</p>
<blockquote class="twitter-tweet blockquote">
<p lang="en" dir="ltr">
Just had my first go <a href="https://twitter.com/hashtag/quarto?src=hash&amp;ref_src=twsrc%5Etfw">#quarto</a> and I absolutely love the concept! Open-source and language agnostic - truly amazing work from <a href="https://twitter.com/rstudio?ref_src=twsrc%5Etfw">&amp;#64rstudio</a> <a href="https://t.co/veCg7ywQ8v">https://t.co/veCg7ywQ8v</a>
</p>
‚Äî Patrick Altmeyer (&amp;#64paltmey) <a href="https://twitter.com/paltmey/status/1454042807019180035?ref_src=twsrc%5Etfw">October 29, 2021</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>This was a first very pleasant encounter with Quarto, arguable even smoother than building websites in <code>blogdown</code>. As for working with Julia though, I had made up my mind that VSCode was the way to go and at the time there was no Quarto extension (there is <a href="https://marketplace.visualstudio.com/items?itemName=quarto.quarto">now</a>). There was also little in terms of communication about the project by R Studio, probably because things were really still in the early development stages. I was hopeful that eventually Quarto would enable me to emulate the R Studio experience in VS Code, but for now things were not quite there yet.</p>
</section>
<section id="quarto-keeps-growing" class="level4">
<h4 class="anchored" data-anchor-id="quarto-keeps-growing">Quarto keeps growing ü§û</h4>
<p>Since I was now working with VSCode + Jupyter and since Quarto supports Jupyter as well as all of my old R Markdown work, my next little Quarto project involved turning my old <code>blogdown</code>-powered blog into a Quarto-powered <a href="https://www.paltmeyer.com/blog/">blog</a>. This was not strictly necessary, as I could always export my new Jupyter notebooks to HTML and let <code>blogdown</code> do the rest. But it did streamline things a little bit and the default Quarto blog theme - you are staring at it - is actually üî•. I also did not have to feel guilty towards <a href="https://twitter.com/xieyihui">@xieyihui</a> about leaving <code>blogdown</code>, because unsurprisingly he is on the Quarto team. As I was working on this little project I started noticing that the Quarto website was updated regularly and responses to issues I opened like this <a href="https://github.com/quarto-dev/quarto-cli/issues/293">one</a> were answered very swiftly. Clearly, things were moving and they were moving fast. More recently, the news about Quarto has been spreading and it‚Äôs left some folks as confused and amazed as I was, when I first heard about it:</p>
<blockquote class="twitter-tweet blockquote">
<p lang="en" dir="ltr">
<a href="https://twitter.com/hashtag/RStats?src=hash&amp;ref_src=twsrc%5Etfw">#RStats</a> can someone explain to me what's the difference between {Quarto} and {RMarkdown}? I saw a tweet about Quarto and now I'm all confused ‚Ä¶ What gap is it supposed to fill?
</p>
‚Äî Erwin Lares (&amp;#64lasrubieras) <a href="https://twitter.com/lasrubieras/status/1509014670262390784?ref_src=twsrc%5Etfw">March 30, 2022</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>This is why finally I‚Äôve decided I should write a brief post about how and why I use Quarto. Since I have been working mostly with Julia for the past couple of months, I‚Äôve chosen to focus on the interaction between Quarto and Julia. Coincidentally, yesterday was also the first time I saw a <a href="https://quarto.org/docs/computations/julia.html">guide</a> dedicated to Julia on the Quarto website, so evidently I am not the only one interested in that marriage. This also means that there really is not too much left for me to talk about now, since Quarto‚Äôs documentation is state-of-the-art. But a few bits and pieces I mention below might hopefully still be useful or at least some food for thought.</p>
</section>
</section>
<section id="sec-match" class="level2">
<h2 class="anchored" data-anchor-id="sec-match">Quarto and Julia: a perfect match üíôüíúüíö</h2>
<p>While what follows may be relevant to other programming languages, my main goal for this last section is to flag Quarto to the Julia community. In any case, #rstats folks have been using R and Python in R Markdown documents for a while now and won‚Äôt need much of an introduction to Quarto. As for Python aficionados, I can only recommend to give Quarto a shot (you will still be able to use Jupyter notebooks).</p>
<section id="working-with-vscode-quarto-and-julia" class="level4">
<h4 class="anchored" data-anchor-id="working-with-vscode-quarto-and-julia">Working with VSCode, Quarto and Julia</h4>
<p>The very article you are reading right now was composed in a Quarto document. These documents feel and look very much like standard Julia Markdown documents, but you can do a lot more with them. You can find the source code for this and other documents presented in this blog <a href="https://github.com/pat-alt/blog">here</a>.</p>
<p>To get you started, here is my current setup combining VSCode, Quarto and Julia:</p>
<ol type="1">
<li>VSCode extensions: in addition to the <a href="https://marketplace.visualstudio.com/items?itemName=julialang.language-julia">Julia extension</a> you will need the <a href="https://marketplace.visualstudio.com/items?itemName=quarto.quarto">Quarto extension</a>. In addition, the <a href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml">YAML extension</a> and some extension to preview Markdown docs would be helpful. I am not sure if <a href="https://marketplace.visualstudio.com/items?itemName=colinfang.markdown-julia">Markdown Julia</a> and <a href="https://marketplace.visualstudio.com/items?itemName=ms-toolsai.jupyter">Jupyter</a> are strictly necessary, but it won‚Äôt hurt.</li>
<li>I do most of my work in Quarto documents <code>.qmd</code>.</li>
<li>If you choose to also do that, make sure that the <code>.qmd</code> document has access to a <code>Pkg.jl</code> environment that has <code>IJulia</code> added.</li>
</ol>
<p>Julia code cells can be added anywhere along with your plain text Markdown. They look like this:</p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><span class="in" style="color: #5E5E5E;">```{julia}</span></span>
<span id="cb2-2">using Pkg</span>
<span id="cb2-3">Pkg.add(<span class="ot" style="color: #003B4F;">"</span><span class="st" style="color: #20794D;">CounterfactualExplanations</span><span class="ot" style="color: #003B4F;">"</span>)</span>
<span id="cb2-4"><span class="in" style="color: #5E5E5E;">```</span></span></code></pre></div>
<p>Contrary to Jupyter notebooks, executing this code cells will start a Julia REPL in VSCode. I find this very helpful, because it lets me fiddle with anything I have created inside the Quarto notebook without having to click into cells all the time. Quarto comes with great support for specifying <a href="https://quarto.org/docs/computations/julia.html">code executing options</a>. For example, for the code below I have specified <code>#| echo: true</code> in order for the code to be rendered. The code itself is the code I actually used to build the animation above (heavily borrowed from this <code>Javis.jl</code> <a href="https://juliaanimators.github.io/Javis.jl/stable/tutorials/tutorial_7/">tutorial</a>).</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Javis</span>, <span class="bu" style="color: null;">Animations</span>, <span class="bu" style="color: null;">Colors</span></span>
<span id="cb3-2"></span>
<span id="cb3-3">size <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">600</span></span>
<span id="cb3-4">radius_factor <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0.33</span></span>
<span id="cb3-5"></span>
<span id="cb3-6"><span class="kw" style="color: #003B4F;">function</span> <span class="fu" style="color: #4758AB;">ground</span>(args<span class="op" style="color: #5E5E5E;">...</span>)</span>
<span id="cb3-7">    <span class="fu" style="color: #4758AB;">background</span>(<span class="st" style="color: #20794D;">"transparent"</span>)</span>
<span id="cb3-8">    <span class="fu" style="color: #4758AB;">sethue</span>(<span class="st" style="color: #20794D;">"white"</span>)</span>
<span id="cb3-9"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb3-10"></span>
<span id="cb3-11"><span class="kw" style="color: #003B4F;">function</span> <span class="fu" style="color: #4758AB;">rotate_anim</span>(idx<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">Number</span>, total<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">Number</span>) </span>
<span id="cb3-12">    distance_circle <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0.875</span></span>
<span id="cb3-13">    steps <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">collect</span>(<span class="fu" style="color: #4758AB;">range</span>(distance_circle,<span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">-</span>distance_circle,length<span class="op" style="color: #5E5E5E;">=</span>total))</span>
<span id="cb3-14">    <span class="fu" style="color: #4758AB;">Animation</span>(</span>
<span id="cb3-15">        [<span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">1</span>], <span class="co" style="color: #5E5E5E;"># must go from 0 to 1</span></span>
<span id="cb3-16">        [<span class="fl" style="color: #AD0000;">0</span>, steps[idx]<span class="op" style="color: #5E5E5E;">*</span><span class="fl" style="color: #AD0000;">2</span>œÄ],</span>
<span id="cb3-17">        [<span class="fu" style="color: #4758AB;">sineio</span>()],</span>
<span id="cb3-18">    )</span>
<span id="cb3-19"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb3-20"></span>
<span id="cb3-21">translate_anim <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Animation</span>(</span>
<span id="cb3-22">    [<span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">1</span>], <span class="co" style="color: #5E5E5E;"># must go from 0 to 1</span></span>
<span id="cb3-23">    [O, <span class="fu" style="color: #4758AB;">Point</span>(size<span class="op" style="color: #5E5E5E;">*</span>radius_factor, <span class="fl" style="color: #AD0000;">0</span>)],</span>
<span id="cb3-24">    [<span class="fu" style="color: #4758AB;">sineio</span>()],</span>
<span id="cb3-25">)</span>
<span id="cb3-26"></span>
<span id="cb3-27">translate_back_anim <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Animation</span>(</span>
<span id="cb3-28">    [<span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">1</span>], <span class="co" style="color: #5E5E5E;"># must go from 0 to 1</span></span>
<span id="cb3-29">    [O, <span class="fu" style="color: #4758AB;">Point</span>(<span class="fu" style="color: #4758AB;">-</span>(size<span class="op" style="color: #5E5E5E;">*</span>radius_factor), <span class="fl" style="color: #AD0000;">0</span>)],</span>
<span id="cb3-30">    [<span class="fu" style="color: #4758AB;">sineio</span>()],</span>
<span id="cb3-31">)</span>
<span id="cb3-32"></span>
<span id="cb3-33">julia_colours <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Dict</span>(</span>
<span id="cb3-34">    <span class="op" style="color: #5E5E5E;">:</span>blue <span class="op" style="color: #5E5E5E;">=&gt;</span> <span class="st" style="color: #20794D;">"#4063D8"</span>,</span>
<span id="cb3-35">    <span class="op" style="color: #5E5E5E;">:</span>green <span class="op" style="color: #5E5E5E;">=&gt;</span> <span class="st" style="color: #20794D;">"#389826"</span>,</span>
<span id="cb3-36">    <span class="op" style="color: #5E5E5E;">:</span>purple <span class="op" style="color: #5E5E5E;">=&gt;</span> <span class="st" style="color: #20794D;">"#9558b2"</span>,</span>
<span id="cb3-37">    <span class="op" style="color: #5E5E5E;">:</span>red <span class="op" style="color: #5E5E5E;">=&gt;</span> <span class="st" style="color: #20794D;">"#CB3C33"</span></span>
<span id="cb3-38">)</span>
<span id="cb3-39">colour_order <span class="op" style="color: #5E5E5E;">=</span> [<span class="op" style="color: #5E5E5E;">:</span>red, <span class="op" style="color: #5E5E5E;">:</span>purple, <span class="op" style="color: #5E5E5E;">:</span>green, <span class="op" style="color: #5E5E5E;">:</span>blue]</span>
<span id="cb3-40">n_colours <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">length</span>(julia_colours)</span>
<span id="cb3-41"><span class="kw" style="color: #003B4F;">function</span> <span class="fu" style="color: #4758AB;">color_anim</span>(start_colour<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">String</span>, quarto_col<span class="op" style="color: #5E5E5E;">::</span><span class="dt" style="color: #AD0000;">String</span>=<span class="st" style="color: #20794D;">"#4b95d0"</span>)</span>
<span id="cb3-42">    <span class="fu" style="color: #4758AB;">Animation</span>(</span>
<span id="cb3-43">        [<span class="fl" style="color: #AD0000;">0</span>, <span class="fl" style="color: #AD0000;">1</span>], <span class="co" style="color: #5E5E5E;"># must go from 0 to 1</span></span>
<span id="cb3-44">        [<span class="fu" style="color: #4758AB;">Lab</span>(<span class="fu" style="color: #4758AB;">color</span>(start_colour)), <span class="fu" style="color: #4758AB;">Lab</span>(<span class="fu" style="color: #4758AB;">color</span>(quarto_col))],</span>
<span id="cb3-45">        [<span class="fu" style="color: #4758AB;">sineio</span>()],</span>
<span id="cb3-46">    )</span>
<span id="cb3-47"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb3-48"></span>
<span id="cb3-49">video <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Video</span>(size, size)</span>
<span id="cb3-50"></span>
<span id="cb3-51">frame_starts <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">10</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">40</span></span>
<span id="cb3-52">n_total <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">250</span></span>
<span id="cb3-53">n_frames <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">150</span></span>
<span id="cb3-54"><span class="fu" style="color: #4758AB;">Background</span>(<span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span>n_total, ground)</span>
<span id="cb3-55"></span>
<span id="cb3-56"><span class="co" style="color: #5E5E5E;"># Blob:</span></span>
<span id="cb3-57"><span class="kw" style="color: #003B4F;">function</span> <span class="fu" style="color: #4758AB;">element</span>(; radius <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span>)</span>
<span id="cb3-58">    <span class="fu" style="color: #4758AB;">circle</span>(O, radius, <span class="op" style="color: #5E5E5E;">:</span>fill) <span class="co" style="color: #5E5E5E;"># The 4 is to make the circle not so small</span></span>
<span id="cb3-59"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb3-60"></span>
<span id="cb3-61"><span class="co" style="color: #5E5E5E;"># Cross:</span></span>
<span id="cb3-62"><span class="kw" style="color: #003B4F;">function</span> <span class="fu" style="color: #4758AB;">cross</span>(color<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"black"</span>;orientation<span class="op" style="color: #5E5E5E;">=:</span>horizontal)</span>
<span id="cb3-63">    <span class="fu" style="color: #4758AB;">sethue</span>(color)</span>
<span id="cb3-64">    <span class="fu" style="color: #4758AB;">setline</span>(<span class="fl" style="color: #AD0000;">10</span>)</span>
<span id="cb3-65">    <span class="cf" style="color: #003B4F;">if</span> orientation<span class="op" style="color: #5E5E5E;">==:</span>horizontal</span>
<span id="cb3-66">        out <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">line</span>(<span class="fu" style="color: #4758AB;">Point</span>(<span class="op" style="color: #5E5E5E;">-</span>size,<span class="fl" style="color: #AD0000;">0</span>),<span class="fu" style="color: #4758AB;">Point</span>(size,<span class="fl" style="color: #AD0000;">0</span>), <span class="op" style="color: #5E5E5E;">:</span>stroke)</span>
<span id="cb3-67">    <span class="cf" style="color: #003B4F;">else</span></span>
<span id="cb3-68">        out <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">line</span>(<span class="fu" style="color: #4758AB;">Point</span>(<span class="fl" style="color: #AD0000;">0</span>,<span class="op" style="color: #5E5E5E;">-</span>size),<span class="fu" style="color: #4758AB;">Point</span>(<span class="fl" style="color: #AD0000;">0</span>,size), <span class="op" style="color: #5E5E5E;">:</span>stroke)</span>
<span id="cb3-69">    <span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb3-70">    <span class="cf" style="color: #003B4F;">return</span> out</span>
<span id="cb3-71"><span class="kw" style="color: #003B4F;">end</span></span>
<span id="cb3-72"></span>
<span id="cb3-73"><span class="cf" style="color: #003B4F;">for</span> (i, frame_start) <span class="kw" style="color: #003B4F;">in</span> <span class="fu" style="color: #4758AB;">enumerate</span>(<span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">10</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">40</span>)</span>
<span id="cb3-74"></span>
<span id="cb3-75">    <span class="co" style="color: #5E5E5E;"># Julia circles:</span></span>
<span id="cb3-76">    blob <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Object</span>(frame_start<span class="op" style="color: #5E5E5E;">:</span>n_total, (args<span class="op" style="color: #5E5E5E;">...</span>;radius<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">1</span>) <span class="op" style="color: #5E5E5E;">-&gt;</span> <span class="fu" style="color: #4758AB;">element</span>(;radius<span class="op" style="color: #5E5E5E;">=</span>radius))</span>
<span id="cb3-77">    <span class="fu" style="color: #4758AB;">act!</span>(blob, <span class="fu" style="color: #4758AB;">Action</span>(<span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fu" style="color: #4758AB;">Int</span>(<span class="fu" style="color: #4758AB;">round</span>(n_frames<span class="op" style="color: #5E5E5E;">*</span><span class="fl" style="color: #AD0000;">0.25</span>)), <span class="fu" style="color: #4758AB;">change</span>(<span class="op" style="color: #5E5E5E;">:</span>radius, <span class="fl" style="color: #AD0000;">1</span> <span class="op" style="color: #5E5E5E;">=&gt;</span> <span class="fl" style="color: #AD0000;">75</span>))) <span class="co" style="color: #5E5E5E;"># scale up</span></span>
<span id="cb3-78">    <span class="fu" style="color: #4758AB;">act!</span>(blob, <span class="fu" style="color: #4758AB;">Action</span>(n_frames<span class="op" style="color: #5E5E5E;">:</span>(n_frames<span class="op" style="color: #5E5E5E;">+</span><span class="fl" style="color: #AD0000;">50</span>), <span class="fu" style="color: #4758AB;">change</span>(<span class="op" style="color: #5E5E5E;">:</span>radius, <span class="fl" style="color: #AD0000;">75</span> <span class="op" style="color: #5E5E5E;">=&gt;</span> <span class="fl" style="color: #AD0000;">250</span>))) <span class="co" style="color: #5E5E5E;"># scale up further</span></span>
<span id="cb3-79">    <span class="fu" style="color: #4758AB;">act!</span>(blob, <span class="fu" style="color: #4758AB;">Action</span>(<span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">30</span>, translate_anim, <span class="fu" style="color: #4758AB;">translate</span>()))</span>
<span id="cb3-80">    <span class="fu" style="color: #4758AB;">act!</span>(blob, <span class="fu" style="color: #4758AB;">Action</span>(<span class="fl" style="color: #AD0000;">31</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">120</span>, <span class="fu" style="color: #4758AB;">rotate_anim</span>(i, n_colours), <span class="fu" style="color: #4758AB;">rotate_around</span>(<span class="fu" style="color: #4758AB;">Point</span>(<span class="fu" style="color: #4758AB;">-</span>(size<span class="op" style="color: #5E5E5E;">*</span>radius_factor), <span class="fl" style="color: #AD0000;">0</span>))))</span>
<span id="cb3-81">    <span class="fu" style="color: #4758AB;">act!</span>(blob, <span class="fu" style="color: #4758AB;">Action</span>(<span class="fl" style="color: #AD0000;">121</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">150</span>, translate_back_anim, <span class="fu" style="color: #4758AB;">translate</span>()))</span>
<span id="cb3-82">    <span class="fu" style="color: #4758AB;">act!</span>(blob, <span class="fu" style="color: #4758AB;">Action</span>(<span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span><span class="fl" style="color: #AD0000;">150</span>, <span class="fu" style="color: #4758AB;">color_anim</span>(julia_colours[colour_order[i]]), <span class="fu" style="color: #4758AB;">sethue</span>()))</span>
<span id="cb3-83"></span>
<span id="cb3-84">    <span class="co" style="color: #5E5E5E;"># Quarto cross:</span></span>
<span id="cb3-85">    cross_h <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Object</span>((n_frames<span class="op" style="color: #5E5E5E;">+</span><span class="fl" style="color: #AD0000;">50</span>)<span class="op" style="color: #5E5E5E;">:</span>n_total, (args<span class="op" style="color: #5E5E5E;">...</span>) <span class="op" style="color: #5E5E5E;">-&gt;</span> <span class="fu" style="color: #4758AB;">cross</span>(;orientation<span class="op" style="color: #5E5E5E;">=:</span>horizontal))</span>
<span id="cb3-86">    cross_v <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Object</span>((n_frames<span class="op" style="color: #5E5E5E;">+</span><span class="fl" style="color: #AD0000;">50</span>)<span class="op" style="color: #5E5E5E;">:</span>n_total, (args<span class="op" style="color: #5E5E5E;">...</span>) <span class="op" style="color: #5E5E5E;">-&gt;</span> <span class="fu" style="color: #4758AB;">cross</span>(;orientation<span class="op" style="color: #5E5E5E;">=:</span>vertical))</span>
<span id="cb3-87"><span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb3-88"></span>
<span id="cb3-89"><span class="fu" style="color: #4758AB;">render</span>(</span>
<span id="cb3-90">    video;</span>
<span id="cb3-91">    pathname <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">joinpath</span>(www_path, <span class="st" style="color: #20794D;">"intro.gif"</span>),</span>
<span id="cb3-92">)</span></code></pre></div>
</div>
</section>
<section id="working-with-documenter.jl-and-quarto" class="level4">
<h4 class="anchored" data-anchor-id="working-with-documenter.jl-and-quarto">Working with <code>Documenter.jl</code> and Quarto</h4>
<p>An interesting application of Quarto in the Julia ecosystem is package documentation. This is of course best done using <code>Documenter.jl</code> and fortunately the two play nicely with each other, since both share a common ground (Markdown). Their interaction is perhaps best demonstrated through this Julia library I recently developed: <a href="https://github.com/pat-alt/CounterfactualExplanations.jl"><code>CounterfactualExplanatinos.jl</code></a>. On there you will find lot of Julia scripts <code>*.jl</code> under <code>src/</code> and <code>test/</code>, as well as many Markdown <code>.md</code> and Quarto documents <code>.qmd</code> under <code>docs</code>. I <em>wrote</em> the package documentation in the Quarto documents, <em>rendered</em> documents individually through <code>quarto render [doc].qmd</code> and then fed the resulting Markdown documents to <code>Documenter.jl</code> as always.</p>
<p>Below is my standard YAML header for those Quarto documents:</p>
<div class="sourceCode" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><span class="fu" style="color: #4758AB;">format</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span></span>
<span id="cb4-2"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">commonmark</span><span class="kw" style="color: #003B4F;">:</span></span>
<span id="cb4-3"><span class="at" style="color: #657422;">    </span><span class="fu" style="color: #4758AB;">variant</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> -raw_html</span></span>
<span id="cb4-4"><span class="at" style="color: #657422;">    </span><span class="fu" style="color: #4758AB;">wrap</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> none</span></span>
<span id="cb4-5"><span class="at" style="color: #657422;">    </span><span class="fu" style="color: #4758AB;">self-contained</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span><span class="ch" style="color: #20794D;">true</span></span>
<span id="cb4-6"><span class="fu" style="color: #4758AB;">crossref</span><span class="kw" style="color: #003B4F;">:</span></span>
<span id="cb4-7"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">fig-prefix</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> Figure</span></span>
<span id="cb4-8"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">tbl-prefix</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> Table</span></span>
<span id="cb4-9"><span class="fu" style="color: #4758AB;">bibliography</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> https://raw.githubusercontent.com/pat-alt/bib/main/bib.bib</span></span>
<span id="cb4-10"><span class="fu" style="color: #4758AB;">output</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> asis</span></span>
<span id="cb4-11"><span class="fu" style="color: #4758AB;">execute</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span></span>
<span id="cb4-12"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">echo</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span><span class="ch" style="color: #20794D;">true</span></span>
<span id="cb4-13"><span class="at" style="color: #657422;">  </span><span class="fu" style="color: #4758AB;">eval</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> </span><span class="ch" style="color: #20794D;">false</span></span>
<span id="cb4-14"><span class="fu" style="color: #4758AB;">jupyter</span><span class="kw" style="color: #003B4F;">:</span><span class="at" style="color: #657422;"> julia-1.7</span></span></code></pre></div>
<p>You can see that it points to Bibtex file I host on another Github repository. This makes it very easy to generate citations and references for the rendered Markdown documents, that also show up in the docs (e.g.&nbsp;<a href="https://www.paltmeyer.com/CounterfactualExplanations.jl/stable/cats_dogs/">here</a>). Unfortunately, cross-referencing only partially works, because it relies on auto-generated HTML and <code>Documenter.jl</code> expects this to be passed in blocks. Choosing <code>variant: -raw_html</code> is only a workaround as I have discussed <a href="https://github.com/JuliaDocs/Documenter.jl/issues/1778">here</a>. Ideally, <code>Documenter.jl</code> would just accept HTML documents rendered from Quarto, but currently only Markdown documents are accepted by <code>make_docs</code>. Still, if anything this workaround is a nice gimmick that extends the default <code>Documenter.jl</code> functionality, without any hassle involved. Hopefully, this can be improved in the future.</p>
</section>
<section id="using-quarto-for-juliacon-proceedings" class="level4">
<h4 class="anchored" data-anchor-id="using-quarto-for-juliacon-proceedings">Using Quarto for JuliaCon Proceedings</h4>
<p>Another very good use-case for Quarto involves actual scientific publications in journals such as JuliaCon Proceedings. The existing submission process is tailored towards reproducibility and actually involves reviews directly on GitHub, which is fantastic. But currently only submissions in TeX format are accepted, which is not so great. Using Quarto would not only streamline this process further, but also open the JuliaCon Proceedings Journal up to publishing content in different output formats. Quarto docs could be used to still render the traditional PDF. But those same documents could also be used to create interactive versions in HTML. Arguably, the entire journal could probably be built through Quarto.</p>
</section>
</section>
<section id="wrapping-up" class="level2">
<h2 class="anchored" data-anchor-id="wrapping-up">Wrapping up üéó</h2>
<p>In this post I wanted to demonstrate that Quarto might just be the next revolution in scientific publishing. In particular, I hope I have managed to demonstrate its appeal to the Julia community, which I am proud to be part of now that I have managed to branch out of my old R bubble. Please let me hear your thoughts and comments below!</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2022,
  author = {Patrick Altmeyer},
  title = {Julia and {Quarto:} A Match Made in Heaven? üå§},
  date = {22-04-07},
  url = {https://www.paltmeyer.com/blog//blog/posts/julia-and-quarto-a-match-made-in-heaven},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2022" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 22AD. <span>‚ÄúJulia and Quarto: A Match Made in Heaven?
üå§.‚Äù</span> April 7, 22AD. <a href="https://www.paltmeyer.com/blog//blog/posts/julia-and-quarto-a-match-made-in-heaven">https://www.paltmeyer.com/blog//blog/posts/julia-and-quarto-a-match-made-in-heaven</a>.
</div></div></section></div> ]]></description>
  <category>scientific publishing</category>
  <category>Quarto</category>
  <category>Julia</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/julia-and-quarto-a-match-made-in-heaven/index.html</guid>
  <pubDate>Wed, 06 Apr 2022 22:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/julia-and-quarto-a-match-made-in-heaven/www/intro.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Go deep, but also ‚Ä¶ go Bayesian!</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/effortsless-bayesian-dl/index.html</link>
  <description><![CDATA[ 



<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/effortsless-bayesian-dl/www/intro.gif" class="figure-img">
<figcaption class="figure-caption">
A Bayesian Neural Network gradually learns.
</figcaption>
</figure>
</div>
<p>Deep learning has dominated AI research in recent years<sup>1</sup> - but how much promise does it really hold? That is very much an ongoing and increasingly polarising debate that you can follow live on <a href="https://twitter.com/ilyasut/status/1491554478243258368">Twitter</a>. On one side you have optimists like Ilya Sutskever, chief scientist of OpenAI, who believes that large deep neural networks may already be slightly conscious - that‚Äôs ‚Äúmay‚Äù and ‚Äúslightly‚Äù and only if you just go deep enough? On the other side you have prominent skeptics like Judea Pearl who has long since argued that deep learning still boils down to curve fitting - purely associational and not even remotely intelligent <span class="citation" data-cites="pearl2018book">(Pearl and Mackenzie 2018)</span>.</p>
<section id="the-case-for-bayesian-deep-learning" class="level2">
<h2 class="anchored" data-anchor-id="the-case-for-bayesian-deep-learning">The case for Bayesian Deep Learning</h2>
<p>Whatever side of this entertaining twitter dispute you find yourself on, the reality is that deep-learning systems have already been deployed at large scale both in academia and industry. More pressing debates therefore revolve around the trustworthiness of these existing systems. How robust are they and in what way exactly do they arrive at decisions that affect each and every one of us? Robustifying deep neural networks generally involves some form of adversarial training, which is costly, can hurt generalization <span class="citation" data-cites="raghunathan2019adversarial">(Raghunathan et al. 2019)</span> and does ultimately not guarantee stability <span class="citation" data-cites="bastounis2021mathematics">(Bastounis, Hansen, and Vlaƒçiƒá 2021)</span>. With respect to interpretability, surrogate explainers like LIME and SHAP are among the most popular tools, but they too have been shown to lack robustness <span class="citation" data-cites="slack2020fooling">(Slack et al. 2020)</span>.</p>
<p>Exactly why are deep neural networks unstable and in-transparent? Let <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D=%5C%7Bx,y%5C%7D_%7Bn=1%7D%5EN"> denote our feature-label pairs and let <img src="https://latex.codecogs.com/png.latex?f(x;%5Ctheta)=y"> denote some deep neural network specified by its parameters <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Then the first thing to note is that the number of free parameters <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> is typically huge (if you ask Mr Sutskever it really probably cannot be huge enough!). That alone makes it very hard to monitor and interpret the inner workings of deep-learning algorithms. Perhaps more importantly though, the number of parameters <em>relative</em> to the size of <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D"> is generally huge:</p>
<blockquote class="blockquote">
<p>[‚Ä¶] deep neural networks are typically very underspecified by the available data, and [‚Ä¶] parameters [therefore] correspond to a diverse variety of compelling explanations for the data. <span class="citation" data-cites="wilson2020case">(Wilson 2020)</span></p>
</blockquote>
<p>In other words, training a single deep neural network may (and usually does) lead to one random parameter specification that fits the underlying data very well. But in all likelihood there are many other specifications that also fit the data very well. This is both a strength and vulnerability of deep learning: it is a strength because it typically allows us to find one such ‚Äúcompelling explanation‚Äù for the data with ease through stochastic optimization; it is a vulnerability because one has to wonder:</p>
<blockquote class="blockquote">
<p>How compelling is an explanation really if it competes with many other equally compelling, but potentially very different explanations?</p>
</blockquote>
<p>A scenario like this very much calls for treating predictions from deep learning models probabilistically [<span class="citation" data-cites="wilson2020case">Wilson (2020)</span>]<sup>2</sup><sup>3</sup>.</p>
<p>Formally, we are interested in estimating the posterior predictive distribution as the following Bayesian model average (BMA):</p>
<p><img src="https://latex.codecogs.com/png.latex?%0Ap(y%7Cx,%5Cmathcal%7BD%7D)%20=%20%5Cint%20p(y%7Cx,%5Ctheta)p(%5Ctheta%7C%5Cmathcal%7BD%7D)d%5Ctheta%0A"></p>
<p>The integral implies that we essentially need many predictions from many different specifications of <img src="https://latex.codecogs.com/png.latex?%5Ctheta">. Unfortunately, this means more work for us or rather our computers. Fortunately though, researchers have proposed many ingenious ways to approximate the equation above in recent years: <span class="citation" data-cites="gal2016dropout">Gal and Ghahramani (2016)</span> propose using dropout at test time while <span class="citation" data-cites="lakshminarayanan2016simple">Lakshminarayanan, Pritzel, and Blundell (2016)</span> show that averaging over an ensemble of just five models seems to do the trick. Still, despite their simplicity and usefulness these approaches involve additional computational costs compared to training just a single network. As we shall see now though, another promising approach has recently entered the limelight: <strong>Laplace approximation</strong> (LA).</p>
<p>If you have read my <a href="https://towardsdatascience.com/bayesian-logistic-regression-53df017ba90f">previous post</a> on Bayesian Logistic Regression, then the term Laplace should already sound familiar to you. As a matter of fact, we will see that all concepts covered in that previous post can be naturally extended to deep learning. While some of these concepts will be revisited below, I strongly recommend you check out the previous post before reading on here. Without further ado let us now see how LA can be used for truly effortless deep learning.</p>
</section>
<section id="laplace-approximation" class="level2">
<h2 class="anchored" data-anchor-id="laplace-approximation">Laplace Approximation</h2>
<p>While LA was first proposed in the 18th century, it has so far not attracted serious attention from the deep learning community largely because it involves a possibly large Hessian computation. <span class="citation" data-cites="daxberger2021laplace">Daxberger et al. (2021)</span> are on a mission to change the perception that LA has no use in DL: in their <a href="https://arxiv.org/pdf/2106.14806.pdf">NeurIPS 2021 paper</a> they demonstrate empirically that LA can be used to produce Bayesian model averages that are at least at par with existing approaches in terms of uncertainty quantification and out-of-distribution detection and significantly cheaper to compute. They show that recent advancements in autodifferentation can be leveraged to produce fast and accurate approximations of the Hessian and even provide a fully-fledged <a href="https://aleximmer.github.io/Laplace/">Python library</a> that can be used with any pretrained Torch model. For this post, I have built a much less comprehensive, pure-play equivalent of their package in Julia - <a href="https://www.paltmeyer.com/LaplaceRedux.jl/dev/">LaplaceRedux.jl</a> can be used with deep learning models built in <a href="https://fluxml.ai/">Flux.jl</a>, which is Julia‚Äôs main DL library. As in the previous post on Bayesian logistic regression I will rely on Julia code snippits instead of equations to convey the underlying maths. If you‚Äôre curious about the maths, the <a href="https://arxiv.org/pdf/2106.14806.pdf">NeurIPS 2021 paper</a> provides all the detail you need.</p>
<section id="from-bayesian-logistic-regression" class="level3">
<h3 class="anchored" data-anchor-id="from-bayesian-logistic-regression">From Bayesian Logistic Regression ‚Ä¶</h3>
<p>Let‚Äôs recap: in the case of logistic regression we had a assumed a zero-mean Gaussian prior <img src="https://latex.codecogs.com/png.latex?p(%5Cmathbf%7Bw%7D)%20%5Csim%20%5Cmathcal%7BN%7D%20%5Cleft(%20%5Cmathbf%7Bw%7D%20%7C%20%5Cmathbf%7B0%7D,%20%5Csigma_0%5E2%20%5Cmathbf%7BI%7D%20%5Cright)=%5Cmathcal%7BN%7D%20%5Cleft(%20%5Cmathbf%7Bw%7D%20%7C%20%5Cmathbf%7B0%7D,%20%5Cmathbf%7BH%7D_0%5E%7B-1%7D%20%5Cright)"> for the weights that are used to compute logits <img src="https://latex.codecogs.com/png.latex?%5Cmu_n=%5Cmathbf%7Bw%7D%5ET%5Cmathbf%7Bx%7D_n">, which in turn are fed to a sigmoid function to produce probabilities <img src="https://latex.codecogs.com/png.latex?p(y_n=1)=%5Csigma(%5Cmu_n)">. We saw that under this assumption solving the logistic regression problem corresponds to minimizing the following differentiable loss function:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cell(%5Cmathbf%7Bw%7D)=%20-%20%5Csum_%7Bn%7D%5EN%20%5By_n%20%5Clog%20%5Cmu_n%20+%20(1-y_n)%5Clog%20(1-%5Cmu_n)%5D%20+%20%5C%5C%20%5Cfrac%7B1%7D%7B2%7D%20(%5Cmathbf%7Bw%7D-%5Cmathbf%7Bw%7D_0)%5ET%5Cmathbf%7BH%7D_0(%5Cmathbf%7Bw%7D-%5Cmathbf%7Bw%7D_0)%0A"></p>
<p>As our first step towards Bayesian deep learning, we observe the following: the loss function above corresponds to the objective faced by a single-layer artificial neural network with sigmoid activation and weight decay<sup>4</sup>. In other words, regularized logistic regression is equivalent to a very simple neural network architecture and hence it is not surprising that underlying concepts can in theory be applied in much the same way.</p>
<p>So let‚Äôs quickly recap the next core concept: LA relies on the fact that the second-order Taylor expansion of our loss function <img src="https://latex.codecogs.com/png.latex?%5Cell"> evaluated at the <strong>maximum a posteriori</strong> (MAP) estimate <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7B%5Chat%7Bw%7D%7D=%5Carg%5Cmax_%7B%5Cmathbf%7Bw%7D%7D%20p(%5Cmathbf%7Bw%7D%7C%5Cmathcal%7BD%7D)"> amounts to a multi-variate Gaussian distribution. In particular, that Gaussian is centered around the MAP estimate with covariance equal to the inverse Hessian evaluated at the mode <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5CSigma%7D=(%5Cmathbf%7BH%7D(%5Cmathbf%7B%5Chat%7Bw%7D%7D))%5E%7B-1%7D"> <span class="citation" data-cites="murphy2022probabilistic">(Murphy 2022)</span>.</p>
<p>That is basically all there is to the story: if we have a good estimate of <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BH%7D(%5Cmathbf%7B%5Chat%7Bw%7D%7D)"> we have an analytical expression for an (approximate) posterior over parameters. So let‚Äôs go ahead and start by run Bayesian Logistic regression using <a href="https://fluxml.ai/">Flux.jl</a>. We begin by loading some required packages including <a href="https://www.paltmeyer.com/LaplaceRedux.jl/dev/">LaplaceRedux.jl</a>. It ships with a helper function <code>toy_data_linear</code> that creates a toy data set composed of linearly separable samples evenly balanced across the two classes.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><span class="co" style="color: #5E5E5E;"># Import libraries.</span></span>
<span id="cb1-2"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Flux</span>, <span class="bu" style="color: null;">Plots</span>, <span class="bu" style="color: null;">Random</span>, <span class="bu" style="color: null;">PlotThemes</span>, <span class="bu" style="color: null;">Statistics</span>, <span class="bu" style="color: null;">LaplaceRedux</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;">theme</span>(<span class="op" style="color: #5E5E5E;">:</span>wong)</span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;"># Number of points to generate.</span></span>
<span id="cb1-5">xs, y <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">toy_data_linear</span>(<span class="fl" style="color: #AD0000;">100</span>)</span>
<span id="cb1-6">X <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">hcat</span>(xs<span class="op" style="color: #5E5E5E;">...</span>); <span class="co" style="color: #5E5E5E;"># bring into tabular format</span></span>
<span id="cb1-7">data <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">zip</span>(xs,y);</span></code></pre></div>
</div>
<p>Then we proceed to prepare the single-layer neural network with weight decay. The term <img src="https://latex.codecogs.com/png.latex?%5Clambda"> determines the strength of the <img src="https://latex.codecogs.com/png.latex?%5Cell2"> penalty: we regularize parameters <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> more heavily for higher values. Equivalently, we can say that from the Bayesian perspective it governs the strength of the prior <img src="https://latex.codecogs.com/png.latex?p(%5Ctheta)%20%5Csim%20%5Cmathcal%7BN%7D%20%5Cleft(%20%5Ctheta%20%7C%20%5Cmathbf%7B0%7D,%20%5Csigma_0%5E2%20%5Cmathbf%7BI%7D%20%5Cright)=%20%5Cmathcal%7BN%7D%20%5Cleft(%20%5Cmathbf%7Bw%7D%20%7C%20%5Cmathbf%7B0%7D,%20%5Clambda_0%5E%7B-2%7D%20%5Cmathbf%7BI%7D%20%5Cright)">: a higher value of <img src="https://latex.codecogs.com/png.latex?%5Clambda"> indicates a higher conviction about our prior belief that <img src="https://latex.codecogs.com/png.latex?%5Ctheta=%5Cmathbf%7B0%7D">, which is of course equivalent to regularizing more heavily. The exact choice of <img src="https://latex.codecogs.com/png.latex?%5Clambda=0.5"> for this toy example is somewhat arbitrary (it made for good visualizations below). Note that I have used <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> to denote our neural parameters to distinguish the case from Bayesian logistic regression, but we are in fact still solving the same problem.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1">nn <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Chain</span>(<span class="fu" style="color: #4758AB;">Dense</span>(<span class="fl" style="color: #AD0000;">2</span>,<span class="fl" style="color: #AD0000;">1</span>))</span>
<span id="cb2-2">Œª <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0.5</span></span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;">sqnorm</span>(x) <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">sum</span>(abs2, x)</span>
<span id="cb2-4"><span class="fu" style="color: #4758AB;">weight_regularization</span>(Œª<span class="op" style="color: #5E5E5E;">=</span>Œª) <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">/</span><span class="fl" style="color: #AD0000;">2</span> <span class="op" style="color: #5E5E5E;">*</span> Œª<span class="op" style="color: #5E5E5E;">^</span><span class="fl" style="color: #AD0000;">2</span> <span class="op" style="color: #5E5E5E;">*</span> <span class="fu" style="color: #4758AB;">sum</span>(sqnorm, Flux.<span class="fu" style="color: #4758AB;">params</span>(nn))</span>
<span id="cb2-5"><span class="fu" style="color: #4758AB;">loss</span>(x, y) <span class="op" style="color: #5E5E5E;">=</span> Flux.Losses.<span class="fu" style="color: #4758AB;">logitbinarycrossentropy</span>(<span class="fu" style="color: #4758AB;">nn</span>(x), y) <span class="op" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">weight_regularization</span>();</span></code></pre></div>
</div>
<p>Before we apply Laplace approximation we train our model:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><span class="im" style="color: #00769E;">using</span> <span class="bu" style="color: null;">Flux.Optimise</span>: update!, ADAM</span>
<span id="cb3-2">opt <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">ADAM</span>()</span>
<span id="cb3-3">epochs <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">50</span></span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="cf" style="color: #003B4F;">for</span> epoch <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span>epochs</span>
<span id="cb3-6">  <span class="cf" style="color: #003B4F;">for</span> d <span class="kw" style="color: #003B4F;">in</span> data</span>
<span id="cb3-7">    gs <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">gradient</span>(<span class="fu" style="color: #4758AB;">params</span>(nn)) <span class="cf" style="color: #003B4F;">do</span></span>
<span id="cb3-8">      l <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">loss</span>(d<span class="op" style="color: #5E5E5E;">...</span>)</span>
<span id="cb3-9">    <span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb3-10">    <span class="fu" style="color: #4758AB;">update!</span>(opt, <span class="fu" style="color: #4758AB;">params</span>(nn), gs)</span>
<span id="cb3-11">  <span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb3-12"><span class="cf" style="color: #003B4F;">end</span></span></code></pre></div>
</div>
<p>Up until this point we have just followed the standard recipe for training a regularized artificial neural network in <a href="https://fluxml.ai/">Flux.jl</a> for a simple binary classification task. To compute the Laplace approximation using <a href="https://www.paltmeyer.com/LaplaceRedux.jl/dev/">LaplaceRedux.jl</a> we need just two more lines of code:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1">la <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">laplace</span>(nn, Œª<span class="op" style="color: #5E5E5E;">=</span>Œª)</span>
<span id="cb4-2"><span class="fu" style="color: #4758AB;">fit!</span>(la, data);</span></code></pre></div>
</div>
<p>Under the hood the Hessian is approximated through the <strong>empirical Fisher</strong>, which can be computed using only the gradients of our loss function <img src="https://latex.codecogs.com/png.latex?%5Cnabla_%7B%5Ctheta%7D%5Cell(f(%5Cmathbf%7Bx%7D_n;%5Ctheta,y_n))"> where <img src="https://latex.codecogs.com/png.latex?%5C%7B%5Cmathbf%7Bx%7D_n,y_n%5C%7D"> are training data (see <a href="https://arxiv.org/pdf/2106.14806.pdf">NeurIPS 2021 paper</a> for details). Finally, <a href="https://www.paltmeyer.com/LaplaceRedux.jl/dev/">LaplaceRedux.jl</a> ships with a function <code>predict(ùë≥::LaplaceRedux, X::AbstractArray; link_approx=:probit)</code> that computes the posterior predictive using a probit approximation, much like we saw in the previous post. That function is used under the hood of the <code>plot_contour</code> function below to create the right panel of Figure&nbsp;1. It visualizes the posterior predictive distribution in the 2D feature space. For comparison I have added the corresponding plugin estimate as well. Note how for the Laplace approximation the predicted probabilities fan out indicating that confidence decreases in regions scarce of data.</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1">p_plugin <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">plot_contour</span>(X<span class="op" style="color: #5E5E5E;">'</span>,y,la;title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"Plugin"</span>,<span class="kw" style="color: #003B4F;">type</span><span class="op" style="color: #5E5E5E;">=:</span>plugin);</span>
<span id="cb5-2">p_laplace <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">plot_contour</span>(X<span class="op" style="color: #5E5E5E;">'</span>,y,la;title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"Laplace"</span>)</span>
<span id="cb5-3"><span class="co" style="color: #5E5E5E;"># Plot the posterior distribution with a contour plot.</span></span>
<span id="cb5-4">plt <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">plot</span>(p_plugin, p_laplace, layout<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">1</span>,<span class="fl" style="color: #AD0000;">2</span>), size<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">1000</span>,<span class="fl" style="color: #AD0000;">400</span>))</span>
<span id="cb5-5"><span class="fu" style="color: #4758AB;">savefig</span>(plt, <span class="st" style="color: #20794D;">"www/posterior_predictive_logit.png"</span>);</span></code></pre></div>
</div>
<div id="fig-logit" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/effortsless-bayesian-dl/www/posterior_predictive_logit.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Posterior predictive distribution of Logistic regression in the 2D feature space using plugin estimator (left) and Laplace approximation (right).</figcaption><p></p>
</figure>
</div>
</section>
<section id="to-bayesian-neural-networks" class="level3">
<h3 class="anchored" data-anchor-id="to-bayesian-neural-networks">‚Ä¶ to Bayesian Neural Networks</h3>
<p>Now let‚Äôs step it up a notch: we will repeat the exercise from above, but this time for data that is not linearly separable using a simple MLP instead of the single-layer neural network we used above. The code below is almost the same as above, so I will not go through the various steps again.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><span class="co" style="color: #5E5E5E;"># Number of points to generate:</span></span>
<span id="cb6-2">xs, y <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">toy_data_non_linear</span>(<span class="fl" style="color: #AD0000;">200</span>)</span>
<span id="cb6-3">X <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">hcat</span>(xs<span class="op" style="color: #5E5E5E;">...</span>); <span class="co" style="color: #5E5E5E;"># bring into tabular format</span></span>
<span id="cb6-4">data <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">zip</span>(xs,y)</span>
<span id="cb6-5"></span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;"># Build MLP:</span></span>
<span id="cb6-7">n_hidden <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">32</span></span>
<span id="cb6-8">D <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">size</span>(X)[<span class="fl" style="color: #AD0000;">1</span>]</span>
<span id="cb6-9">nn <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">Chain</span>(</span>
<span id="cb6-10">    <span class="fu" style="color: #4758AB;">Dense</span>(D, n_hidden, œÉ),</span>
<span id="cb6-11">    <span class="fu" style="color: #4758AB;">Dense</span>(n_hidden, <span class="fl" style="color: #AD0000;">1</span>)</span>
<span id="cb6-12">)  </span>
<span id="cb6-13">Œª <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0.01</span></span>
<span id="cb6-14"><span class="fu" style="color: #4758AB;">sqnorm</span>(x) <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">sum</span>(abs2, x)</span>
<span id="cb6-15"><span class="fu" style="color: #4758AB;">weight_regularization</span>(Œª<span class="op" style="color: #5E5E5E;">=</span>Œª) <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">/</span><span class="fl" style="color: #AD0000;">2</span> <span class="op" style="color: #5E5E5E;">*</span> Œª<span class="op" style="color: #5E5E5E;">^</span><span class="fl" style="color: #AD0000;">2</span> <span class="op" style="color: #5E5E5E;">*</span> <span class="fu" style="color: #4758AB;">sum</span>(sqnorm, Flux.<span class="fu" style="color: #4758AB;">params</span>(nn))</span>
<span id="cb6-16"><span class="fu" style="color: #4758AB;">loss</span>(x, y) <span class="op" style="color: #5E5E5E;">=</span> Flux.Losses.<span class="fu" style="color: #4758AB;">logitbinarycrossentropy</span>(<span class="fu" style="color: #4758AB;">nn</span>(x), y) <span class="op" style="color: #5E5E5E;">+</span> <span class="fu" style="color: #4758AB;">weight_regularization</span>()</span>
<span id="cb6-17"></span>
<span id="cb6-18"><span class="co" style="color: #5E5E5E;"># Training:</span></span>
<span id="cb6-19">epochs <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">200</span></span>
<span id="cb6-20"><span class="cf" style="color: #003B4F;">for</span> epoch <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">:</span>epochs</span>
<span id="cb6-21">  <span class="cf" style="color: #003B4F;">for</span> d <span class="kw" style="color: #003B4F;">in</span> data</span>
<span id="cb6-22">    gs <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">gradient</span>(<span class="fu" style="color: #4758AB;">params</span>(nn)) <span class="cf" style="color: #003B4F;">do</span></span>
<span id="cb6-23">      l <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">loss</span>(d<span class="op" style="color: #5E5E5E;">...</span>)</span>
<span id="cb6-24">    <span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb6-25">    <span class="fu" style="color: #4758AB;">update!</span>(opt, <span class="fu" style="color: #4758AB;">params</span>(nn), gs)</span>
<span id="cb6-26">  <span class="cf" style="color: #003B4F;">end</span></span>
<span id="cb6-27"><span class="cf" style="color: #003B4F;">end</span></span></code></pre></div>
</div>
<p>Fitting the Laplace approximation is also analogous, but note that this we have added an argument: <code>subset_of_weights=:last_layer</code>. This specifies that we only want to use the parameters of the last layer of our MLP. While we could have used all of them (<code>subset_of_weights=:all</code>), <span class="citation" data-cites="daxberger2021laplace">Daxberger et al. (2021)</span> find that the last-layer Laplace approximation produces satisfying results, while be computationally cheaper. Figure&nbsp;2 demonstrates that once again the Laplace approximation yields a posterior predictive distribution that is more conservative than the over-confident plugin estimate.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1">la <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">laplace</span>(nn, Œª<span class="op" style="color: #5E5E5E;">=</span>Œª, subset_of_weights<span class="op" style="color: #5E5E5E;">=:</span>last_layer)</span>
<span id="cb7-2"><span class="fu" style="color: #4758AB;">fit!</span>(la, data);</span>
<span id="cb7-3">p_plugin <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">plot_contour</span>(X<span class="op" style="color: #5E5E5E;">'</span>,y,la;title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"Plugin"</span>,<span class="kw" style="color: #003B4F;">type</span><span class="op" style="color: #5E5E5E;">=:</span>plugin)</span>
<span id="cb7-4">p_laplace <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">plot_contour</span>(X<span class="op" style="color: #5E5E5E;">'</span>,y,la;title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"Laplace"</span>)</span>
<span id="cb7-5"><span class="co" style="color: #5E5E5E;"># Plot the posterior distribution with a contour plot.</span></span>
<span id="cb7-6">plt <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">plot</span>(p_plugin, p_laplace, layout<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">1</span>,<span class="fl" style="color: #AD0000;">2</span>), size<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">1000</span>,<span class="fl" style="color: #AD0000;">400</span>))</span>
<span id="cb7-7"><span class="fu" style="color: #4758AB;">savefig</span>(plt, <span class="st" style="color: #20794D;">"www/posterior_predictive_mlp.png"</span>);</span></code></pre></div>
</div>
<div id="fig-mlp" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/effortsless-bayesian-dl/www/posterior_predictive_mlp.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Posterior predictive distribution of MLP in the 2D feature space using plugin estimator (left) and Laplace approximation (right).</figcaption><p></p>
</figure>
</div>
<p>To see why this is a desirable outcome consider the zoomed out version of Figure&nbsp;2 below: the plugin estimator classifies with full confidence in regions completely scarce of any data. Arguably Laplace approximation produces a much more reasonable picture, even though it too could likely be improved by fine-tuning our choice of <img src="https://latex.codecogs.com/png.latex?%5Clambda"> and the neural network architecture.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1">zoom<span class="op" style="color: #5E5E5E;">=-</span><span class="fl" style="color: #AD0000;">50</span></span>
<span id="cb8-2">p_plugin <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">plot_contour</span>(X<span class="op" style="color: #5E5E5E;">'</span>,y,la;title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"Plugin"</span>,<span class="kw" style="color: #003B4F;">type</span><span class="op" style="color: #5E5E5E;">=:</span>plugin,zoom<span class="op" style="color: #5E5E5E;">=</span>zoom);</span>
<span id="cb8-3">p_laplace <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">plot_contour</span>(X<span class="op" style="color: #5E5E5E;">'</span>,y,la;title<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">"Laplace"</span>,zoom<span class="op" style="color: #5E5E5E;">=</span>zoom);</span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;"># Plot the posterior distribution with a contour plot.</span></span>
<span id="cb8-5">plt <span class="op" style="color: #5E5E5E;">=</span> <span class="fu" style="color: #4758AB;">plot</span>(p_plugin, p_laplace, layout<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">1</span>,<span class="fl" style="color: #AD0000;">2</span>), size<span class="op" style="color: #5E5E5E;">=</span>(<span class="fl" style="color: #AD0000;">1000</span>,<span class="fl" style="color: #AD0000;">400</span>));</span>
<span id="cb8-6"><span class="fu" style="color: #4758AB;">savefig</span>(plt, <span class="st" style="color: #20794D;">"www/posterior_predictive_mlp_zoom.png"</span>);</span></code></pre></div>
</div>
<div id="fig-mlp-zoom" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/effortsless-bayesian-dl/www/posterior_predictive_mlp_zoom.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Posterior predictive distribution of MLP in the 2D feature space using plugin estimator (left) and Laplace approximation (right). Zoomed out.</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="wrapping-up" class="level2">
<h2 class="anchored" data-anchor-id="wrapping-up">Wrapping up</h2>
<p>Recent state-of-the-art research on neural information processing suggests that Bayesian deep learning can be effortless: Laplace approximation for deep neural networks appears to work very well and it does so at minimal computational cost <span class="citation" data-cites="daxberger2021laplace">(Daxberger et al. 2021)</span>. This is great news, because the case for turning Bayesian is strong: society increasingly relies on complex automated decision-making systems that need to be trustworthy. More and more of these systems involve deep learning which in and of itself is not trustworthy. We have seen that typically there exist various viable parameterizations of deep neural networks each with their own distinct and compelling explanation for the data at hand. When faced with many viable options, don‚Äôt put all of your eggs in one basket. In other words, go Bayesian!</p>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<p>To get started with Bayesian deep learning I have found many useful and free resources online, some of which are listed below:</p>
<ul>
<li><a href="https://turing.ml/dev/tutorials/03-bayesian-neural-network/"><code>Turing.jl</code> tutorial</a> on Bayesian deep learning in Julia.</li>
<li>Various RStudio AI blog posts including <a href="https://blogs.rstudio.com/ai/posts/2018-11-12-uncertainty_estimates_dropout/">this one</a> and <a href="https://blogs.rstudio.com/ai/posts/2019-06-05-uncertainty-estimates-tfprobability/">this one</a>.</li>
<li><a href="https://medium.com/tensorflow/regression-with-probabilistic-layers-in-tensorflow-probability-e46ff5d37baf">TensorFlow blog post</a> on regression with probabilistic layers.</li>
<li>Kevin Murphy‚Äôs <a href="https://probml.github.io/pml-book/book1.html">draft text book</a>, now also available as print.</li>
</ul>
</section>
<section id="references" class="level2">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-bastounis2021mathematics" class="csl-entry">
Bastounis, Alexander, Anders C Hansen, and Verner Vlaƒçiƒá. 2021. <span>‚ÄúThe Mathematics of Adversarial Attacks in <span>AI</span>‚Äì<span>Why</span> Deep Learning Is Unstable Despite the Existence of Stable Neural Networks.‚Äù</span> <a href="https://arxiv.org/abs/2109.06098">https://arxiv.org/abs/2109.06098</a>.
</div>
<div id="ref-daxberger2021laplace" class="csl-entry">
Daxberger, Erik, Agustinus Kristiadi, Alexander Immer, Runa Eschenhagen, Matthias Bauer, and Philipp Hennig. 2021. <span>‚ÄúLaplace <span>Redux-Effortless Bayesian Deep Learning</span>.‚Äù</span> <em>Advances in Neural Information Processing Systems</em> 34.
</div>
<div id="ref-gal2016dropout" class="csl-entry">
Gal, Yarin, and Zoubin Ghahramani. 2016. <span>‚ÄúDropout as a Bayesian Approximation: <span>Representing</span> Model Uncertainty in Deep Learning.‚Äù</span> In <em>International Conference on Machine Learning</em>, 1050‚Äì59. <span>PMLR</span>.
</div>
<div id="ref-lakshminarayanan2016simple" class="csl-entry">
Lakshminarayanan, Balaji, Alexander Pritzel, and Charles Blundell. 2016. <span>‚ÄúSimple and Scalable Predictive Uncertainty Estimation Using Deep Ensembles.‚Äù</span> <a href="https://arxiv.org/abs/1612.01474">https://arxiv.org/abs/1612.01474</a>.
</div>
<div id="ref-murphy2022probabilistic" class="csl-entry">
Murphy, Kevin P. 2022. <em>Probabilistic <span>Machine Learning</span>: <span>An</span> Introduction</em>. <span>MIT Press</span>.
</div>
<div id="ref-pearl2018book" class="csl-entry">
Pearl, Judea, and Dana Mackenzie. 2018. <em>The Book of Why: The New Science of Cause and Effect</em>. <span>Basic books</span>.
</div>
<div id="ref-raghunathan2019adversarial" class="csl-entry">
Raghunathan, Aditi, Sang Michael Xie, Fanny Yang, John C Duchi, and Percy Liang. 2019. <span>‚ÄúAdversarial Training Can Hurt Generalization.‚Äù</span> <a href="https://arxiv.org/abs/1906.06032">https://arxiv.org/abs/1906.06032</a>.
</div>
<div id="ref-slack2020fooling" class="csl-entry">
Slack, Dylan, Sophie Hilgard, Emily Jia, Sameer Singh, and Himabindu Lakkaraju. 2020. <span>‚ÄúFooling Lime and Shap: <span>Adversarial</span> Attacks on Post Hoc Explanation Methods.‚Äù</span> In <em>Proceedings of the <span>AAAI</span>/<span>ACM Conference</span> on <span>AI</span>, <span>Ethics</span>, and <span>Society</span></em>, 180‚Äì86.
</div>
<div id="ref-wilson2020case" class="csl-entry">
Wilson, Andrew Gordon. 2020. <span>‚ÄúThe Case for <span>Bayesian</span> Deep Learning.‚Äù</span> <a href="https://arxiv.org/abs/2001.10995">https://arxiv.org/abs/2001.10995</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>See for example <a href="https://www.technologyreview.com/2019/01/25/1436/we-analyzed-16625-papers-to-figure-out-where-ai-is-headed-next/">this article</a> in the MIT Technology Review‚Ü©Ô∏é</p></li>
<li id="fn2"><p>In fact, not treating probabilistic deep learning models as such is sheer madness because remember that the underlying parameters <img src="https://latex.codecogs.com/png.latex?%5Ctheta"> are random variables. Frequentists and Bayesians alike will tell you that relying on a single point estimate of random variables is just nuts!‚Ü©Ô∏é</p></li>
<li id="fn3"><p>Proponents of Causal AI like Judea Pearl would argue that the Bayesian treatment still does not go far enough: in their view model explanations can only be truly compelling if they are causally found.‚Ü©Ô∏é</p></li>
<li id="fn4"><p>See this <a href="https://stats.stackexchange.com/a/500973/288736">answer</a> on Stack Exchange for a detailed discussion.‚Ü©Ô∏é</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2022,
  author = {Patrick Altmeyer},
  title = {Go Deep, but Also ... Go {Bayesian!}},
  date = {22-02-18},
  url = {https://www.paltmeyer.com/blog//blog/posts/effortsless-bayesian-dl},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2022" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 22AD. <span>‚ÄúGo Deep, but Also ... Go
Bayesian!‚Äù</span> February 18, 22AD. <a href="https://www.paltmeyer.com/blog//blog/posts/effortsless-bayesian-dl">https://www.paltmeyer.com/blog//blog/posts/effortsless-bayesian-dl</a>.
</div></div></section></div> ]]></description>
  <category>bayes</category>
  <category>deep learning</category>
  <category>Julia</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/effortsless-bayesian-dl/index.html</guid>
  <pubDate>Thu, 17 Feb 2022 23:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/effortsless-bayesian-dl/www/intro.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Bayesian Logistic Regression</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/bayesian-logit/index.html</link>
  <description><![CDATA[ 



<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">

</div>
<section id="uncertainty" class="level2">
<h2 class="anchored" data-anchor-id="uncertainty">Uncertainty</h2>
<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/bayesian-logit/www/intro.gif" class="figure-img">
<figcaption class="figure-caption">
Simulation of changing parameter distribution.
</figcaption>
</figure>
</div>
<p>If you‚Äôve ever searched for evaluation metrics to assess model accuracy, chances are that you found many different options to choose from (too many?). Accuracy is in some sense the holy grail of prediction so it‚Äôs not at all surprising that the machine learning community spends a lot time thinking about it. In a world where more and more high-stake decisions are being automated, model accuracy is in fact a very valid concern.</p>
<p>But does this recipe for model evaluation seem like a sound and complete approach to automated decision-making? Haven‚Äôt we forgot anything? Some would argue that we need to pay more attention to <strong>model uncertainty</strong>. No matter how many times you have cross-validated your model, the loss metric that it is being optimized against as well as its parameters and predictions remain inherently random variables. Focusing merely on prediction accuracy and ignoring uncertainty altogether can install a false level of confidence in automated decision-making systems. Any <strong>trustworthy</strong> approach to learning from data should therefore at the very least be transparent about its own uncertainty.</p>
<p>How can we estimate uncertainty around model parameters and predictions? <strong>Frequentist</strong> methods for uncertainty quantification generally involve either closed-form solutions based on asymptotic theory or bootstrapping (see for example <a href="https://web.stanford.edu/class/archive/stats/stats200/stats200.1172/Lecture26.pdf">here</a> for the case of logistic regression). In Bayesian statistics and machine learning we are instead concerned with modelling the <strong>posterior distribution</strong> over model parameters. This approach to uncertainty quantification is known as <strong>Bayesian Inference</strong> because we treat model parameters in a Bayesian way: we make assumptions about their distribution based on <strong>prior</strong> knowledge or beliefs and update these beliefs in light of new evidence. The frequentist approach avoids the need for being explicit about prior beliefs, which in the past has sometimes been considered as <em>un</em>scientific. However, frequentist methods come with their own assumptions and pitfalls (see for example <span class="citation" data-cites="murphy2012machine">Murphy (2012)</span>) for a discussion). Without diving further into this argument, let us now see how <strong>Bayesian Logistic Regression</strong> can be implemented from the bottom up.</p>
</section>
<section id="the-ground-truth" class="level2">
<h2 class="anchored" data-anchor-id="the-ground-truth">The ground truth</h2>
<div class="cell" data-layout-align="center">

</div>
<p>In this post we will work with a synthetic toy data set <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D"> composed of <img src="https://latex.codecogs.com/png.latex?N"> binary labels <img src="https://latex.codecogs.com/png.latex?y_n%5Cin%5C%7B0,1%5C%7D"> and corresponding feature vectors <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bx%7D_n%5Cin%20%5Cmathbb%7BR%7D%5ED">. Working with synthetic data has the benefit that we have control over the <strong>ground truth</strong> that generates our data. In particular, we will assume that the binary labels <img src="https://latex.codecogs.com/png.latex?y_n"> are generated by a logistic regression model</p>
<p><span id="eq-logreg"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20p(y_n%7C%5Cmathbf%7Bx%7D_n;%5Cmathbf%7Bw%7D)&amp;%5Csim%5Ctext%7BBer%7D(y_n%7C%5Csigma(%5Cmathbf%7Bw%7D%5ET%5Cmathbf%7Bx%7D_n))%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B1%7D"></span></p>
<p>where <img src="https://latex.codecogs.com/png.latex?%5Csigma(a)=1/(1+e%5E%7B-a%7D)"> is the <strong>sigmoid</strong> or <strong>logit</strong> function <span class="citation" data-cites="murphy2022probabilistic">(Murphy 2022)</span>.<sup>1</sup> Features are generated from a mixed Gaussian model.</p>
<p>To add a little bit of life to our example we will assume that the binary labels classify samples into cats and dogs, based on their height and tail length. Figure&nbsp;1 shows the synthetic data in the two-dimensional feature domain. Following an introduction to Bayesian Logistic Regression in the next section we will use the synthetic data <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D"> to estimate our model.</p>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-ground" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/bayesian-logit/index_files/figure-html/fig-ground-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Ground truth labels.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="the-maths" class="level2">
<h2 class="anchored" data-anchor-id="the-maths">The maths</h2>
<p>Estimation usually boils down to finding the vector of parameters <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cmathbf%7Bw%7D%7D"> that maximizes the likelihood of observing <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D"> under the assumed model. That estimate can then be used to compute predictions for some new unlabelled data set <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D=%5C%7Bx_m:m=1,...,M%5C%7D">.</p>
<section id="problem-setup" class="level3">
<h3 class="anchored" data-anchor-id="problem-setup">Problem setup</h3>
<p>The starting point for Bayesian Logistic Regression is <strong>Bayes‚Äô Theorem</strong>:</p>
<p><span id="eq-posterior"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20p(%5Cmathbf%7Bw%7D%7C%5Cmathcal%7BD%7D)&amp;%5Cpropto%20p(%5Cmathcal%7BD%7D%7C%5Cmathbf%7Bw%7D)p(%5Cmathbf%7Bw%7D)%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B2%7D"></span></p>
<p>Formally, this says that the posterior distribution of parameters <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D"> is proportional to the product of the likelihood of observing <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D"> given <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D"> and the prior density of <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D">. Applied to our context this can intuitively be understood as follows: our posterior beliefs around <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D"> are formed by both our prior beliefs and the evidence we observe. Yet another way to look at this is that maximising Equation&nbsp;2 with respect to <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D"> corresponds to maximum likelihood estimation regularized by prior beliefs (we will come back to this).</p>
<p>Under the assumption that individual label-feature pairs are <strong>independently</strong> and <strong>identically</strong> distributed, their joint likelihood is simply the product over their individual densities. The prior beliefs around <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D"> are at our discretion. In practice they may be derived from previous experiments. Here we will use a zero-mean spherical Gaussian prior for reasons explained further below. To sum this up we have</p>
<p><span id="eq-prior"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20p(%5Cmathcal%7BD%7D%7C%5Cmathbf%7Bw%7D)&amp;%20%5Csim%20%5Cprod_%7Bn=1%7D%5EN%20p(y_n%7C%5Cmathbf%7Bx%7D_n;%5Cmathbf%7Bw%7D)%5C%5C%0A&amp;&amp;%20p(%5Cmathbf%7Bw%7D)&amp;%20%5Csim%20%5Cmathcal%7BN%7D%20%5Cleft(%20%5Cmathbf%7Bw%7D%20%7C%20%5Cmathbf%7Bw%7D_0,%20%5CSigma_0%20%5Cright)%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B3%7D"></span></p>
<p>with <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D_0=%5Cmathbf%7B0%7D"> and <img src="https://latex.codecogs.com/png.latex?%5CSigma_0=%5Csigma%5E2%5Cmathbf%7BI%7D">. Plugging this into Bayes‚Äô rule we finally have</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20p(%5Cmathbf%7Bw%7D%7C%5Cmathcal%7BD%7D)&amp;%5Cpropto%5Cprod_%7Bn=1%7D%5EN%20%5Ctext%7BBer%7D(y_n%7C%5Csigma(%5Cmathbf%7Bw%7D%5ET%5Cmathbf%7Bx%7D_n))%5Cmathcal%7BN%7D%20%5Cleft(%20%5Cmathbf%7Bw%7D%20%7C%20%5Cmathbf%7Bw%7D_0,%20%5CSigma_0%20%5Cright)%20%5C%5C%0A%5Cend%7Baligned%7D%0A"></p>
<p>Unlike with linear regression there are no closed-form analytical solutions to estimating or maximising this posterior, but fortunately accurate approximations do exist <span class="citation" data-cites="murphy2022probabilistic">(Murphy 2022)</span>. One of the simplest approaches called <strong>Laplace Approximation</strong> is straight-forward to implement and computationally very efficient. It relies on the observation that under the assumption of a Gaussian prior, the posterior of logistic regression is also approximately Gaussian: in particular, this Gaussian distribution is centered around the <strong>maximum a posteriori</strong> (MAP) estimate <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cmathbf%7Bw%7D%7D=%5Carg%5Cmax_%7B%5Cmathbf%7Bw%7D%7D%20p(%5Cmathbf%7Bw%7D%7C%5Cmathcal%7BD%7D)"> with a covariance matrix equal to the inverse Hessian evaluated at the mode <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5CSigma%7D=(%5Cmathbf%7BH%7D(%5Chat%7B%5Cmathbf%7Bw%7D%7D))%5E%7B-1%7D">. With that in mind, finding <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cmathbf%7Bw%7D%7D"> seems like a natural next step.</p>
</section>
<section id="solving-the-problem" class="level3">
<h3 class="anchored" data-anchor-id="solving-the-problem">Solving the problem</h3>
<p>In practice we do not maximize the posterior <img src="https://latex.codecogs.com/png.latex?p(%5Cmathbf%7Bw%7D%7C%5Cmathcal%7BD%7D)"> directly. Instead we minimize the negative log likelihood, which is an equivalent optimization problem and easier to implement. In Equation&nbsp;4 below I have denoted the negative log likelihood as <img src="https://latex.codecogs.com/png.latex?%5Cell(%5Cmathbf%7Bw%7D)"> indicating that this is the <strong>loss function</strong> we aim to minimize. The following two lines in Equation&nbsp;4 show the gradient and Hessian - so the first- and second-order derivatives of <img src="https://latex.codecogs.com/png.latex?%5Cell"> with respect to <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D"> - where <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BH%7D_0=%5CSigma_0%5E%7B-1%7D"> and <img src="https://latex.codecogs.com/png.latex?%5Cmu_n=%5Csigma(%5Cmathbf%7Bw%7D%5ET%5Cmathbf%7Bx%7D_n)">. To understand how exactly the gradient and Hessian are derived see for example chapter 10 in <span class="citation" data-cites="murphy2022probabilistic">Murphy (2022)</span>.<sup>2</sup>.</p>
<p><span id="eq-likeli"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Cell(%5Cmathbf%7Bw%7D)&amp;=-%20%5Csum_%7Bn=1%7D%5E%7BN%7D%20%5By_n%20%5Clog%20%5Cmu_n%20+%20(1-y_n)%5Clog%20(1-%5Cmu_n)%5D%20+%20%5Cfrac%7B1%7D%7B2%7D%20(%5Cmathbf%7Bw%7D-%5Cmathbf%7Bw%7D_0)%5ET%5Cmathbf%7BH%7D_0(%5Cmathbf%7Bw%7D-%5Cmathbf%7Bw%7D_0)%20%5C%5C%0A&amp;&amp;%20%5Cnabla_%7B%5Cmathbf%7Bw%7D%7D%5Cell(%5Cmathbf%7Bw%7D)&amp;=%20%5Csum_%7Bn=1%7D%5E%7BN%7D%20(%5Cmu_n-y_n)%20%5Cmathbf%7Bx%7D_n%20+%20%5Cmathbf%7BH%7D_0(%5Cmathbf%7Bw%7D-%5Cmathbf%7Bw%7D_0)%20%5C%5C%0A&amp;&amp;%20%5Cnabla%5E2_%7B%5Cmathbf%7Bw%7D%7D%5Cell(%5Cmathbf%7Bw%7D)&amp;=%20%5Csum_%7Bn=1%7D%5E%7BN%7D%20(%5Cmu_n-y_n)%20%5Cleft(%20%5Cmu_n(1-%5Cmu_n)%20%5Cmathbf%7Bx%7D_n%20%5Cmathbf%7Bx%7D_n%5ET%20%5Cright)%20+%20%5Cmathbf%7BH%7D_0%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B4%7D"></span></p>
<div class="sidenote">
<p><strong>SIDENOTE</strong> üí°</p>
<p>Note how earlier I mentioned that maximising the posterior likelihood can be seen as regularized maximum likelihood estimation. We can now make that connection explicit: in Equation&nbsp;4 let us assume that <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D_0=%5Cmathbf%7B0%7D">. Then since <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BH%7D_0=%5Clambda%5Cmathbf%7BI%7D"> with <img src="https://latex.codecogs.com/png.latex?1/%5Csigma%5E2"> the second term in the first line is simply <img src="https://latex.codecogs.com/png.latex?%5Clambda%20%5Cfrac%7B1%7D%7B2%7D%20%5Cmathbf%7Bw%7D%5ET%5Cmathbf%7Bw%7D=%5Clambda%20%5Cfrac%7B1%7D%7B2%7D%20%7C%7C%5Cmathbf%7Bw%7D%7C%7C_2%5E2">. This is equivalent to running logistic regression with an <img src="https://latex.codecogs.com/png.latex?%5Cell_2">-penalty <span class="citation" data-cites="bishop2006pattern">(Bishop 2006)</span>.</p>
</div>
<p><br></p>
<p>Since minimizing the loss function in Equation&nbsp;4 is a convex optimization problem we have many efficient algorithms to choose from in order to solve this problem. With the Hessian at hand it seems natural to use a second-order method, because incorporating information about the curvature of the loss function generally leads to faster convergence. Here we will implement <strong>Newton‚Äôs method</strong> in line with the presentation in chapter 8 of <span class="citation" data-cites="murphy2022probabilistic">Murphy (2022)</span>.</p>
</section>
<section id="posterior-predictive" class="level3">
<h3 class="anchored" data-anchor-id="posterior-predictive">Posterior predictive</h3>
<p>Suppose now that we have trained the Bayesian Logistic Regression model as our binary classifier <img src="https://latex.codecogs.com/png.latex?g_N(%5Cmathbf%7Bx%7D)"> using our training data <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D">. A new unlabelled sample <img src="https://latex.codecogs.com/png.latex?(%5Cmathbf%7Bx%7D_%7BN+1%7D,?)"> arrives. As with any binary classifier we can predict the missing label by simply plugging the new sample into our classifier <img src="https://latex.codecogs.com/png.latex?%5Chat%7By%7D_%7BN+1%7D=g_N(%5Cmathbf%7Bx%7D_%7BN+1%7D)=%5Csigma(%5Chat%7B%5Cmathbf%7Bw%7D%7D%5ET%5Cmathbf%7Bx%7D_%7BN+1%7D)">, where <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cmathbf%7Bw%7D%7D"> is the MAP estimate as before. If at training phase we have found <img src="https://latex.codecogs.com/png.latex?g_N(%5Cmathbf%7Bx%7D)"> to achieve good accuracy, we may expect <img src="https://latex.codecogs.com/png.latex?(%5Cmathbf%7Bx%7D_%7BN+1%7D,%5Chat%7By%7D_%7BN+1%7D)"> to be a reasonably good approximation of the true and unobserved pair <img src="https://latex.codecogs.com/png.latex?(%5Cmathbf%7Bx%7D_%7BN+1%7D,y_%7BN+1%7D)">. But since we are still dealing with an expected value of a random variable, we would generally like to have an idea of how noisy this prediction is.</p>
<p>Formally, we are interested in the <strong>posterior predictive</strong> distribution:</p>
<p><span id="eq-posterior-pred"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20p(y=1%7C%5Cmathbf%7Bx%7D,%20%5Cmathcal%7BD%7D)&amp;=%20%5Cint%20%5Csigma(%5Cmathbf%7Bw%7D%5ET%20%5Cmathbf%7Bx%7D)p(%5Cmathbf%7Bw%7D%7C%5Cmathcal%7BD%7D)d%5Cmathbf%7Bw%7D%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B5%7D"></span></p>
<div class="sidenote">
<p><strong>SIDENOTE</strong> üí°</p>
<p>The approach that ignores uncertainty altogether corresponds to what is referred to as <strong>plugin</strong> approximation of the posterior predictive. Formally, it imposes <img src="https://latex.codecogs.com/png.latex?p(y=1%7C%5Cmathbf%7Bx%7D,%20%5Cmathcal%7BD%7D)%5Capprox%20p(y=1%7C%5Cmathbf%7Bx%7D,%20%5Chat%7B%5Cmathbf%7Bw%7D%7D)">.</p>
</div>
<p><br></p>
<p>With the posterior distribution over model parameters <img src="https://latex.codecogs.com/png.latex?p(%5Cmathbf%7Bw%7D%7C%5Cmathcal%7BD%7D)"> at hand we have the necessary ingredients to estimate the posterior predictive distribution <img src="https://latex.codecogs.com/png.latex?p(y=1%7C%5Cmathbf%7Bx%7D,%20%5Cmathcal%7BD%7D)">.</p>
<p>An obvious, but computationally expensive way to estimate it is through Monte Carlo: draw <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D_s"> from <img src="https://latex.codecogs.com/png.latex?p(%5Cmathbf%7Bw%7D%7C%5Cmathcal%7BD%7D)"> for <img src="https://latex.codecogs.com/png.latex?s=1:S"> and compute fitted values <img src="https://latex.codecogs.com/png.latex?%5Csigma(%5Cmathbf%7Bw_s%7D%5ET%5Cmathbf%7Bx%7D)"> each. Then the posterior predictive distribution corresponds to the average over all fitted values, <img src="https://latex.codecogs.com/png.latex?p(y=1%7C%5Cmathbf%7Bx%7D,%20%5Cmathcal%7BD%7D)=1/S%20%5Csum_%7Bs=1%7D%5E%7BS%7D%5Csigma(%5Cmathbf%7Bw_s%7D%5ET%5Cmathbf%7Bx%7D)">. By the law of large numbers the Monte Carlo estimate is an accurate estimate of the true posterior predictive for large enough <img src="https://latex.codecogs.com/png.latex?S">. Of course, ‚Äúlarge enough‚Äù is somewhat loosely defined here and depending on the problem can mean ‚Äúvery large‚Äù. Consequently, the computational costs involved essentially know no upper bound.</p>
<p>Fortunately, it turns out that we can trade off a little bit of accuracy in return for a convenient analytical solution. In particular, we have that <img src="https://latex.codecogs.com/png.latex?%5Csigma(a)%20%5Capprox%20%5CPhi(%5Clambda%20a)"> where <img src="https://latex.codecogs.com/png.latex?%5CPhi(.)"> is the standard Gaussian cdf and <img src="https://latex.codecogs.com/png.latex?%5Clambda=%5Cpi/8"> ensures that the two functions have the same slope at the origin (Figure&nbsp;2). Without dwelling further on the details we can use this finding to approximate the integral in Equation&nbsp;5 as a sigmoid function. This is called <strong>probit approximation</strong> and implemented below.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-probit" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/bayesian-logit/index_files/figure-html/fig-probit-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Demonstration of the probit approximation.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="the-code" class="level2">
<h2 class="anchored" data-anchor-id="the-code">The code</h2>
<p>We now have all the necessary ingredients to code Bayesian Logistic Regression up from scratch. While in practice we would usually want to rely on existing packages that have been properly tested, I often find it very educative and rewarding to program algorithms from the bottom up. You will see that Julia‚Äôs syntax so closely resembles the mathematical formulas we have seen above, that going from maths to code is incredibly easy. Seeing those formulas and algorithms then actually doing their magic is quite fun! The code chunk below, for example, shows the implementation of the loss function and its derivatives from Equation&nbsp;4 above. Take a moment to go through the code line-by-line and try to understand how it relates back to the equations in Equation&nbsp;4. Isn‚Äôt it amazing how closely the code resembles the actual equations?</p>
<script src="https://gist.github.com/pat-alt/cc53a11470e4fb736f24bb6de2393f54.js"></script>
<p>Aside from the optimization routine this is essentially all there is to coding up Bayesian Logistic Regression from scratch in Julia Language. If you are curious to see the full source code in detail you can check out this <a href="https://colab.research.google.com/github/pat-alt/pat-alt.github.io/blob/main/content/post/2021-11-15-bayesian-logistic-regression/julia_implementation.ipynb">interactive notebook</a>. Now let us finally turn back to our synthetic data and see how Bayesian Logistic Regression can help us understand the uncertainty around our model predictions.</p>
<div class="disclaimer">
<p><strong>DISCLAIMER</strong> ‚ùóÔ∏è</p>
<p>I should mention that this is the first time I program in Julia, so for any Julia pros out there: please bear with me! Happy to hear your suggestions/comments.</p>
</div>
<p><br></p>
</section>
<section id="the-estimates" class="level2">
<h2 class="anchored" data-anchor-id="the-estimates">The estimates</h2>
<p>Figure&nbsp;3 below shows the resulting posterior distribution for <img src="https://latex.codecogs.com/png.latex?w_2"> and <img src="https://latex.codecogs.com/png.latex?w_3"> at varying degrees of prior uncertainty <img src="https://latex.codecogs.com/png.latex?%5Csigma">. The constant <img src="https://latex.codecogs.com/png.latex?w_1"> is held constant at the mode (<img src="https://latex.codecogs.com/png.latex?%5Chat%7Bw%7D_1">). The red dot indicates the MLE. Note how for the choice of <img src="https://latex.codecogs.com/png.latex?%5Csigma%5Crightarrow%200"> the posterior is equal to the prior. This is intuitive since we have imposed that we have no uncertainty around our prior beliefs and hence no amount of new evidence can move us in any direction. Conversely, for <img src="https://latex.codecogs.com/png.latex?%5Csigma%20%5Crightarrow%20%5Cinfty"> the posterior distribution is centered around the unconstrained MLE: prior knowledge is very uncertain and hence the posterior is dominated by the likelihood of the data.</p>
<div id="fig-posterior" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/www/images/posterior.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: Posterior distribution for <img src="https://latex.codecogs.com/png.latex?w_2"> and <img src="https://latex.codecogs.com/png.latex?w_3"> at varying degrees of prior uncertainty <img src="https://latex.codecogs.com/png.latex?%5Csigma">.</figcaption><p></p>
</figure>
</div>
<p>What about the posterior predictive? The story is similar: since for <img src="https://latex.codecogs.com/png.latex?%5Csigma%5Crightarrow%200"> the posterior is completely dominated by the zero-mean prior we have <img src="https://latex.codecogs.com/png.latex?p(y=1%7C%5Cmathbf%7Bx%7D,%5Chat%7B%5Cmathbf%7Bw%7D%7D)=0.5"> everywhere (top left panel in Figure&nbsp;4. As we gradually increase uncertainty around our prior the predictive posterior depends more and more on the data <img src="https://latex.codecogs.com/png.latex?%5Cmathcal%7BD%7D">: uncertainty around predicted labels is high only in regions that are not populated by samples <img src="https://latex.codecogs.com/png.latex?(y_n,%20%5Cmathbf%7Bx%7D_n)">. Not surprisingly, this effect is strongest for the MLE (<img src="https://latex.codecogs.com/png.latex?%5Csigma%5Crightarrow%20%5Cinfty">) where we see some evidence of overfitting.</p>
<div id="fig-predictive" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/www/images/predictive.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;4: Predictive posterior distribution at varying degrees of prior uncertainty <img src="https://latex.codecogs.com/png.latex?%5Csigma">.</figcaption><p></p>
</figure>
</div>
</section>
<section id="wrapping-up" class="level2">
<h2 class="anchored" data-anchor-id="wrapping-up">Wrapping up</h2>
<p>In this post we have seen how Bayesian Logistic Regression can be implemented from scratch in Julia language. The estimated posterior distribution over model parameters can be used to quantify uncertainty around coefficients and model predictions. I have argued that it is important to be transparent about model uncertainty to avoid being overly confident in estimates.</p>
<p>There are many more benefits associated with Bayesian (probabilistic) machine learning. Understanding where in the input domain our model exerts high uncertainty can for example be instrumental in labelling data: see for example <span class="citation" data-cites="gal2017deep">Gal, Islam, and Ghahramani (2017)</span> and follow-up works for an interesting application to <strong>active learning</strong> for image data. Similarly, there is a recent work that uses estimates of the posterior predictive in the context of <strong>algorithmic recourse</strong> <span class="citation" data-cites="schut2021generating">(Schut et al. 2021)</span>. For a brief introduction to algorithmic recourse see one of my <a href="../../../blog/posts/individual-recourse-for-black-box-models/index.html">previous posts</a>.</p>
<p>As a great reference for further reading about probabilistic machine learning I can highly recommend <span class="citation" data-cites="murphy2022probabilistic">Murphy (2022)</span>. An electronic version of the book is currently freely available as a draft. Finally, remember that if you want to try yourself at the code, you can check out this <a href="https://colab.research.google.com/github/pat-alt/pat-alt.github.io/blob/43e18fe5e8cc625ffe1e4270da49f253dac8523a/content/post/2021-10-27-bayesian-logistic-regression/julia_implementation.ipynb">interactive notebook</a>.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-bishop2006pattern" class="csl-entry">
Bishop, Christopher M. 2006. <em>Pattern Recognition and Machine Learning</em>. <span>springer</span>.
</div>
<div id="ref-gal2017deep" class="csl-entry">
Gal, Yarin, Riashat Islam, and Zoubin Ghahramani. 2017. <span>‚ÄúDeep Bayesian Active Learning with Image Data.‚Äù</span> In <em>International <span>Conference</span> on <span>Machine Learning</span></em>, 1183‚Äì92. <span>PMLR</span>.
</div>
<div id="ref-murphy2012machine" class="csl-entry">
Murphy, Kevin P. 2012. <em>Machine Learning: <span>A</span> Probabilistic Perspective</em>. <span>MIT press</span>.
</div>
<div id="ref-murphy2022probabilistic" class="csl-entry">
‚Äî‚Äî‚Äî. 2022. <em>Probabilistic <span>Machine Learning</span>: <span>An</span> Introduction</em>. <span>MIT Press</span>.
</div>
<div id="ref-schut2021generating" class="csl-entry">
Schut, Lisa, Oscar Key, Rory Mc Grath, Luca Costabello, Bogdan Sacaleanu, Yarin Gal, et al. 2021. <span>‚ÄúGenerating <span>Interpretable Counterfactual Explanations By Implicit Minimisation</span> of <span>Epistemic</span> and <span>Aleatoric Uncertainties</span>.‚Äù</span> In <em>International <span>Conference</span> on <span>Artificial Intelligence</span> and <span>Statistics</span></em>, 1756‚Äì64. <span>PMLR</span>.
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>We let <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D=(10,%200.75,%20-2.5)%5ET"> define the true coefficients.‚Ü©Ô∏é</p></li>
<li id="fn2"><p>Note that the author works with the negative log likelihood scaled by the sample size‚Ü©Ô∏é</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2021,
  author = {Patrick Altmeyer},
  title = {Bayesian {Logistic} {Regression}},
  date = {21-11-15},
  url = {https://www.paltmeyer.com/blog//blog/posts/bayesian-logit},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2021" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 21AD. <span>‚ÄúBayesian Logistic Regression.‚Äù</span>
November 15, 21AD. <a href="https://www.paltmeyer.com/blog//blog/posts/bayesian-logit">https://www.paltmeyer.com/blog//blog/posts/bayesian-logit</a>.
</div></div></section></div> ]]></description>
  <category>bayes</category>
  <category>logistic regression</category>
  <category>Julia</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/bayesian-logit/index.html</guid>
  <pubDate>Sun, 14 Nov 2021 23:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/bayesian-logit/www/intro.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>Individual recourse for Black Box Models</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/individual-recourse-for-black-box-models/index.html</link>
  <description><![CDATA[ 



<div class="cell" data-layout-align="center">

</div>
<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/individual-recourse-for-black-box-models/www/intro.gif" class="figure-img">
</figure>
</div>
<blockquote class="blockquote">
<p>‚ÄúYou cannot appeal to [algorithms]. They do not listen. Nor do they bend.‚Äù</p>
<p>‚Äî Cathy O‚ÄôNeil</p>
</blockquote>
<p>In her popular book <a href="https://en.wikipedia.org/wiki/Weapons_of_Math_Destruction">Weapons of Math Destruction</a> Cathy O‚ÄôNeil presents the example of public school teacher Sarah Wysocki, who lost her job after a teacher evaluation algorithm had rendered her redundant <span class="citation" data-cites="oneil2016weapons">(O‚ÄôNeil 2016)</span>. Sarah was highly popular among her peers, supervisors and students.</p>
<p>This post looks at a novel algorithmic solution to the problem that individuals like Sarah, who are faced with an undesirable outcome, should be provided with means to revise that outcome. The literature commonly refers to this as <em>individual recourse</em>. One of the first approaches towards individual recourse was proposed by <span class="citation" data-cites="ustun2019actionable">Ustun, Spangher, and Liu (2019)</span>. In a recent follow-up paper, <span class="citation" data-cites="joshi2019realistic">Joshi et al. (2019)</span> propose a methodology coined <code>REVISE</code>, which extends the earlier approach in at least three key ways:</p>
<ol type="1">
<li><code>REVISE</code> provides a framework that avoids suggesting an unrealistic set of changes by imposing a threshold likelihood on the revised attributes.</li>
<li>It is applicable to a broader class of models including Black Box classifiers and structural causal models.</li>
<li>It can be used to detect poorly defined proxies and biases.</li>
</ol>
<p>For a detailed discussion of these points you may check out this <a href="paper_presentation.pdf">slide deck</a> or consult the paper directly (freely available on <a href="https://deepai.org/publication/towards-realistic-individual-recourse-and-actionable-explanations-in-black-box-decision-making-systems">DeepAI</a>). Here, we will abstract from some of these complications and instead look at an application of a slightly simplified version of <code>REVISE</code>. This should help us to first build a good intuition. Readers interested in the technicalities and code may find all of this in the annex below.</p>
<section id="from-to" class="level2">
<h2 class="anchored" data-anchor-id="from-to">From üê± to üê∂</h2>
<div class="cell" data-layout-align="center">

</div>
<p>We will explain <code>REVISE</code> through a short tale of cats and dogs. The protagonist of this tale is Kitty üê±, a young cat that identifies as a dog. Unfortunately, Kitty is not very tall and her tail, though short for a cat, is longer than that of the average dog (Figure&nbsp;1).</p>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-density" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/individual-recourse-for-black-box-models/index_files/figure-html/fig-density-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: Empirical distributions of simulated data set describing cats and dogs. Vertical stalks represent Kitty‚Äôs attribute values.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Much to her dismay, Kitty has been recognized as a cat by a linear classifier <img src="https://latex.codecogs.com/png.latex?g_n(X)"> that we trained through stochastic gradient descent using the data on animals‚Äô height and tail length. Once again interested readers may find technical details and code in the annex below. Figure&nbsp;2 shows the resulting linear separation in the attribute space with the decision boundary in solid black and Kitty‚Äôs location indicated by a red circle. Can we provide individual recourse to Kitty?</p>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-class" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/individual-recourse-for-black-box-models/index_files/figure-html/fig-class-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Linear separation of cats and dogs in the 2-dimensional attribute space with the decision boundary of the fitted classifier in solid black. Kitty‚Äôs location is indicated by a red circle.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">

</div>
<div class="cell" data-layout-align="center">

</div>
<p>Let‚Äôs see if and how we can apply <code>REVISE</code> to Kitty‚Äôs problem. The following summary should give you some flavour of how the algorithm works:</p>
<ol type="1">
<li>Initialize <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bx%7D_i'%5E%7B(0)%7D">, that is the attributes that will be revised recursively. Kitty‚Äôs original attributes seem like a reasonable place to start.</li>
<li>Through gradient descent recursively revise <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bx%7D_i'%5E%7B(t)%7D"> until <img src="https://latex.codecogs.com/png.latex?g_n(%5Cmathbf%7Bx%7D_i'%5E%7B(T)%7D)=">üê∂. At this point <img src="https://latex.codecogs.com/png.latex?T"> the descent terminates since for these revised attributes the classifier labels Kitty as a dog.</li>
<li>Return <img src="https://latex.codecogs.com/png.latex?%5Cdelta_i=%5Cmathbf%7Bx%7D_i'%5E%7B(T)%7D-%5Cmathbf%7Bx%7D_i">, that is the individual recourse for Kitty.</li>
</ol>
<p>Figure&nbsp;3 illustrates what happens when this approach is applied to Kitty‚Äôs problem. The different panels show the results for different values of a regularization parameter <img src="https://latex.codecogs.com/png.latex?%5Clambda"> that governs the trade-off between achieving the desired label switch and keeping the distance between the original (<img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bx%7D_i">) and revised (<img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bx%7D_i'">) attributes small. In all but one case, <code>REVISE</code> converges: a decrease in tail length along with an increase in height eventually allows Kitty to cross the decision boundary. In other words, we have successfully turned Kitty into a dog - at least in the eyes of the linear classifier!</p>
<p>We also observe that as we increase <img src="https://latex.codecogs.com/png.latex?%5Clambda"> for a fixed learning rate, <code>REVISE</code> takes longer to converge. This should come as no surprise, since higher values of <img src="https://latex.codecogs.com/png.latex?%5Clambda"> lead to greater regularization with respect to the penalty we place on the distance that Kitty has to travel. When we penalize too much (<img src="https://latex.codecogs.com/png.latex?%5Clambda=10">), Kitty never reaches the decision boundary, because she is reluctant to change her characteristics beyond a certain point. While not visible to the naked eye, in this particular example <img src="https://latex.codecogs.com/png.latex?%5Clambda=0.001"> corresponds to the best choice among the candidate values.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-revise" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://www.paltmeyer.com/blog/blog/posts/individual-recourse-for-black-box-models/blog/posts/individual-recourse-for-black-box-models/www/revise.gif" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Figure&nbsp;3: The simplified <code>REVISE</code> algorithm in action: how Kitty crosses the decision boundary by changing her attributes. Regularization with respect to the distance penalty increases from top left to bottom right.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">

</div>
</section>
<section id="discussion" class="level2">
<h2 class="anchored" data-anchor-id="discussion">Discussion</h2>
<p>While hopefully Kitty‚Äôs journey has provided you with some useful intuition, the story is of course very silly. Even if your cat ever seems to signal that she wants to be a dog, helping her cross that decision boundary will be tricky. Some attributes are simply immutable or very difficult to change, which <span class="citation" data-cites="joshi2019realistic">Joshi et al. (2019)</span> do not fail to account for in their framework. Their proposed methodology offers a simple and ingenious approach towards providing individual recourse. Instead of concerning ourselves with Black Box interpretability, why not simply provide remedy in case things go wrong?</p>
<p>To some extent that idea has its merit. As this post has hopefully shown, <code>REVISE</code> is straight-forward to understand and readily applicable. It could be a very useful tool to provide individual recourse in many real-world applications. As the implementation of our simplified version of <code>REVISE</code> demonstrates, researchers should also find it relatively easy to develop the methodology further and tailor it to specific use cases. The simpler version here, for example, may be useful in settings where the dimensionality is relatively small and one can reasonably model the distribution of attributes without the need for generative models.</p>
<p>Still, you may be wondering: if the original classifier is based on poorly defined rules and proxies, then what good does <code>REVISE</code> really do? Going back to the example of high-school teacher Sarah Wysocki, one of the key attributes determining teachers‚Äô evaluations was their students‚Äô performance. Realizing this, some teachers took the shortest route to success by artificially inflating their students‚Äô test scores. That same course of action may well have been suggested by <code>REVISE</code>. As <span class="citation" data-cites="joshi2019realistic">Joshi et al. (2019)</span> demonstrate, this very property of <code>REVISE</code> may actually proof useful in detecting weaknesses of decision making systems before setting them loose (key contribution 3).</p>
<p>Nonetheless, the example above also demonstrates that approaches like <code>REVISE</code>, useful as they may be, tend to provide solutions for very particular problems. In reality data-driven decision making systems are often subject to many different problems and hence research on trustworthy AI will need to tackle the issue from various angles. A few places to start include the question of dealing with data that is inherently biased, improving ad-hoc and post-hoc model interpretability and continuing efforts around causality-inspired AI.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-joshi2019realistic" class="csl-entry">
Joshi, Shalmali, Oluwasanmi Koyejo, Warut Vijitbenjaronk, Been Kim, and Joydeep Ghosh. 2019. <span>‚ÄúTowards Realistic Individual Recourse and Actionable Explanations in Black-Box Decision Making Systems.‚Äù</span> <a href="https://arxiv.org/abs/1907.09615">https://arxiv.org/abs/1907.09615</a>.
</div>
<div id="ref-oneil2016weapons" class="csl-entry">
O‚ÄôNeil, Cathy. 2016. <em>Weapons of Math Destruction: <span>How</span> Big Data Increases Inequality and Threatens Democracy</em>. <span>Crown</span>.
</div>
<div id="ref-ustun2019actionable" class="csl-entry">
Ustun, Berk, Alexander Spangher, and Yang Liu. 2019. <span>‚ÄúActionable Recourse in Linear Classification.‚Äù</span> In <em>Proceedings of the <span>Conference</span> on <span>Fairness</span>, <span>Accountability</span>, and <span>Transparency</span></em>, 10‚Äì19.
</div>
</div>
</section>
<section id="annex" class="level2">
<h2 class="anchored" data-anchor-id="annex">Annex</h2>
<p>In my blog posts I aim to implement interesting ideas from scratch even if that sometimes means that things need to undergo some sort of simplification. The benefit of this approach is that the experience is educationally rewarding - both for myself and hopefully also for readers. The first two sections of this annex show how <code>REVISE</code> and linear classification can be implemented in R. The final section just shows how the synthetic data was generated. To also inspect the code that generates the visualizations and everything else, you can find the source code of this file on <a href="https://github.com/pat-alt/patalt/blob/master/content/post/2021-04-26-individual-recourse-for-black-box-models/index.Rmd">GitHub</a>.</p>
<section id="linear-classifier" class="level3">
<h3 class="anchored" data-anchor-id="linear-classifier">Linear classifier</h3>
<p>Linear classification is implemented through stochastic gradient descent (SGD) with Hinge loss</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Cell(-%5Cmathbf%7Bw%7D%5ET%5Cmathbf%7Bx%7D_i%20y_i)&amp;=(1-%5Cmathbf%7Bw%7D%5ET%5Cmathbf%7Bx%7D_i%20y_i)_+%20%5C%5C%0A%5Cend%7Baligned%7D%0A"></p>
<p>where <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D"> is a coefficient vector, <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bx%7D_i"> is the attribute vector of individual <img src="https://latex.codecogs.com/png.latex?i"> and <img src="https://latex.codecogs.com/png.latex?y_i"> is the individual‚Äôs outcome. Since we apply SGD in order to minimize the loss function <img src="https://latex.codecogs.com/png.latex?%5Cell"> by varying <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D">, we need an expression for its gradient with respect to <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D">, which is given by:</p>
<p><span id="eq-hinge"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Cnabla_%7B%5Cmathbf%7BW%7D%7D%20%5Cleft(%20%5Cell(-%5Cmathbf%7Bw%7D%5ET%5Cmathbf%7Bx%7D_i%20y_i)%20%5Cright)%20&amp;=%20%5Cbegin%7Bcases%7D%20-%5Cmathbf%7Bx%7D_i%20y_i%20&amp;%20%5Ctext%7Bif%7D%20%5C%20%5C%20%5C%20%5Cmathbf%7Bw%7D%5ET%5Cmathbf%7Bx%7D_i%20y_i%20%5Cle%201%5C%5C%200%20&amp;%20%5Ctext%7Botherwise%7D%20%5Cend%7Bcases%7D%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B1%7D"></span></p>
<p>The code below uses this analytical solution to perform SGD over <img src="https://latex.codecogs.com/png.latex?T"> iterations or as long as updates yield feasible parameter values. As the final vector of coefficients the function returns <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7B%5Cbar%7Bw%7D%7D=%20%5Cfrac%7B1%7D%7BT%7D%20%5Csum_%7Bt=1%7D%5E%7BT%7D%20%5Cmathbf%7Bw%7D_t">. Denoting the optimal coefficient vector as <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D%5E*">, it can be shown that under certain conditions <img src="https://latex.codecogs.com/png.latex?%5Cell(%5Cmathbf%7B%5Cbar%7Bw%7D%7D)%5Crightarrow%5Cell(%5Cmathbf%7Bw%7D%5E*)"> as <img src="https://latex.codecogs.com/png.latex?T%5Crightarrow%5Cinfty">.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;">#' Stochastic gradient descent</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;">#'</span></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;">#' @param X Feature matrix.</span></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;">#' @param y Vector containing training labels.</span></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;">#' @param eta Learning rate.</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;">#' @param n_iter Maximum number of iterations.</span></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;">#' @param w_init Initial parameter values.</span></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;">#' @param save_steps Boolean checking if coefficients should be saved at each step.</span></span>
<span id="cb1-9"><span class="co" style="color: #5E5E5E;">#'</span></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;">#' @return</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;">#' @export</span></span>
<span id="cb1-12"><span class="co" style="color: #5E5E5E;">#'</span></span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;">#' @author Patrick Altmeyer</span></span>
<span id="cb1-14">linear_classifier <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(X,y,<span class="at" style="color: #657422;">eta=</span><span class="fl" style="color: #AD0000;">0.001</span>,<span class="at" style="color: #657422;">n_iter=</span><span class="dv" style="color: #AD0000;">1000</span>,<span class="at" style="color: #657422;">w_init=</span><span class="cn" style="color: #8f5902;">NULL</span>,<span class="at" style="color: #657422;">save_steps=</span><span class="cn" style="color: #8f5902;">FALSE</span>) {</span>
<span id="cb1-15">  <span class="co" style="color: #5E5E5E;"># Initialization: ----</span></span>
<span id="cb1-16">  n <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">nrow</span>(X) <span class="co" style="color: #5E5E5E;"># number of observations</span></span>
<span id="cb1-17">  d <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ncol</span>(X) <span class="co" style="color: #5E5E5E;"># number of dimensions</span></span>
<span id="cb1-18">  <span class="cf" style="color: #003B4F;">if</span> (<span class="fu" style="color: #4758AB;">is.null</span>(w_init)) {</span>
<span id="cb1-19">    w <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">matrix</span>(<span class="fu" style="color: #4758AB;">rep</span>(<span class="dv" style="color: #AD0000;">0</span>,d)) <span class="co" style="color: #5E5E5E;"># initialize coefficients as zero...</span></span>
<span id="cb1-20">  } <span class="cf" style="color: #003B4F;">else</span> {</span>
<span id="cb1-21">    w <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">matrix</span>(w_init) <span class="co" style="color: #5E5E5E;"># ...unless initial values have been provided.</span></span>
<span id="cb1-22">  }</span>
<span id="cb1-23">  w_avg <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">/</span>n_iter <span class="sc" style="color: #5E5E5E;">*</span> w <span class="co" style="color: #5E5E5E;"># initialize average coefficients</span></span>
<span id="cb1-24">  iter <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1</span> <span class="co" style="color: #5E5E5E;"># iteration count</span></span>
<span id="cb1-25">  <span class="cf" style="color: #003B4F;">if</span> (save_steps) {</span>
<span id="cb1-26">    steps <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.table</span>(<span class="at" style="color: #657422;">iter=</span><span class="dv" style="color: #AD0000;">0</span>, <span class="at" style="color: #657422;">w=</span><span class="fu" style="color: #4758AB;">c</span>(w), <span class="at" style="color: #657422;">d=</span><span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span>d) <span class="co" style="color: #5E5E5E;"># if desired, save coefficient at each step</span></span>
<span id="cb1-27">  } <span class="cf" style="color: #003B4F;">else</span> {</span>
<span id="cb1-28">    steps <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cn" style="color: #8f5902;">NA</span></span>
<span id="cb1-29">  }</span>
<span id="cb1-30">  feasible_w <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cn" style="color: #8f5902;">TRUE</span> <span class="co" style="color: #5E5E5E;"># to check if coefficients are finite, non-nan, ...</span></span>
<span id="cb1-31">  <span class="co" style="color: #5E5E5E;"># Surrogate loss:</span></span>
<span id="cb1-32">  l <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(X,y,w) {</span>
<span id="cb1-33">    x <span class="ot" style="color: #003B4F;">&lt;-</span> (<span class="sc" style="color: #5E5E5E;">-</span><span class="dv" style="color: #AD0000;">1</span>) <span class="sc" style="color: #5E5E5E;">*</span> <span class="fu" style="color: #4758AB;">crossprod</span>(X,w) <span class="sc" style="color: #5E5E5E;">*</span> y</span>
<span id="cb1-34">    <span class="fu" style="color: #4758AB;">pmax</span>(<span class="dv" style="color: #AD0000;">0</span>,<span class="dv" style="color: #AD0000;">1</span> <span class="sc" style="color: #5E5E5E;">+</span> x) <span class="co" style="color: #5E5E5E;"># Hinge loss</span></span>
<span id="cb1-35">  }</span>
<span id="cb1-36">  grad <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(X,y,w) {</span>
<span id="cb1-37">    X <span class="sc" style="color: #5E5E5E;">%*%</span> <span class="fu" style="color: #4758AB;">ifelse</span>(<span class="fu" style="color: #4758AB;">crossprod</span>(X,w) <span class="sc" style="color: #5E5E5E;">*</span> y<span class="sc" style="color: #5E5E5E;">&lt;=</span><span class="dv" style="color: #AD0000;">1</span>,<span class="sc" style="color: #5E5E5E;">-</span>y,<span class="dv" style="color: #AD0000;">0</span>) <span class="co" style="color: #5E5E5E;"># Gradient of Hinge loss</span></span>
<span id="cb1-38">  }</span>
<span id="cb1-39">  <span class="co" style="color: #5E5E5E;"># Stochastic gradient descent: ----</span></span>
<span id="cb1-40">  <span class="cf" style="color: #003B4F;">while</span> (feasible_w <span class="sc" style="color: #5E5E5E;">&amp;</span> iter<span class="sc" style="color: #5E5E5E;">&lt;</span>n_iter) {</span>
<span id="cb1-41">    t <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sample</span>(<span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span>n,<span class="dv" style="color: #AD0000;">1</span>) <span class="co" style="color: #5E5E5E;"># random draw</span></span>
<span id="cb1-42">    X_t <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">matrix</span>(X[t,])</span>
<span id="cb1-43">    y_t <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">matrix</span>(y[t])</span>
<span id="cb1-44">    v_t <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">grad</span>(X_t,y_t,w) <span class="co" style="color: #5E5E5E;"># compute estimate of gradient</span></span>
<span id="cb1-45">    <span class="co" style="color: #5E5E5E;"># Update:</span></span>
<span id="cb1-46">    w <span class="ot" style="color: #003B4F;">&lt;-</span> w <span class="sc" style="color: #5E5E5E;">-</span> eta <span class="sc" style="color: #5E5E5E;">*</span> v_t <span class="co" style="color: #5E5E5E;"># update coefficient vector</span></span>
<span id="cb1-47">    feasible_w <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">all</span>(<span class="fu" style="color: #4758AB;">sapply</span>(w, <span class="cf" style="color: #003B4F;">function</span>(i) <span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.na</span>(i) <span class="sc" style="color: #5E5E5E;">&amp;</span> <span class="fu" style="color: #4758AB;">is.finite</span>(i))) <span class="co" style="color: #5E5E5E;"># check if feasible</span></span>
<span id="cb1-48">    <span class="cf" style="color: #003B4F;">if</span> (feasible_w) {</span>
<span id="cb1-49">      w_avg <span class="ot" style="color: #003B4F;">&lt;-</span> w_avg <span class="sc" style="color: #5E5E5E;">+</span> <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">/</span>n_iter <span class="sc" style="color: #5E5E5E;">*</span> w <span class="co" style="color: #5E5E5E;"># update average</span></span>
<span id="cb1-50">    }</span>
<span id="cb1-51">    <span class="cf" style="color: #003B4F;">if</span> (save_steps) {</span>
<span id="cb1-52">      steps <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">rbind</span>(steps, <span class="fu" style="color: #4758AB;">data.table</span>(<span class="at" style="color: #657422;">iter=</span>iter, <span class="at" style="color: #657422;">w=</span><span class="fu" style="color: #4758AB;">c</span>(w), <span class="at" style="color: #657422;">d=</span><span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span>d))</span>
<span id="cb1-53">    }</span>
<span id="cb1-54">    iter <span class="ot" style="color: #003B4F;">&lt;-</span> iter <span class="sc" style="color: #5E5E5E;">+</span> <span class="dv" style="color: #AD0000;">1</span> <span class="co" style="color: #5E5E5E;"># increase counter</span></span>
<span id="cb1-55">  }</span>
<span id="cb1-56">  <span class="co" style="color: #5E5E5E;"># Output: ----</span></span>
<span id="cb1-57">  output <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb1-58">    <span class="at" style="color: #657422;">X =</span> X,</span>
<span id="cb1-59">    <span class="at" style="color: #657422;">y =</span> <span class="fu" style="color: #4758AB;">matrix</span>(y),</span>
<span id="cb1-60">    <span class="at" style="color: #657422;">coefficients =</span> w_avg,</span>
<span id="cb1-61">    <span class="at" style="color: #657422;">eta =</span> eta,</span>
<span id="cb1-62">    <span class="at" style="color: #657422;">n_iter =</span> n_iter,</span>
<span id="cb1-63">    <span class="at" style="color: #657422;">steps =</span> steps</span>
<span id="cb1-64">  )</span>
<span id="cb1-65">  <span class="fu" style="color: #4758AB;">class</span>(output) <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="st" style="color: #20794D;">"classifier"</span> <span class="co" style="color: #5E5E5E;"># assign S3 class</span></span>
<span id="cb1-66">  <span class="fu" style="color: #4758AB;">return</span>(output)</span>
<span id="cb1-67">}</span>
<span id="cb1-68"></span>
<span id="cb1-69"><span class="co" style="color: #5E5E5E;"># Methods: ----</span></span>
<span id="cb1-70">print.classifier <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(classifier) {</span>
<span id="cb1-71">  <span class="fu" style="color: #4758AB;">print</span>(<span class="st" style="color: #20794D;">"Coefficients:"</span>)</span>
<span id="cb1-72">  <span class="fu" style="color: #4758AB;">print</span>(classifier<span class="sc" style="color: #5E5E5E;">$</span>coefficients)</span>
<span id="cb1-73">}</span>
<span id="cb1-74">print <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(classifier) {</span>
<span id="cb1-75">  <span class="fu" style="color: #4758AB;">UseMethod</span>(<span class="st" style="color: #20794D;">"print"</span>)</span>
<span id="cb1-76">}</span>
<span id="cb1-77"></span>
<span id="cb1-78">predict.classifier <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(classifier, <span class="at" style="color: #657422;">newdata=</span><span class="cn" style="color: #8f5902;">NULL</span>, <span class="at" style="color: #657422;">discrete=</span><span class="cn" style="color: #8f5902;">TRUE</span>) {</span>
<span id="cb1-79">  <span class="cf" style="color: #003B4F;">if</span> (<span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.null</span>(newdata)) {</span>
<span id="cb1-80">    fitted <span class="ot" style="color: #003B4F;">&lt;-</span> newdata <span class="sc" style="color: #5E5E5E;">%*%</span> classifier<span class="sc" style="color: #5E5E5E;">$</span>coefficients <span class="co" style="color: #5E5E5E;"># out-of-sampple prediction</span></span>
<span id="cb1-81">  } <span class="cf" style="color: #003B4F;">else</span> {</span>
<span id="cb1-82">    fitted <span class="ot" style="color: #003B4F;">&lt;-</span> classifier<span class="sc" style="color: #5E5E5E;">$</span>X <span class="sc" style="color: #5E5E5E;">%*%</span> classifier<span class="sc" style="color: #5E5E5E;">$</span>coefficients <span class="co" style="color: #5E5E5E;"># in-sample fit</span></span>
<span id="cb1-83">  }</span>
<span id="cb1-84">  <span class="cf" style="color: #003B4F;">if</span> (discrete) {</span>
<span id="cb1-85">    fitted <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sign</span>(fitted) <span class="co" style="color: #5E5E5E;"># map to {-1,1}</span></span>
<span id="cb1-86">  }</span>
<span id="cb1-87">  <span class="fu" style="color: #4758AB;">return</span>(fitted)</span>
<span id="cb1-88">}</span>
<span id="cb1-89">predict <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(classifier, <span class="at" style="color: #657422;">newdata=</span><span class="cn" style="color: #8f5902;">NULL</span>, <span class="at" style="color: #657422;">discrete=</span><span class="cn" style="color: #8f5902;">TRUE</span>) {</span>
<span id="cb1-90">  <span class="fu" style="color: #4758AB;">UseMethod</span>(<span class="st" style="color: #20794D;">"predict"</span>)</span>
<span id="cb1-91">}</span></code></pre></div>
</div>
</section>
<section id="revise-simplified" class="level3">
<h3 class="anchored" data-anchor-id="revise-simplified"><code>REVISE</code> (simplified)</h3>
<p>As flagged above, we are looking at a slightly simplified version of the algorithm presented in <span class="citation" data-cites="joshi2019realistic">Joshi et al. (2019)</span>. In particular, the approach here does not incorporate the threshold on the likelihood nor does it account for immutable attributes.</p>
<p>Let <img src="https://latex.codecogs.com/png.latex?y%5Cin%5C%7B-1,1%5C%7D"> be a binary outcome variable, <img src="https://latex.codecogs.com/png.latex?X%5Cin%5Cmathbb%7BR%7D%5Ed"> a feature matrix containing individuals‚Äô attributes and <img src="https://latex.codecogs.com/png.latex?g_n(X)"> a corresponding data-dependent classifier. Suppose <img src="https://latex.codecogs.com/png.latex?y_i=-1"> (the negative outcome) for some individual characterized by attributes <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bx%7D_i">. Then we want to find <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bx%7D_i'"> closest to <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bx%7D_i"> such that the classifier assigns the positive outcome <img src="https://latex.codecogs.com/png.latex?g(%5Cmathbf%7Bx%7D_i%5E%7B'%7D)=1">. In order to do so, we use gradient descent with Hinge loss <img src="https://latex.codecogs.com/png.latex?%5Cell"> to minimize the following function</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Cmin_%7B%5Cmathbf%7Bx%7D_i%5E%7B'%7D%7D&amp;%20%5C%20%5Cell(g_n(%5Cmathbf%7Bx%7D_i%5E%7B'%7D),1)%20+%20%5Clambda%20d(%5Cmathbf%7Bx%7D_i%5E%7B'%7D,%5Cmathbf%7Bx%7D_i)%20%5C%5C%0A%5Cend%7Baligned%7D%0A"></p>
<p>where <img src="https://latex.codecogs.com/png.latex?d=%7C%7C%5Cmathbf%7Bx%7D_i%5E%7B'%7D-%5Cmathbf%7Bx%7D_i%7C%7C"> denotes the Euclidean distance. Note that this time we take the coefficient vector defining <img src="https://latex.codecogs.com/png.latex?g_n"> as given and instead vary the attributes. In particular, we will perform gradient descent steps as follows</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%7B%5Cmathbf%7Bx%7D_i%5E%7B'%7D%7D%5Et&amp;%5Cleftarrow%20%7B%5Cmathbf%7Bx%7D_i%5E%7B'%7D%7D%5E%7Bt-1%7D%20+%20%5Ceta%20%5Cnabla_%7B%7B%5Cmathbf%7Bx%7D_i%5E%7B'%7D%7D%7D%20%5Cleft(%20%5Cell(g_n(%5Cmathbf%7Bx%7D_i%5E%7B'%7D),1)%20+%20%5Clambda%20d(%5Cmathbf%7Bx%7D_i%5E%7B'%7D,%5Cmathbf%7Bx%7D_i)%20%20%5Cright)%20%20%5C%5C%0A%5Cend%7Baligned%7D%0A"></p>
<p>where <img src="https://latex.codecogs.com/png.latex?%5Ceta"> is the learning rate. The descent step is almost equivalent to the one described in <span class="citation" data-cites="joshi2019realistic">Joshi et al. (2019)</span>, but here we greatly simplify things by optimizing directly in the attribute space instead of a latent space. The gradient of the loss function looks very similar to Equation&nbsp;1. With respect to the Euclidean distance partial derivatives are of the following form:</p>
<p><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%20%5Cfrac%7B%5Cpartial%20%7C%7C%5Cmathbf%7Bx%7D_i%5E%7B'%7D-%5Cmathbf%7Bx%7D_i%7C%7C%7D%7B%5Cpartial%20%7Bx_i'%7D%5E%7B(d)%7D%7D%20%20&amp;=%20%5Cfrac%7B%7Bx_i'%7D%5E%7B(d)%7D-%7Bx_i%7D%5E%7B(d)%7D%7D%7B%7C%7C%5Cmathbf%7Bx%7D_i%5E%7B'%7D-%5Cmathbf%7Bx%7D_i%7C%7C%7D%20%5C%5C%0A%5Cend%7Baligned%7D%0A"></p>
<p>The code that implements this optimization follows below.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;">#' REVISE algoritm - a simplified version</span></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;">#'</span></span>
<span id="cb2-3"><span class="co" style="color: #5E5E5E;">#' @param classifier The fitted classifier.</span></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;">#' @param x_star Attributes of individual seeking individual recourse.</span></span>
<span id="cb2-5"><span class="co" style="color: #5E5E5E;">#' @param eta Learning rate.</span></span>
<span id="cb2-6"><span class="co" style="color: #5E5E5E;">#' @param lambda Regularization parameter.</span></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;">#' @param n_iter Maximum number of operations.</span></span>
<span id="cb2-8"><span class="co" style="color: #5E5E5E;">#' @param save_steps Boolean indicating if intermediate steps should be saved.</span></span>
<span id="cb2-9"><span class="co" style="color: #5E5E5E;">#'</span></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;">#' @return</span></span>
<span id="cb2-11"><span class="co" style="color: #5E5E5E;">#' @export</span></span>
<span id="cb2-12"><span class="co" style="color: #5E5E5E;">#'</span></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;">#' @author Patrick Altmeyer</span></span>
<span id="cb2-14">revise.classifier <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(classifier,x_star,<span class="at" style="color: #657422;">eta=</span><span class="dv" style="color: #AD0000;">1</span>,<span class="at" style="color: #657422;">lambda=</span><span class="fl" style="color: #AD0000;">0.01</span>,<span class="at" style="color: #657422;">n_iter=</span><span class="dv" style="color: #AD0000;">1000</span>,<span class="at" style="color: #657422;">save_steps=</span><span class="cn" style="color: #8f5902;">FALSE</span>) {</span>
<span id="cb2-15">  <span class="co" style="color: #5E5E5E;"># Initialization: ----</span></span>
<span id="cb2-16">  d <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">length</span>(x_star) <span class="co" style="color: #5E5E5E;"># number of dimensions</span></span>
<span id="cb2-17">  <span class="cf" style="color: #003B4F;">if</span> (<span class="sc" style="color: #5E5E5E;">!</span><span class="fu" style="color: #4758AB;">is.null</span>(<span class="fu" style="color: #4758AB;">names</span>(x_star))) {</span>
<span id="cb2-18">    d_names <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">names</span>(x_star) <span class="co" style="color: #5E5E5E;"># names of attributes, if provided</span></span>
<span id="cb2-19">  } <span class="cf" style="color: #003B4F;">else</span> {</span>
<span id="cb2-20">    d_names <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">sprintf</span>(<span class="st" style="color: #20794D;">"X%i"</span>, <span class="dv" style="color: #AD0000;">1</span><span class="sc" style="color: #5E5E5E;">:</span>d)</span>
<span id="cb2-21">  }</span>
<span id="cb2-22">  w <span class="ot" style="color: #003B4F;">&lt;-</span> classifier<span class="sc" style="color: #5E5E5E;">$</span>coefficients <span class="co" style="color: #5E5E5E;"># coefficient vector</span></span>
<span id="cb2-23">  x <span class="ot" style="color: #003B4F;">&lt;-</span> x_star <span class="co" style="color: #5E5E5E;"># initialization of revised attributes</span></span>
<span id="cb2-24">  distance <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">0</span> <span class="co" style="color: #5E5E5E;"># initial distance from starting point</span></span>
<span id="cb2-25">  converged <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">predict</span>(classifier, <span class="at" style="color: #657422;">newdata =</span> x)[<span class="dv" style="color: #AD0000;">1</span>,<span class="dv" style="color: #AD0000;">1</span>]<span class="sc" style="color: #5E5E5E;">==</span><span class="dv" style="color: #AD0000;">1</span> <span class="co" style="color: #5E5E5E;"># positive outcome?</span></span>
<span id="cb2-26">  iter <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1</span> <span class="co" style="color: #5E5E5E;"># counter</span></span>
<span id="cb2-27">  <span class="cf" style="color: #003B4F;">if</span> (save_steps) {</span>
<span id="cb2-28">    steps <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">data.table</span>(<span class="at" style="color: #657422;">iter=</span><span class="dv" style="color: #AD0000;">1</span>, <span class="at" style="color: #657422;">x=</span>x, <span class="at" style="color: #657422;">d=</span>d_names) <span class="co" style="color: #5E5E5E;"># save intermediate steps, if desired</span></span>
<span id="cb2-29">  } <span class="cf" style="color: #003B4F;">else</span> {</span>
<span id="cb2-30">    steps <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cn" style="color: #8f5902;">NA</span></span>
<span id="cb2-31">  }</span>
<span id="cb2-32">  <span class="co" style="color: #5E5E5E;"># Gradients:</span></span>
<span id="cb2-33">  grad <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x,y,w) {</span>
<span id="cb2-34">    w <span class="sc" style="color: #5E5E5E;">%*%</span> <span class="fu" style="color: #4758AB;">ifelse</span>(<span class="fu" style="color: #4758AB;">crossprod</span>(x,w) <span class="sc" style="color: #5E5E5E;">*</span> y<span class="sc" style="color: #5E5E5E;">&lt;=</span><span class="dv" style="color: #AD0000;">1</span>,<span class="sc" style="color: #5E5E5E;">-</span>y,<span class="dv" style="color: #AD0000;">0</span>) <span class="co" style="color: #5E5E5E;"># gradient of Hinge loss with respect to X</span></span>
<span id="cb2-35">  }</span>
<span id="cb2-36">  grad_dist <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(x,x_star) {</span>
<span id="cb2-37">    d <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">length</span>(x_star)</span>
<span id="cb2-38">    distance <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">dist</span>(<span class="fu" style="color: #4758AB;">matrix</span>(<span class="fu" style="color: #4758AB;">cbind</span>(x_star,x),<span class="at" style="color: #657422;">nrow=</span>d,<span class="at" style="color: #657422;">byrow =</span> T))</span>
<span id="cb2-39">    <span class="fu" style="color: #4758AB;">matrix</span>((x<span class="sc" style="color: #5E5E5E;">-</span>x_star) <span class="sc" style="color: #5E5E5E;">/</span> distance) <span class="co" style="color: #5E5E5E;"># gradient of Euclidean distance with respect to X</span></span>
<span id="cb2-40">  }</span>
<span id="cb2-41">  <span class="co" style="color: #5E5E5E;"># Gradient descent: ----</span></span>
<span id="cb2-42">  <span class="cf" style="color: #003B4F;">while</span>(<span class="sc" style="color: #5E5E5E;">!</span>converged <span class="sc" style="color: #5E5E5E;">&amp;</span> iter<span class="sc" style="color: #5E5E5E;">&lt;</span>n_iter) {</span>
<span id="cb2-43">    <span class="cf" style="color: #003B4F;">if</span> (distance<span class="sc" style="color: #5E5E5E;">!=</span><span class="dv" style="color: #AD0000;">0</span>) {</span>
<span id="cb2-44">      x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(x <span class="sc" style="color: #5E5E5E;">-</span> eta <span class="sc" style="color: #5E5E5E;">*</span> (<span class="fu" style="color: #4758AB;">grad</span>(<span class="at" style="color: #657422;">x=</span><span class="fu" style="color: #4758AB;">matrix</span>(x),<span class="at" style="color: #657422;">y=</span><span class="dv" style="color: #AD0000;">1</span>,w) <span class="sc" style="color: #5E5E5E;">+</span> lambda <span class="sc" style="color: #5E5E5E;">*</span> <span class="fu" style="color: #4758AB;">grad_dist</span>(x,x_star))) <span class="co" style="color: #5E5E5E;"># gradient descent step</span></span>
<span id="cb2-45">    } <span class="cf" style="color: #003B4F;">else</span> {</span>
<span id="cb2-46">      x <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(x <span class="sc" style="color: #5E5E5E;">-</span> eta <span class="sc" style="color: #5E5E5E;">*</span> <span class="fu" style="color: #4758AB;">grad</span>(<span class="at" style="color: #657422;">x=</span><span class="fu" style="color: #4758AB;">matrix</span>(x),<span class="at" style="color: #657422;">y=</span><span class="dv" style="color: #AD0000;">1</span>,w)) <span class="co" style="color: #5E5E5E;"># gradient with respect to distance not defined at zero</span></span>
<span id="cb2-47">    }</span>
<span id="cb2-48">    converged <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">predict</span>(classifier, <span class="at" style="color: #657422;">newdata =</span> x)[<span class="dv" style="color: #AD0000;">1</span>,<span class="dv" style="color: #AD0000;">1</span>]<span class="sc" style="color: #5E5E5E;">==</span><span class="dv" style="color: #AD0000;">1</span> <span class="co" style="color: #5E5E5E;"># positive outcome?</span></span>
<span id="cb2-49">    iter <span class="ot" style="color: #003B4F;">&lt;-</span> iter <span class="sc" style="color: #5E5E5E;">+</span> <span class="dv" style="color: #AD0000;">1</span> <span class="co" style="color: #5E5E5E;"># update counter</span></span>
<span id="cb2-50">    <span class="cf" style="color: #003B4F;">if</span> (save_steps) {</span>
<span id="cb2-51">      steps <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">rbind</span>(steps, <span class="fu" style="color: #4758AB;">data.table</span>(<span class="at" style="color: #657422;">iter=</span>iter, <span class="at" style="color: #657422;">x=</span>x, <span class="at" style="color: #657422;">d=</span>d_names))</span>
<span id="cb2-52">    }</span>
<span id="cb2-53">    distance <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">dist</span>(<span class="fu" style="color: #4758AB;">matrix</span>(<span class="fu" style="color: #4758AB;">cbind</span>(x_star,x),<span class="at" style="color: #657422;">nrow=</span>d,<span class="at" style="color: #657422;">byrow =</span> T)) <span class="co" style="color: #5E5E5E;"># update distance</span></span>
<span id="cb2-54">  }</span>
<span id="cb2-55">  <span class="co" style="color: #5E5E5E;"># Output: ----</span></span>
<span id="cb2-56">  <span class="cf" style="color: #003B4F;">if</span> (converged) {</span>
<span id="cb2-57">    revise <span class="ot" style="color: #003B4F;">&lt;-</span> x <span class="sc" style="color: #5E5E5E;">-</span> x_star</span>
<span id="cb2-58">  } <span class="cf" style="color: #003B4F;">else</span> {</span>
<span id="cb2-59">    revise <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cn" style="color: #8f5902;">NA</span></span>
<span id="cb2-60">  }</span>
<span id="cb2-61">  output <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">list</span>(</span>
<span id="cb2-62">    <span class="at" style="color: #657422;">x_star =</span> x_star,</span>
<span id="cb2-63">    <span class="at" style="color: #657422;">revise =</span> revise,</span>
<span id="cb2-64">    <span class="at" style="color: #657422;">classifier =</span> classifier,</span>
<span id="cb2-65">    <span class="at" style="color: #657422;">steps =</span> steps,</span>
<span id="cb2-66">    <span class="at" style="color: #657422;">lambda =</span> lambda,</span>
<span id="cb2-67">    <span class="at" style="color: #657422;">distance =</span> distance,</span>
<span id="cb2-68">    <span class="at" style="color: #657422;">mean_distance =</span> <span class="fu" style="color: #4758AB;">mean</span>(<span class="fu" style="color: #4758AB;">abs</span>(revise))</span>
<span id="cb2-69">  )</span>
<span id="cb2-70">  <span class="fu" style="color: #4758AB;">return</span>(output)</span>
<span id="cb2-71">}</span>
<span id="cb2-72"></span>
<span id="cb2-73">revise <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(classifier,x_star,<span class="at" style="color: #657422;">eta=</span><span class="dv" style="color: #AD0000;">1</span>,<span class="at" style="color: #657422;">lambda=</span><span class="fl" style="color: #AD0000;">0.01</span>,<span class="at" style="color: #657422;">n_iter=</span><span class="dv" style="color: #AD0000;">1000</span>,<span class="at" style="color: #657422;">save_steps=</span><span class="cn" style="color: #8f5902;">FALSE</span>) {</span>
<span id="cb2-74">  <span class="fu" style="color: #4758AB;">UseMethod</span>(<span class="st" style="color: #20794D;">"revise"</span>)</span>
<span id="cb2-75">}</span></code></pre></div>
</div>
</section>
<section id="simulated-data" class="level3">
<h3 class="anchored" data-anchor-id="simulated-data">Simulated data</h3>
<p>The synthetic data describing cats and dogs was generated as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">sim_data <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="cf" style="color: #003B4F;">function</span>(<span class="at" style="color: #657422;">n=</span><span class="dv" style="color: #AD0000;">100</span>,averages,<span class="at" style="color: #657422;">noise=</span><span class="fl" style="color: #AD0000;">0.1</span>) {</span>
<span id="cb3-2">  d <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">ncol</span>(averages)</span>
<span id="cb3-3">  y <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">2</span><span class="sc" style="color: #5E5E5E;">*</span>(<span class="fu" style="color: #4758AB;">rbinom</span>(n,<span class="dv" style="color: #AD0000;">1</span>,<span class="fl" style="color: #AD0000;">0.5</span>)<span class="sc" style="color: #5E5E5E;">-</span><span class="fl" style="color: #AD0000;">0.5</span>) <span class="co" style="color: #5E5E5E;"># generate binary outcome: 1=dog, -1=cat</span></span>
<span id="cb3-4">  X <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">as.matrix</span>(averages[(y<span class="sc" style="color: #5E5E5E;">+</span><span class="dv" style="color: #AD0000;">1</span>)<span class="sc" style="color: #5E5E5E;">/</span><span class="dv" style="color: #AD0000;">2</span><span class="sc" style="color: #5E5E5E;">+</span><span class="dv" style="color: #AD0000;">1</span>,]) <span class="co" style="color: #5E5E5E;"># generate attributes conditional on y</span></span>
<span id="cb3-5">  dogs <span class="ot" style="color: #003B4F;">&lt;-</span> y<span class="sc" style="color: #5E5E5E;">==</span><span class="dv" style="color: #AD0000;">1</span> <span class="co" style="color: #5E5E5E;"># boolean index for dogs</span></span>
<span id="cb3-6">  cats <span class="ot" style="color: #003B4F;">&lt;-</span> y<span class="sc" style="color: #5E5E5E;">==-</span><span class="dv" style="color: #AD0000;">1</span> <span class="co" style="color: #5E5E5E;"># boolean index for cats</span></span>
<span id="cb3-7">  X[cats,] <span class="ot" style="color: #003B4F;">&lt;-</span> X[cats,] <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb3-8">    <span class="fu" style="color: #4758AB;">matrix</span>(<span class="fu" style="color: #4758AB;">rnorm</span>(<span class="fu" style="color: #4758AB;">sum</span>(cats)<span class="sc" style="color: #5E5E5E;">*</span>d),<span class="at" style="color: #657422;">nrow=</span><span class="fu" style="color: #4758AB;">sum</span>(cats)) <span class="sc" style="color: #5E5E5E;">%*%</span> <span class="fu" style="color: #4758AB;">diag</span>(noise<span class="sc" style="color: #5E5E5E;">*</span>averages[<span class="dv" style="color: #AD0000;">2</span>,]) <span class="co" style="color: #5E5E5E;"># add noise for y=1 (cats)</span></span>
<span id="cb3-9">  X[dogs,] <span class="ot" style="color: #003B4F;">&lt;-</span> X[dogs,] <span class="sc" style="color: #5E5E5E;">+</span> </span>
<span id="cb3-10">    <span class="fu" style="color: #4758AB;">matrix</span>(<span class="fu" style="color: #4758AB;">rnorm</span>(<span class="fu" style="color: #4758AB;">sum</span>(dogs)<span class="sc" style="color: #5E5E5E;">*</span>d),<span class="at" style="color: #657422;">nrow=</span><span class="fu" style="color: #4758AB;">sum</span>(dogs)) <span class="sc" style="color: #5E5E5E;">%*%</span> <span class="fu" style="color: #4758AB;">diag</span>(noise<span class="sc" style="color: #5E5E5E;">*</span>averages[<span class="dv" style="color: #AD0000;">2</span>,]) <span class="co" style="color: #5E5E5E;"># add noise for y=1 (dogs)</span></span>
<span id="cb3-11">  <span class="fu" style="color: #4758AB;">return</span>(<span class="fu" style="color: #4758AB;">list</span>(<span class="at" style="color: #657422;">X=</span>X,<span class="at" style="color: #657422;">y=</span>y))</span>
<span id="cb3-12">}</span></code></pre></div>
</div>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2021,
  author = {Patrick Altmeyer},
  title = {Individual Recourse for {Black} {Box} {Models}},
  date = {21-04-27},
  url = {https://www.paltmeyer.com/blog//blog/posts/individual-recourse-for-black-box-models},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2021" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 21AD. <span>‚ÄúIndividual Recourse for Black Box
Models.‚Äù</span> April 27, 21AD. <a href="https://www.paltmeyer.com/blog//blog/posts/individual-recourse-for-black-box-models">https://www.paltmeyer.com/blog//blog/posts/individual-recourse-for-black-box-models</a>.
</div></div></section></div> ]]></description>
  <category>counterfactuals</category>
  <category>algorithmic recourse</category>
  <category>deep learning</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/individual-recourse-for-black-box-models/index.html</guid>
  <pubDate>Mon, 26 Apr 2021 22:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/individual-recourse-for-black-box-models/www/intro.gif" medium="image" type="image/gif"/>
</item>
<item>
  <title>A peek inside the ‚ÄòBlack Box‚Äô - interpreting neural networks</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/a-peek-inside-the-black-box-interpreting-neural-networks/index.html</link>
  <description><![CDATA[ 



<div class="intro-gif">
<figure class="figure">
<img src="https://www.paltmeyer.com/blog/blog/posts/a-peek-inside-the-black-box-interpreting-neural-networks/www/intro.jpeg" class="figure-img">
</figure>
</div>
<p>Propelled by advancements in modern computer technology, deep learning has re-emerged as perhaps the most promising artificial intelligence (AI) technology of the last two decades. By treating problems as a nested, hierarchy of hidden layers deep artificial neural networks achieve the power and flexibility necessary for AI systems to navigate complex real-world environments. Unfortunately, their very nature has earned them a reputation as <em>Black Box</em> algorithms and their lack of interpretability remains a major impediment to their more wide-spread application.</p>
<p>In science, research questions usually demand not just answers but also explanations and variable selection is often as important as prediction <span class="citation" data-cites="ish-horowicz2019interpreting">(Ish-Horowicz et al. 2019)</span>. Economists, for example, recognise the undeniable potential of deep learning, but are rightly hesitant to employ novel tools that are not fully transparent and ultimately cannot be trusted. Similarly, real-world applications of AI have come under increasing scrutiny with regulators imposing that individuals influenced by algorithms should have the right to obtain explanations <span class="citation" data-cites="fan2020interpretability">(Fan, Xiong, and Wang 2020)</span>. In high-risk decision-making fields such as AI systems that drive autonomous vehicles the need for explanations is self-evident <span class="citation" data-cites="ish-horowicz2019interpreting">(Ish-Horowicz et al. 2019)</span>.</p>
<p>In light of these challenges it is not surprising that research on explainable AI has recently gained considerable momentum <span class="citation" data-cites="arrieta2020explainable">(Arrieta et al. 2020)</span>. While in this short essay we will focus on deep learning in particular, it should be noted that this growing body of literature is concerned with a broader realm of machine learning models. The rest of this note is structured as follows: the first section provides a brief overview of recent advancements towards interpreting deep neural networks largely drawing on <span class="citation" data-cites="fan2020interpretability">Fan, Xiong, and Wang (2020)</span>; the second section considers a novel entropy-based approach towards interpretability proposed by <span class="citation" data-cites="crawford2019variable">Crawford et al. (2019)</span>; finally, in the last section we will see how this approach can be applied to deep neural networks as proposed in <span class="citation" data-cites="ish-horowicz2019interpreting">Ish-Horowicz et al. (2019)</span>.</p>
<section id="interpretable-dl" class="level1">
<h1>Interpretable DL - a whistle-stop tour</h1>
<p>Before delving further into <em>how</em> the intrinsics of deep neural networks can be disentangled we should first clarify <em>what</em> interpretability in the context of algorithms actually means. <span class="citation" data-cites="fan2020interpretability">Fan, Xiong, and Wang (2020)</span> describes model interpretability simply as the extent to which humans can ‚Äúunderstand and reason‚Äù the model. This may concern an understanding of both the <em>ad-hoc</em> workings of the algorithm as well as the <em>post-hoc</em> interpretability of its output. In the context of linear regression, for example, <em>ad-hoc</em> workings of the model are often described through the intuitive idea of linearly projecting the outcome variable <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7By%7D"> onto the column space of <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D">. <em>Post-hoc</em> interpretations usually center around variable importance ‚Äì the main focus of the following sections. Various recent advancements tackle interpretability of DNNs from different angles depending on whether the focus is on <em>ad-hoc</em> or <em>post-hoc</em> interpretability. <span class="citation" data-cites="fan2020interpretability">Fan, Xiong, and Wang (2020)</span> further asses that model interpretability hinges on three main aspects of <em>simulatability</em>, <em>decomposability</em> and <em>algorithmic transparency</em>, but for the purpose of this short note the <em>ad-hoc</em> vs.&nbsp;<em>post-hoc</em> taxonomy provides a simpler more natural framework. <sup>1</sup></p>
<p>Understanding the <em>ad-hoc</em> intrinsic mechanisms of a DNN is inherently difficult. While generally transparency may be preserved in the presence of nonlinearity (e.g.&nbsp;decision trees), multiple hidden layers of networks (each of them) involving nonlinear operations are usually out of the realm of human comprehension <span class="citation" data-cites="fan2020interpretability">(Fan, Xiong, and Wang 2020)</span>. Training also generally involves optimization of non-convex functions that involve an increasing number of saddle points as the dimensionality increases <span class="citation" data-cites="fan2020interpretability">(Fan, Xiong, and Wang 2020)</span>. Methods to circumvent this problematic usually boil down to decreasing the overall complexity, either by regularizing the model or through proxy methods. Regularization ‚Äì while traditionally done to avoid overfitting ‚Äì has been found to be useful to create more interpretable representations. Monotonicity constraints, for example, impose that as the value of a specified covariate increases model predictions either monotonically decrease or increase. Proxy methods construct simpler representations of a learned DNN, such as a rule-based decision tree. This essentially involves repeatedly querying the trained network while varying the inputs and then deriving decision rules based on the model output.</p>
<p>Post-hoc interpretability usually revolves around the understanding of feature importance. A greedy approach to this issue involves simply removing features one by one and checking how model predictions change. A more sophisticated approach along these lines is <em>Shapley</em> value, which draws on cooperative game theory. The Shapley value assigns varying payouts to players depending on their contribution to overall payout. In the context of neural networks input covariate <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D_p"> represents a player while overall payout is represented by the difference between average and individual outcome predictions.<sup>2</sup> Exact computations of Shapley values are prohibitive as the dimensionality increases, though approximate methods have recently been developed <span class="citation" data-cites="fan2020interpretability">(Fan, Xiong, and Wang 2020)</span>.</p>
<p>The remainder of this note focuses on a novel approach to feature extraction that measures entropy shifts in a learned probabilistic neural network in response to model inputs <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX_1%7D,...,%5Cmathbf%7BX%7D_P">. We will first introduce this methodology in the context of Gaussian Process regression in the following section before finally turning to its application to Bayesian neural networks.</p>
</section>
<section id="rate" class="level1">
<h1>An entropy-based approach to variable importance</h1>
<p><span class="citation" data-cites="ish-horowicz2019interpreting">Ish-Horowicz et al. (2019)</span> motivate their methodology for interpreting neural networks through Gaussian Process regression. Consider the following Bayesian regression model with Gaussian priors:</p>
<p><span id="eq-bayes"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20f(%5Cmathbf%7BX%7D%7C%5Cmathbf%7Bw%7D)&amp;=%5Cphi(%5Cmathbf%7BX%7D)%5ET%5Cmathbf%7Bw%7D%20+%20%5Cvarepsilon,%20&amp;&amp;%5Cvarepsilon%20%5Csim%20%5Cmathcal%7BN%7D(0,%5Cmathbf%7BI%7D)%20%5C%5C%0A&amp;&amp;%20%5Cmathbf%7Bw%7D&amp;%20%5Csim%20%5Cmathcal%7BN%7D(0,%7B1%5Cover%7B%5Clambda%7D%7D%20%5Cmathbf%7BI%7D)%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B1%7D"></span></p>
<p>This naturally gives rise to a particular example of a Gaussian Process (GP). In particular, since <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bu%7D(%5Cmathbf%7BX%7D)=%5CPhi(%5Cmathbf%7BX%7D)%5ET%5Cmathbf%7Bw%7D"> is just a linear combination fo Gaussian random variables it follows a Gaussian Process itself</p>
<p><span id="eq-khbs"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Cmathbf%7Bu%7D(%5Cmathbf%7BX%7D)=%5CPhi(%5Cmathbf%7BX%7D)%5ET%5Cmathbf%7Bw%7D&amp;%20%5Csim%20%5Cmathcal%7BN%7D(%5Cmathbf%7B0%7D,%20%5Cmathbf%7BK%7D)%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B2%7D"></span></p>
<p>where <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BK%7D"> is the Kernel (or Gram) matrix and <img src="https://latex.codecogs.com/png.latex?K_%7Bi,j%7D=k(%5Cmathbf%7BX_i,%5Cmathbf%7BX%7D_j%7D)=%7B1%5Cover%7B%5Clambda%7D%7D%5Cphi(%5Cmathbf%7BX_i%7D)%5ET%5Cphi(%5Cmathbf%7BX_m%7D)"> is the kernel function <span class="citation" data-cites="bishop2006pattern">(Bishop 2006)</span>. In other words, the prior distribution over <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D"> induces a probability distribution over random functions <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bu%7D(%5Cmathbf%7BX%7D)">. Similarly, the GP can be understood as a prior distribution over a an infinite-dimensional reproducible kernel Hilbert space (RKHS) <span class="citation" data-cites="crawford2019variable">(Crawford et al. 2019)</span>, which in a finite-dimensional setting becomes multivariate Gaussian.</p>
<p>In a standard linear regression model coefficients characterize the projection of the outcome variable <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7By%7D"> onto the column space of the regressors <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D">. In particular, with ordinary least square we define:</p>
<p><span id="eq-ols"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Cbeta&amp;=(%5Cmathbf%7BX%7D%5ET%5Cmathbf%7BX%7D)%5E%7B-1%7D%5Cmathbf%7BX%7D%5ET%5Cmathbf%7By%7D%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B3%7D"></span></p>
<p>The primary focus here is to learn the mapping from input to output. The key differentiating feature between this approach and the non-parametric model in Equation&nbsp;1 is the fact that in case of the latter we are interested in learning not only the mapping from inputs to outputs, but also the representation (<img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bu%7D(%5Cmathbf%7BX%7D)">) of the inputs (see for example <span class="citation" data-cites="goodfellow2016deep">(Goodfellow, Bengio, and Courville 2016)</span>). To be even more specific, treating the feature representation itself as random as in Equation&nbsp;1 allows us to learn non-linear relationships between the covariates <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D">, since they are implicitly captured by the RKHS <span class="citation" data-cites="crawford2019variable">(Crawford et al. 2019)</span>. Neural networks share this architecture and hence it is worth dwelling on it a bit further: the fact that the learned model inherently incorporates variable interactions leads to the observation that an individual feature is rarely important on its own with respect to the mapping from <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D"> to <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7By%7D"> <span class="citation" data-cites="ish-horowicz2019interpreting">(Ish-Horowicz et al. 2019)</span>. Hence, in order to gain an understanding of individual variable importance, one should aim to understand what role feature <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D_j"> plays <em>within</em> the learned model, thereby taking into account its interactions with other covariates. Formally, <span class="citation" data-cites="crawford2019variable">Crawford et al. (2019)</span> and define the <em>effect size analogue</em> as the equivalent of the familiar regression coefficient in the non-parametric setting</p>
<p><span id="eq-effect-size"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Ctilde%5Cbeta&amp;=%5Cmathbf%7BX%7D%5E+%5CPhi%5ET%5Cmathbf%7Bw%7D=%5Cmathbf%7BX%7D%5E+%5Cmathbf%7Bu%7D%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B4%7D"></span></p>
<p>where <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D%5E+=%5Clim_%7B%5Calpha%7D%20(%5Cmathbf%7BX%7D%5ET%5Cmathbf%7BX%7D+%5Calpha%20%5Cmathbf%7BI%7D)%5E%7B-1%7D%5Cmathbf%7BX%7D%5ET"> denotes the Moore-Penrose pseudo-inverse (see for example <span class="citation" data-cites="goodfellow2016deep">Goodfellow, Bengio, and Courville (2016)</span>). Intuitively the effect size analogue can be thought of as the resulting coefficients from regressing the fitted values <img src="https://latex.codecogs.com/png.latex?%5Chat%7B%5Cmathbf%7Bu%7D%7D"> from the learned probabilistic model on the covariates <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D">. It can be interpreted in the same way as linear regression coefficients, in the sense that <img src="https://latex.codecogs.com/png.latex?%5Ctilde%5Cbeta_j"> describes the marginal change in <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bu%7D"> given a unit increase in <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D_j"> holding all else constant. Note here the subtle, but crucial difference between Equation&nbsp;3 ‚Äì a projection from the outcome variable onto the column space of <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D"> ‚Äì and Equation&nbsp;4 ‚Äì a projection from the learned model to <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D">. In other words, looking at <img src="https://latex.codecogs.com/png.latex?%5Ctilde%5Cbeta"> can be thought of peeking directly into the <em>Block Box</em>. Unfortunately, as <span class="citation" data-cites="crawford2019variable">Crawford et al. (2019)</span> point out, working with Equation&nbsp;4 is usually not straight-forward. From a practitioner‚Äôs point of view, it may also not be obvious how to interpret a coefficient that describes marginal effects of input variables on a learned model. A more useful indicator in this context would provide a measure of how much individual variables contribute to the overall variation in the learned model. For this purpose <span class="citation" data-cites="crawford2019variable">Crawford et al. (2019)</span> propose to work with a distributional centrality measure based on <img src="https://latex.codecogs.com/png.latex?%5Ctilde%5Cbeta">, which we shall turn to next.</p>
<p>The proposed methodology in <span class="citation" data-cites="crawford2019variable">Crawford et al. (2019)</span> and <span class="citation" data-cites="ish-horowicz2019interpreting">Ish-Horowicz et al. (2019)</span> depends on the availability of a posterior distribution over <img src="https://latex.codecogs.com/png.latex?%5Ctilde%5Cbeta"> in that it measures its entropic shifts in response to the introduction of covariates. The intuition is straight-forward: within the context of the learned probabilistic model is covariate <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D_j"> informative or not? More formally this boils down to determining if the posterior distribution of <img src="https://latex.codecogs.com/png.latex?p(%5Ctilde%5Cbeta_%7B-j%7D)"> is dependent on the effect of <img src="https://latex.codecogs.com/png.latex?%5Ctilde%5Cbeta_j">. This can be quantified through the Kullback-Leibler divergence (KLD) between <img src="https://latex.codecogs.com/png.latex?p(%5Ctilde%5Cbeta_%7B-j%7D)"> and the conditional posterior <img src="https://latex.codecogs.com/png.latex?p(%5Ctilde%5Cbeta_%7B-j%7D%7C%5Ctilde%5Cbeta_j)">:</p>
<p><span id="eq-kld"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Ctext%7BKLD%7D_j&amp;=%5Ctext%7BKL%7D%5Cleft(p(%5Ctilde%5Cbeta_%7B-j%7D)%20%7C%7C%20p(%5Ctilde%5Cbeta_%7B-j%7D%7C%5Ctilde%5Cbeta_j)%5Cright)%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B5%7D"></span></p>
<p>Covariates that contribute significant information to the model will have <img src="https://latex.codecogs.com/png.latex?%5Ctext%7BKLD%7D%3E0">, while for insignificant covariates <img src="https://latex.codecogs.com/png.latex?%5Ctext%7BKLD%7D%5Capprox0">. The measure of induced entropy change gives rise to a ranking of the covariates in terms of their relative importance in the model. The RATE criterion of variable <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D_j"> is then simply defined as</p>
<p><span id="eq-rate"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Cgamma_j&amp;=%5Cfrac%7B%5Ctext%7BKLD%7D_j%7D%7B%5Csum_%7Bp=1%7D%5E%7BP%7D%5Ctext%7BKLD%7D_p%7D%5Cin%5B0,1%5D%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B6%7D"></span></p>
<p>which in light of its bounds can naturally be interpreted as <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D_j">`s percentage contribution to the learned model. It is worth noting that <img src="https://latex.codecogs.com/png.latex?p(%5Ctilde%5Cbeta_%7B-j%7D%7C%5Ctilde%5Cbeta_j)"> of course depends on the value of the conditioning variable. A natural choice is <img src="https://latex.codecogs.com/png.latex?%5Ctilde%5Cbeta_j=0"> which usually corresponds to the null hypothesis.</p>
</section>
<section id="interpreting-bnns" class="level1">
<h1>Application to Bayesian neural networks</h1>
<p>In order to use the RATE criterion in the context of deep learning we need to work in the Bayesian setting. Contrary to standard artificial neural networks which work under the assumption that weights have some true latent value, Bayesian neural networks place a prior distribution over network parameters and hence treat weights as random variables <span class="citation" data-cites="goan2020bayesian">(Goan and Fookes 2020)</span>. Not only does it perhaps seem more natural to treat unobserved weights as random, but the Bayesian setting also naturally gives rise to reason about uncertainty in predictions, which can ultimately help us develop more trustworthy models <span class="citation" data-cites="goan2020bayesian">(Goan and Fookes 2020)</span>. A drawback of BNNs is that exact computation of posteriors is computationally challenging and often intractable (a non-trivial issue that we will turn back to in a moment).</p>
<p>When the prior placed over parameters is Gaussian, the output of the BNN approaches a Gaussian Process as the width of the network grows, in line with the discussion in the previous section. This is exactly the assumption that <span class="citation" data-cites="ish-horowicz2019interpreting">Ish-Horowicz et al. (2019)</span> work with. They propose an architecture for a multi-layer perceptron (MLP) composed of (1) an input layer collecting covariates <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D_1,...,%5Cmathbf%7BX%7D_p">, (2) a single deterministic, hidden layer and (3) an outer layer producing predictions from a probabilistic model <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bu%7D(%5Cmathbf%7BX%7D)">. Let <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BX%7D"> be a <img src="https://latex.codecogs.com/png.latex?(N%20%5Ctimes%20P)"> matrix of covariates. Then formally, we have</p>
<p><span id="eq-bnn"><img src="https://latex.codecogs.com/png.latex?%0A%5Cbegin%7Bequation%7D%0A%5Cbegin%7Baligned%7D%0A&amp;&amp;%20%5Chat%7B%5Cmathbf%7By%7D%7D&amp;=%5Csigma(%5Cmathbf%7Bu%7D)%20%5C%5C%0A&amp;&amp;%20%5Cmathbf%7Bu%7D(%5Cmathbf%7BZ%7D)&amp;=%5Cmathbf%7BZ%7D(%5Cmathbf%7BX%7D)%5Cmathbf%7Bw%7D%5E%7B(L+1)%7D,%20&amp;&amp;%20%5Cmathbf%7Bw%7D%5E%7B(L+1)%7D%20%5Csim%20%5Cmathcal%7BN%7D(%5Cmathbf%7Bm%7D,%20%5Cmathbf%7BV%7D)%20%5C%5C%0A&amp;&amp;%20%5Cmathbf%7BZ%7D(%5Cmathbf%7BX%7D)&amp;=f(%5Cmathbf%7BX%7D%5Cmathbf%7Bw%7D%5E%7B(L)%7D)%20%5C%5C%0A%5Cend%7Baligned%7D%0A%5Cend%7Bequation%7D%0A%5Ctag%7B7%7D"></span></p>
<p>where <img src="https://latex.codecogs.com/png.latex?%5Csigma(.)"> is a link function and <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bu%7D(%5Cmathbf%7BX%7D)"> represents the probabilistic model learned in the outer layer with weights <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D%5E%7B(L+1)%7D"> assumed to be Gaussian random variables.<sup>3</sup> Finally, <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7BZ%7D(%5Cmathbf%7BX%7D)"> denotes the inner (or more generally penultimate) layer, an <img src="https://latex.codecogs.com/png.latex?(N%20%5Ctimes%20P)"> matrix of neural activations through <img src="https://latex.codecogs.com/png.latex?f:(%5Cmathbf%7BX%7D%5Cmathbf%7Bw%7D%5E%7B(L)%7D)%5Cmapsto%20%5Cmathbf%7BZ%7D">. <span class="citation" data-cites="ish-horowicz2019interpreting">Ish-Horowicz et al. (2019)</span> work with a simple single-layer MLP, but it should be evident that this be extended to arbitrary depth and complexity, while still maintaining the high-level structure imposed by Equation&nbsp;7. This flexibility allows RATE to be applied to a wide range of Bayesian network architectures, since all that is really required is the posterior distribution over weights <img src="https://latex.codecogs.com/png.latex?%5Cmathbf%7Bw%7D%5E%7B(L+1)%7D">, which arises from the probabilistic outer layer. The fact that only the outer layer needs to be probabilistic has the additional benefit of mitigating the computational burden that comes with Bayesian inference, which was mentioned earlier.</p>
<p>Having established this basic, flexible set-up the <span class="citation" data-cites="ish-horowicz2019interpreting">Ish-Horowicz et al. (2019)</span> go on to derive closed-form expressions for RATE in this setting. The details are omitted here since the logic is largely analogous to what we learned above, but can be found in <span class="citation" data-cites="ish-horowicz2019interpreting">Ish-Horowicz et al. (2019)</span>.</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>The RATE criterion originally proposed by <span class="citation" data-cites="crawford2019variable">Crawford et al. (2019)</span> and shown to be applicable to Bayesian neural networks in <span class="citation" data-cites="ish-horowicz2019interpreting">Ish-Horowicz et al. (2019)</span> offers an intuitive way to measure variable importance in the context of deep learning. By defining variable importance as the contribution inputs make to a probabilistic model, it implicitly incorporates the interactions between covariates and nonlinearities that the model has learned. In other words, it allows researchers to peek directly into the <em>Black Box</em>. This opens up interesting avenues for future research, as the approach can be readily applied in academic disciplines and real-world applications that rely heavily on explainability of outcomes.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="references" class="level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-arrieta2020explainable" class="csl-entry">
Arrieta, Alejandro Barredo, Natalia Diaz-Rodriguez, Javier Del Ser, Adrien Bennetot, Siham Tabik, Alberto Barbado, Salvador Garcia, et al. 2020. <span>‚ÄúExplainable <span>Artificial Intelligence</span> (<span>XAI</span>): <span>Concepts</span>, Taxonomies, Opportunities and Challenges Toward Responsible <span>AI</span>.‚Äù</span> <em>Information Fusion</em> 58: 82‚Äì115.
</div>
<div id="ref-bishop2006pattern" class="csl-entry">
Bishop, Christopher M. 2006. <em>Pattern Recognition and Machine Learning</em>. <span>springer</span>.
</div>
<div id="ref-crawford2019variable" class="csl-entry">
Crawford, Lorin, Seth R Flaxman, Daniel E Runcie, and Mike West. 2019. <span>‚ÄúVariable Prioritization in Nonlinear Black Box Methods: <span>A</span> Genetic Association Case Study.‚Äù</span> <em>The Annals of Applied Statistics</em> 13 (2): 958.
</div>
<div id="ref-fan2020interpretability" class="csl-entry">
Fan, Fenglei, Jinjun Xiong, and Ge Wang. 2020. <span>‚ÄúOn Interpretability of Artificial Neural Networks.‚Äù</span> <a href="https://arxiv.org/abs/2001.02522">https://arxiv.org/abs/2001.02522</a>.
</div>
<div id="ref-goan2020bayesian" class="csl-entry">
Goan, Ethan, and Clinton Fookes. 2020. <span>‚ÄúBayesian <span>Neural Networks</span>: <span>An Introduction</span> and <span>Survey</span>.‚Äù</span> In <em>Case <span>Studies</span> in <span>Applied Bayesian Data Science</span></em>, 45‚Äì87. <span>Springer</span>.
</div>
<div id="ref-goodfellow2016deep" class="csl-entry">
Goodfellow, Ian, Yoshua Bengio, and Aaron Courville. 2016. <em>Deep <span>Learning</span></em>. <span>MIT Press</span>.
</div>
<div id="ref-ish-horowicz2019interpreting" class="csl-entry">
Ish-Horowicz, Jonathan, Dana Udwin, Seth Flaxman, Sarah Filippi, and Lorin Crawford. 2019. <span>‚ÄúInterpreting Deep Neural Networks Through Variable Importance.‚Äù</span> <a href="https://arxiv.org/abs/1901.09839">https://arxiv.org/abs/1901.09839</a>.
</div>
</div>
<div style="page-break-after: always;"></div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Simulatability describes the overall, high-level understandability of the mechanisms underlying the model ‚Äì put simply, the less complex the model, the higher its simulatability. Decomposability concerns the extent to which the model can be taken apart into smaller pieces ‚Äì neural networks by there very nature are compositions of multiple layers. Finally, algorithmic transparency refers to the extent to which the training of the algorithm is well-understood and to some extent observable ‚Äì since DNNs generally deal with optimization of non-convex functions and often lack unique solution they are inherently intransparent.‚Ü©Ô∏é</p></li>
<li id="fn2"><p>For more detail see for example <a href="https://christophm.github.io/interpretable-ml-book/shapley.html">here</a>.‚Ü©Ô∏é</p></li>
<li id="fn3"><p>For simplicity I have omitted the deterministic bias term.‚Ü©Ô∏é</p></li>
</ol>
</section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2021,
  author = {Patrick Altmeyer},
  title = {A Peek Inside the ‚Äú{Black} {Box}‚Äù - Interpreting Neural
    Networks},
  date = {21-02-07},
  url = {https://www.paltmeyer.com/blog//blog/posts/a-peek-inside-the-black-box-interpreting-neural-networks},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2021" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 21AD. <span>‚ÄúA Peek Inside the <span>‚ÄòBlack
Box‚Äô</span> - Interpreting Neural Networks.‚Äù</span> February 7, 21AD. <a href="https://www.paltmeyer.com/blog//blog/posts/a-peek-inside-the-black-box-interpreting-neural-networks">https://www.paltmeyer.com/blog//blog/posts/a-peek-inside-the-black-box-interpreting-neural-networks</a>.
</div></div></section></div> ]]></description>
  <category>deep learning</category>
  <category>explainable AI</category>
  <category>bayes</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/a-peek-inside-the-black-box-interpreting-neural-networks/index.html</guid>
  <pubDate>Sat, 06 Feb 2021 23:00:00 GMT</pubDate>
  <media:content url="https://www.paltmeyer.com/blog/blog/posts/a-peek-inside-the-black-box-interpreting-neural-networks/www/intro.jpeg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>How I‚Äôm building this website in R</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/how-i-m-building-this-website-in-r/index.html</link>
  <description><![CDATA[ 



<div class="callout callout-style-default callout-note callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Update on Feb 20, 2022</strong></p>
<p>The post below was written when I still used <code>blogdown</code> in combination with Hugo to build this blog. I have recently migrated the blog (along pretty much everything else I do) to <a href="https://quarto.org/">quarto</a>.</p>
<blockquote class="blockquote">
<p>Quarto¬Æ is an open-source scientific and technical publishing system built on Pandoc.</p>
</blockquote>
<p>Based on my first few experiences I would go further and say that quarto is <em>the only</em> open-source scientific and technical publishing system you‚Äôll ever need. The project is supported by RStudio and (unsurprisingly) Yihui Xie is one of the contributors. Go check it out!</p>
</div>
</div>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting started</h2>
<p>It turns out building a static website in R is remarkably easy, as long as you know your way around R Markdown. Knowledge of HTML and CSS helps, but is not strictly necessary and can be acquired along the way. My package of choice for this website is <code>blogdown</code> by <a href="https://yihui.org/">Yihui Xie</a> who has had a major impact on the R community through his many package contributions (<code>knitr</code>, <code>bookdown</code>, <code>pagedown</code>, ‚Ä¶) and certainly made my life a lot easier on many occasions.</p>
<p>To get started just follow the instructions on <code>blogdown</code>‚Äôs <a href="https://github.com/rstudio/blogdown">GitHub repository</a> or keep reading here for a high-level overview. Setting up a basic website in R requires exactly two steps:</p>
<ol type="1">
<li><p>Set up a local directory for the website. Let‚Äôs suppose you create it here <code>~/Documents/myAwesomeWebsite</code>.</p></li>
<li><p>In R, navigate to the directory and simply run <code>blogdown::newsite()</code>.</p></li>
</ol>
<p>This will set up a basic template which you can develop. Changing the theme and playing with the basic structure of the website is relatively straight-forward. Personally I have so far managed to work things out based on a working knowledge of HTML and CSS that I‚Äôve developed in the past through my work with R Shiny.</p>
</section>
<section id="deploying-your-website" class="level2">
<h2 class="anchored" data-anchor-id="deploying-your-website">Deploying your website</h2>
<p>There are various ways to deploy your website, i.e.&nbsp;make it accessible to the public. This website is deployed through GitHub pages. Detailed instructions on how to do this can be found <a href="https://bookdown.org/yihui/blogdown/github-pages.html">here</a>. Since I already had an existing local clone of my <code>pat-alt.github.io</code> repo, I just dropped it in the source directory of the website:</p>
<pre><code>source/
‚îÇ
‚îú‚îÄ‚îÄ config.yaml
‚îú‚îÄ‚îÄ content/
‚îú‚îÄ‚îÄ themes/
‚îî‚îÄ‚îÄ ...

patalt.github.io/
‚îÇ
‚îú‚îÄ‚îÄ .git/
‚îú‚îÄ‚îÄ .nojekyll
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ about/
‚îî‚îÄ‚îÄ ...</code></pre>
<p>After adding <code>publishDir: pat-alt.github.io</code> to my <code>config.yaml</code> and then running <code>blogdown::hugo_build()</code> the website was built inside the clone. All that was left to do was to commit changes from the local clone to the <code>pat-alt.github.io</code> remote repo. A few moments later the website was already up and running.</p>
</section>
<section id="why-all-the-trouble" class="level2">
<h2 class="anchored" data-anchor-id="why-all-the-trouble">Why all the trouble?</h2>
<p>There are certainly easier ways to build a website. But if like me you do pretty much all your work in R Markdown and want to share some of it, then you will love <code>blogdown</code>. The beauty of it is that once the basic infrastructure is set up, adding content is as simple as running the following wrapper function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">blogdown<span class="sc" style="color: #5E5E5E;">::</span><span class="fu" style="color: #4758AB;">new_post</span>(<span class="st" style="color: #20794D;">"Your new post"</span>, <span class="at" style="color: #657422;">ext =</span> <span class="st" style="color: #20794D;">".Rmd"</span>)</span></code></pre></div>
</div>
<p>where the first argument is just the title of your post and the <code>ext</code> argument can be used to specify that you want to create an R Markdown document that can include code chucks. The wrapper function will automatically set up a directory for your post under <code>/post/</code>. R Studio will redirect you to the relevant <code>.Rmd</code> file that you can then fill with content. By default that folder will look roughly like this:</p>
<pre><code>‚îú‚îÄ‚îÄ index.Rmd
‚îú‚îÄ‚îÄ index.html
‚îî‚îÄ‚îÄ index_files
    ‚îî‚îÄ‚îÄ header-attrs
        ‚îî‚îÄ‚îÄ header-attrs.js</code></pre>
</section>
<section id="a-simple-coding-example" class="level2">
<h2 class="anchored" data-anchor-id="a-simple-coding-example">A simple coding example</h2>
<p>As you can probably tell from the code chunks above this post was created just in the way I described. So I thought I might as well go ahead with a simple coding example to add some flavour. Suppose you have built some function that you think is worth sharing with the world or simply learned something new and interesting. As a case in point, I recently had a look at the <code>Rcpp</code> package and wrote a small program in C++ to be used in R. Since R Markdown supports <code>Rcpp</code> code chunks (along with Python, bash, SQL, ‚Ä¶) it is straight-forward to show-case that code on this website.</p>
<p>The program can be used to simulate data from a categorical distribution. This distribution describes the possible results of a random variable that can take on one of <img src="https://latex.codecogs.com/png.latex?K"> possible categories with different probabilities. In base R we could use <code>rmultinom(n=1000,1,p=c(0.5,0.1,0.4))</code> to simulate draws from one such distribution with three different categories. Alternatively, we could write the program in C++ as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode cpp code-with-copy"><code class="sourceCode cpp"><span id="cb4-1"><span class="pp" style="color: #AD0000;">#include </span><span class="im" style="color: #00769E;">&lt;Rcpp.h&gt;</span></span>
<span id="cb4-2"><span class="kw" style="color: #003B4F;">using</span> <span class="kw" style="color: #003B4F;">namespace</span> Rcpp<span class="op" style="color: #5E5E5E;">;</span></span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;">// [[Rcpp::export]]</span></span>
<span id="cb4-5">NumericMatrix simCategorical<span class="op" style="color: #5E5E5E;">(</span><span class="dt" style="color: #AD0000;">int</span> n<span class="op" style="color: #5E5E5E;">,</span> NumericVector p<span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">{</span></span>
<span id="cb4-6">  <span class="dt" style="color: #AD0000;">int</span> k <span class="op" style="color: #5E5E5E;">=</span> p<span class="op" style="color: #5E5E5E;">.</span>size<span class="op" style="color: #5E5E5E;">();</span></span>
<span id="cb4-7">  NumericMatrix mat<span class="op" style="color: #5E5E5E;">(</span>k<span class="op" style="color: #5E5E5E;">,</span> n<span class="op" style="color: #5E5E5E;">);</span></span>
<span id="cb4-8">  <span class="co" style="color: #5E5E5E;">// Normalise prob if necessary:</span></span>
<span id="cb4-9">  <span class="cf" style="color: #003B4F;">if</span> <span class="op" style="color: #5E5E5E;">(</span>sum<span class="op" style="color: #5E5E5E;">(</span>p<span class="op" style="color: #5E5E5E;">)!=</span><span class="dv" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">{</span></span>
<span id="cb4-10">    p <span class="op" style="color: #5E5E5E;">=</span> p<span class="op" style="color: #5E5E5E;">/</span>sum<span class="op" style="color: #5E5E5E;">(</span>p<span class="op" style="color: #5E5E5E;">);</span></span>
<span id="cb4-11">  <span class="op" style="color: #5E5E5E;">}</span></span>
<span id="cb4-12">  NumericVector emp_cdf <span class="op" style="color: #5E5E5E;">=</span> cumsum<span class="op" style="color: #5E5E5E;">(</span>p<span class="op" style="color: #5E5E5E;">);</span></span>
<span id="cb4-13">  NumericVector u <span class="op" style="color: #5E5E5E;">=</span> Rcpp<span class="op" style="color: #5E5E5E;">::</span>runif<span class="op" style="color: #5E5E5E;">(</span>n<span class="op" style="color: #5E5E5E;">,</span> <span class="dv" style="color: #AD0000;">0</span><span class="op" style="color: #5E5E5E;">,</span> <span class="dv" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">);</span></span>
<span id="cb4-14">  <span class="co" style="color: #5E5E5E;">// Matrix for 1-hot-encoding:</span></span>
<span id="cb4-15">  <span class="cf" style="color: #003B4F;">for</span> <span class="op" style="color: #5E5E5E;">(</span><span class="dt" style="color: #AD0000;">int</span> j <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">0</span><span class="op" style="color: #5E5E5E;">;</span> j <span class="op" style="color: #5E5E5E;">&lt;</span> n<span class="op" style="color: #5E5E5E;">;</span> j<span class="op" style="color: #5E5E5E;">++)</span> <span class="op" style="color: #5E5E5E;">{</span></span>
<span id="cb4-16">    <span class="co" style="color: #5E5E5E;">// Perform binary search:</span></span>
<span id="cb4-17">    <span class="dt" style="color: #AD0000;">int</span> l <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">0</span><span class="op" style="color: #5E5E5E;">;</span></span>
<span id="cb4-18">    <span class="dt" style="color: #AD0000;">int</span> r <span class="op" style="color: #5E5E5E;">=</span> k<span class="op" style="color: #5E5E5E;">;</span></span>
<span id="cb4-19">    <span class="dt" style="color: #AD0000;">double</span> target <span class="op" style="color: #5E5E5E;">=</span> u<span class="op" style="color: #5E5E5E;">[</span>j<span class="op" style="color: #5E5E5E;">];</span></span>
<span id="cb4-20">    <span class="cf" style="color: #003B4F;">while</span> <span class="op" style="color: #5E5E5E;">(</span>l <span class="op" style="color: #5E5E5E;">&lt;</span> r<span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">{</span></span>
<span id="cb4-21">      <span class="dt" style="color: #AD0000;">int</span> m <span class="op" style="color: #5E5E5E;">=</span> floor<span class="op" style="color: #5E5E5E;">((</span>l<span class="op" style="color: #5E5E5E;">+</span>r<span class="op" style="color: #5E5E5E;">)/</span><span class="dv" style="color: #AD0000;">2</span><span class="op" style="color: #5E5E5E;">);</span></span>
<span id="cb4-22">      <span class="cf" style="color: #003B4F;">if</span> <span class="op" style="color: #5E5E5E;">(</span>emp_cdf<span class="op" style="color: #5E5E5E;">[</span>m<span class="op" style="color: #5E5E5E;">]</span> <span class="op" style="color: #5E5E5E;">&gt;</span> target<span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">{</span></span>
<span id="cb4-23">        r <span class="op" style="color: #5E5E5E;">=</span> m<span class="op" style="color: #5E5E5E;">;</span></span>
<span id="cb4-24">      <span class="op" style="color: #5E5E5E;">}</span> <span class="cf" style="color: #003B4F;">else</span> <span class="op" style="color: #5E5E5E;">{</span></span>
<span id="cb4-25">        l <span class="op" style="color: #5E5E5E;">=</span> m<span class="op" style="color: #5E5E5E;">+</span><span class="dv" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">;</span></span>
<span id="cb4-26">      <span class="op" style="color: #5E5E5E;">}</span></span>
<span id="cb4-27">    <span class="op" style="color: #5E5E5E;">}</span></span>
<span id="cb4-28">    mat<span class="op" style="color: #5E5E5E;">(</span>r<span class="op" style="color: #5E5E5E;">,</span>j<span class="op" style="color: #5E5E5E;">)</span> <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">1</span><span class="op" style="color: #5E5E5E;">;</span></span>
<span id="cb4-29">  <span class="op" style="color: #5E5E5E;">}</span></span>
<span id="cb4-30">  <span class="cf" style="color: #003B4F;">return</span> mat<span class="op" style="color: #5E5E5E;">;</span></span>
<span id="cb4-31"><span class="op" style="color: #5E5E5E;">}</span></span></code></pre></div>
</div>
<p>In terms of performance it turns out that the simple C++ program actually does somewhat better than the base R alternative:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="fu" style="color: #4758AB;">library</span>(microbenchmark)</span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;">library</span>(ggplot2)</span>
<span id="cb5-3">n <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="dv" style="color: #AD0000;">1000</span></span>
<span id="cb5-4">p <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">c</span>(<span class="fl" style="color: #AD0000;">0.5</span>,<span class="fl" style="color: #AD0000;">0.1</span>,<span class="fl" style="color: #AD0000;">0.4</span>)</span>
<span id="cb5-5">mb <span class="ot" style="color: #003B4F;">&lt;-</span> <span class="fu" style="color: #4758AB;">microbenchmark</span>(</span>
<span id="cb5-6">    <span class="st" style="color: #20794D;">"rmultinom"</span> <span class="ot" style="color: #003B4F;">=</span> {<span class="fu" style="color: #4758AB;">rmultinom</span>(n, <span class="dv" style="color: #AD0000;">1</span>, p)},</span>
<span id="cb5-7">    <span class="st" style="color: #20794D;">"Rcpp"</span> <span class="ot" style="color: #003B4F;">=</span> {<span class="fu" style="color: #4758AB;">simCategorical</span>(n, p)}</span>
<span id="cb5-8">)</span>
<span id="cb5-9"><span class="fu" style="color: #4758AB;">autoplot</span>(mb)</span></code></pre></div>
</div>
</section>
<section id="embedding-existing-work" class="level2">
<h2 class="anchored" data-anchor-id="embedding-existing-work">Embedding existing work</h2>
<p>If you have some existing work that you would like to share you can just use it to overwrite the <code>index.Rmd</code> file. <code>blogdown</code> supports any kind of R Markdown documents so you can use all of your favourite markdown packages (<code>bookdown</code>, <code>pagedown</code>, ‚Ä¶). Just make sure to specify HTML output in the YAML header.</p>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<p>For more information about <code>blogdown</code> see <a href="https://bookdown.org/yihui/blogdown/">here</a>. To inspect the code that builds this website check out my <a href="https://github.com/pat-alt/patalt">GitHub repository</a>.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2021,
  author = {Patrick Altmeyer},
  title = {How {I‚Äôm} Building This Website in {R}},
  date = {21-02-02},
  url = {https://www.paltmeyer.com/blog//blog/posts/how-i-m-building-this-website-in-r},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2021" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer. 21AD. <span>‚ÄúHow I‚Äôm Building This Website in
R.‚Äù</span> February 2, 21AD. <a href="https://www.paltmeyer.com/blog//blog/posts/how-i-m-building-this-website-in-r">https://www.paltmeyer.com/blog//blog/posts/how-i-m-building-this-website-in-r</a>.
</div></div></section></div> ]]></description>
  <category>blogdown</category>
  <category>rmarkdown</category>
  <category>C++</category>
  <guid>https://www.paltmeyer.com/blog/blog/posts/how-i-m-building-this-website-in-r/index.html</guid>
  <pubDate>Mon, 01 Feb 2021 23:00:00 GMT</pubDate>
</item>
<item>
  <title>Welcome</title>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <dc:creator>Patrick Altmeyer</dc:creator>
  <link>https://www.paltmeyer.com/blog/blog/posts/welcome/index.html</link>
  <description><![CDATA[ 



<p>Welcome to my blog!</p>
<p>Having worked with R Markdown and some of <a href="https://yihui.org/">Yihui Xie</a>‚Äôs amazing packages for years, I have only now come across his <a href="https://bookdown.org/yihui/blogdown/">blogdown</a> package. For a while I have been thinking about a good way to share some of my work and actually started collecting snippets in a <a href="https://pat-alt.github.io/fromScratch/">Gitbook</a> through <a href="https://bookdown.org/yihui/bookdown/">bookdown</a> quite some time ago. While the book is a work-in-progress that I aim to finish eventually, I will use this website to regularly share content related to my work, research and other things.</p>
<div class="callout callout-style-default callout-note callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Update on Feb 20, 2022</strong></p>
<p>I have recently migrated this blog and pretty much everything else I do to <a href="https://quarto.org/">quarto</a>.</p>
<blockquote class="blockquote">
<p>Quarto¬Æ is an open-source scientific and technical publishing system built on Pandoc.</p>
</blockquote>
<p>Based on my first few experiences I would go further and say that quarto is <em>the only</em> open-source scientific and technical publishing system you‚Äôll ever need. The project is supported by RStudio and (unsurprisingly) Yihui Xie is one of the contributors. Go check it out!</p>
</div>
</div>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{altmeyer2021,
  author = {Patrick Altmeyer and Patrick Altmeyer},
  title = {Welcome},
  date = {21-02-01},
  url = {https://www.paltmeyer.com/blog//blog/posts/welcome},
  langid = {en}
}
</code></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-altmeyer2021" class="csl-entry quarto-appendix-citeas">
Patrick Altmeyer, and Patrick Altmeyer. 21AD. <span>‚ÄúWelcome.‚Äù</span>
February 1, 21AD. <a href="https://www.paltmeyer.com/blog//blog/posts/welcome">https://www.paltmeyer.com/blog//blog/posts/welcome</a>.
</div></div></section></div> ]]></description>
  <guid>https://www.paltmeyer.com/blog/blog/posts/welcome/index.html</guid>
  <pubDate>Sun, 31 Jan 2021 23:00:00 GMT</pubDate>
</item>
</channel>
</rss>
